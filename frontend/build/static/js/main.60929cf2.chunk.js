(this["webpackJsonpauto-spareparts-ecommerce-frontend"]=this["webpackJsonpauto-spareparts-ecommerce-frontend"]||[]).push([[0],{219:function(e,t,o){},220:function(e,t,o){"use strict";o.r(t);var i=o(1),r=o.n(i),n=o(82),s=o.n(n),a=o(20),l=o(5),c=o(0);var d=()=>Object(c.jsxs)("footer",{style:{background:"#46617a",color:"#fff",padding:"2.5rem 0 1.5rem",textAlign:"center",marginTop:"2rem",borderRadius:"0 0 10px 10px"},children:[Object(c.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto",display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:32,alignItems:"flex-start"},children:[Object(c.jsxs)("div",{style:{flex:1,minWidth:220,textAlign:"left"},children:[Object(c.jsx)("h3",{style:{fontWeight:700,marginBottom:8,borderBottom:"2px solid #e74c3c",display:"inline-block",paddingBottom:2},children:"AutoParts Online"}),Object(c.jsx)("p",{style:{margin:"10px 0 18px",color:"#e0e6ed",fontSize:15},children:"Your trusted source for quality automotive spare parts with convenient online shopping and fast delivery."}),Object(c.jsxs)("div",{style:{display:"flex",gap:16},children:[Object(c.jsx)("a",{href:"#",style:{color:"#fff",fontSize:22},children:Object(c.jsx)("i",{className:"fab fa-facebook"})}),Object(c.jsx)("a",{href:"#",style:{color:"#fff",fontSize:22},children:Object(c.jsx)("i",{className:"fab fa-twitter"})}),Object(c.jsx)("a",{href:"#",style:{color:"#fff",fontSize:22},children:Object(c.jsx)("i",{className:"fab fa-instagram"})}),Object(c.jsx)("a",{href:"#",style:{color:"#fff",fontSize:22},children:Object(c.jsx)("i",{className:"fab fa-linkedin"})})]})]}),Object(c.jsxs)("div",{style:{flex:1,minWidth:180,textAlign:"left"},children:[Object(c.jsx)("h3",{style:{fontWeight:700,marginBottom:8,borderBottom:"2px solid #e74c3c",display:"inline-block",paddingBottom:2},children:"Quick Links"}),Object(c.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0,color:"#e0e6ed",fontSize:15},children:[Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/",style:{color:"#fff",textDecoration:"none"},children:"Home"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/products",style:{color:"#fff",textDecoration:"none"},children:"Products"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/about",style:{color:"#fff",textDecoration:"none"},children:"About Us"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/contact",style:{color:"#fff",textDecoration:"none"},children:"Contact"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"#",style:{color:"#fff",textDecoration:"none"},children:"My Account"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"#",style:{color:"#fff",textDecoration:"none"},children:"Order Tracking"})})]})]}),Object(c.jsxs)("div",{style:{flex:1,minWidth:180,textAlign:"left"},children:[Object(c.jsx)("h3",{style:{fontWeight:700,marginBottom:8,borderBottom:"2px solid #e74c3c",display:"inline-block",paddingBottom:2},children:"Customer Service"}),Object(c.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0,color:"#e0e6ed",fontSize:15},children:[Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"#",style:{color:"#fff",textDecoration:"none"},children:"FAQs"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"#",style:{color:"#fff",textDecoration:"none"},children:"Shipping Policy"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"#",style:{color:"#fff",textDecoration:"none"},children:"Return Policy"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"#",style:{color:"#fff",textDecoration:"none"},children:"Privacy Policy"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"#",style:{color:"#fff",textDecoration:"none"},children:"Terms of Service"})})]})]}),Object(c.jsxs)("div",{style:{flex:1,minWidth:220,textAlign:"left"},children:[Object(c.jsx)("h3",{style:{fontWeight:700,marginBottom:8,borderBottom:"2px solid #e74c3c",display:"inline-block",paddingBottom:2},children:"Contact Us"}),Object(c.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0,color:"#e0e6ed",fontSize:15},children:[Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{style:{marginRight:8},children:Object(c.jsx)("i",{className:"fas fa-map-marker-alt"})}),"MicroLink IT College, Addis Ababa"]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{style:{marginRight:8},children:Object(c.jsx)("i",{className:"fas fa-phone"})}),"+251 911 234 567"]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{style:{marginRight:8},children:Object(c.jsx)("i",{className:"fas fa-envelope"})}),"info@autopartsonline.et"]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{style:{marginRight:8},children:Object(c.jsx)("i",{className:"fas fa-clock"})}),"Mon-Fri: 8:30 AM - 5:30 PM"]})]})]})]}),Object(c.jsx)("hr",{style:{border:"none",borderTop:"1px solid #7b8fa1",margin:"32px 0 18px"}}),Object(c.jsx)("div",{style:{color:"#e0e6ed",fontSize:14,textAlign:"center"},children:"\xa9 2025 AutoParts Online. All Rights Reserved. Developed by MicroLink IT College Team."}),Object(c.jsx)("button",{style:{position:"fixed",bottom:32,right:32,background:"#e74c3c",color:"#fff",border:"none",borderRadius:"50%",width:44,height:44,fontSize:22,boxShadow:"0 2px 8px rgba(44,62,80,0.18)",cursor:"pointer",zIndex:1e3},children:Object(c.jsx)("i",{className:"fas fa-bars"})})]}),b=o(2),j=o.n(b);const h=["Toyota","Honda","Ford","BMW","Mercedes"],u={Toyota:["Corolla","Camry","RAV4"],Honda:["Civic","Accord","CR-V"],Ford:["Focus","Fusion","Escape"],BMW:["3 Series","5 Series","X5"],Mercedes:["C-Class","E-Class","GLA"]},m=Array.from({length:25},(e,t)=>2025-t);var p=function(e){let{filters:t,setFilters:o,onSearch:i}=e;const r=e=>{o({...t,[e.target.name]:e.target.value})};return Object(c.jsxs)("div",{className:"search-bar",children:[Object(c.jsxs)("select",{name:"make",value:t.make,onChange:r,children:[Object(c.jsx)("option",{value:"",children:"All Makes"}),h.map(e=>Object(c.jsx)("option",{value:e,children:e},e))]}),Object(c.jsxs)("select",{name:"model",value:t.model,onChange:e=>{o({...t,model:e.target.value})},disabled:!t.make,children:[Object(c.jsx)("option",{value:"",children:"All Models"}),t.make&&u[t.make].map(e=>Object(c.jsx)("option",{value:e,children:e},e))]}),Object(c.jsxs)("select",{name:"year",value:t.year,onChange:r,children:[Object(c.jsx)("option",{value:"",children:"All Years"}),m.map(e=>Object(c.jsx)("option",{value:e,children:e},e))]}),Object(c.jsx)("input",{type:"text",name:"search",placeholder:"Search parts...",value:t.search,onChange:r}),Object(c.jsx)("button",{onClick:i,children:"Search"})]})};var g=e=>{let{onLoginClick:t,onRegisterClick:o,onCartClick:r,onCartCount:n,onChatClick:s,filters:a,setFilters:d,onSearch:b}=e;const j=Object(l.h)(),[h,u]=Object(i.useState)(!1),[m,g]=Object(i.useState)(""),[x,f]=Object(i.useState)([]),[O,y]=Object(i.useState)(0),[v,S]=Object(i.useState)(!1),[w,k]=Object(i.useState)(!1);Object(i.useEffect)(()=>{u(!!localStorage.getItem("token")),g(localStorage.getItem("userEmail")||"")},[]),Object(i.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("notifications"))||[];f(e),y(e.filter(e=>!e.read).length)},[v]),Object(i.useEffect)(()=>{const e=setInterval(()=>{const e=JSON.parse(localStorage.getItem("notifications"))||[];f(e),y(e.filter(e=>!e.read).length)},5e3);return()=>clearInterval(e)},[]),Object(i.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user"));if("admin"===(null===e||void 0===e?void 0:e.role)){const e=setInterval(()=>{const e=JSON.parse(localStorage.getItem("adminNotifications"))||[];f(e),y(e.filter(e=>!e.read).length)},5e3);return()=>clearInterval(e)}},[]),Object(i.useEffect)(()=>{document.body.className=w?"dark-mode":""},[w]);return"/admin"===j.pathname||"/subadmin"===j.pathname?null:Object(c.jsxs)("header",{className:"main-header"+(w?" dark":""),style:{background:"#2c3e50",color:"#fff",padding:"1rem 0",textAlign:"center"},children:[Object(c.jsxs)("div",{className:"header-top",children:[Object(c.jsx)("div",{className:"logo",style:{color:"#fff"},children:"AutoParts Online"}),Object(c.jsxs)("nav",{className:"nav-links",style:{marginBottom:"1rem",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:[Object(c.jsx)("a",{href:"/",style:{color:"#fff",margin:"0 1rem",textDecoration:"underline"},children:"Home"}),Object(c.jsx)("a",{href:"#products-section",style:{color:"#fff",margin:"0 1rem"},children:"Products"}),Object(c.jsx)("a",{href:"/about",style:{color:"#fff",margin:"0 1rem"},children:"About"}),Object(c.jsx)("a",{href:"/contact",style:{color:"#fff",margin:"0 1rem"},children:"Contact"}),Object(c.jsx)("a",{href:"/post",style:{color:"#fff",margin:"0 1rem"},children:"Post"}),Object(c.jsx)("a",{href:"/wishlist",style:{color:"#fff",margin:"0 1rem"},children:"Wishlist"}),Object(c.jsx)("a",{href:"/orders",style:{color:"#fff",margin:"0 1rem"},children:"Orders"}),h&&Object(c.jsx)("a",{href:"/profile",style:{color:"#fff",margin:"0 1rem",textDecoration:"underline"},children:"Profile"})]}),Object(c.jsxs)("div",{className:"header-actions",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(c.jsx)("button",{onClick:()=>k(!w),className:"dark-mode-toggle",style:{background:"none",border:"none",color:"#fff",fontSize:"1.5rem",cursor:"pointer",margin:"0 1rem"},children:w?"\ud83c\udf19":"\u2600\ufe0f"}),h?Object(c.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("userEmail"),u(!1),g(""),window.location.reload()},style:{margin:"0 1rem",padding:"0.3rem 1rem",background:"#e74c3c",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Logout"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{onClick:t,style:{margin:"0 0.5rem",padding:"0.3rem 1rem",background:"#3498db",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Login"}),Object(c.jsx)("button",{onClick:o,style:{margin:"0 0.5rem",padding:"0.3rem 1rem",background:"#8e44ad",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Register"})]}),Object(c.jsxs)("button",{onClick:r,style:{margin:"0 1rem",padding:"0.3rem 1rem",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:["Cart (",n||0,")"]}),h&&m&&Object(c.jsxs)("span",{style:{marginLeft:"1.5rem",fontWeight:"bold",fontSize:"1rem",color:"#fff"},children:["Signed in as ",m]}),h&&Object(c.jsxs)("button",{onClick:s,style:{margin:"0 1rem",padding:"0.3rem 1rem",background:"#3a6cf6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:[Object(c.jsx)("i",{className:"fas fa-comments",style:{fontSize:16}})," Chat"]}),Object(c.jsxs)("span",{className:"notification-bell",title:"Notifications",onClick:()=>S(e=>!e),style:{position:"relative",margin:"0 1rem",cursor:"pointer"},children:[Object(c.jsx)("i",{className:"fas fa-bell",style:{fontSize:20,color:"#fff"}}),O>0&&Object(c.jsx)("span",{style:{position:"absolute",top:-6,right:-6,background:"#e74c3c",color:"#fff",borderRadius:"50%",fontSize:12,padding:"2px 6px",fontWeight:700},children:O})]}),v&&Object(c.jsxs)("div",{style:{position:"absolute",right:0,top:40,background:"#fff",border:"1px solid #eee",borderRadius:8,boxShadow:"0 2px 12px #0984e322",minWidth:260,zIndex:100},children:[Object(c.jsx)("div",{style:{fontWeight:700,padding:"8px 12px",borderBottom:"1px solid #eee"},children:"Notifications"}),0===x.length?Object(c.jsx)("div",{style:{padding:"12px",color:"#888"},children:"No notifications."}):x.map((e,t)=>Object(c.jsx)("div",{style:{padding:"10px 12px",borderBottom:"1px solid #eee",fontSize:15,color:e.read?"#888":"#222"},children:e.message},t))]})]})]}),Object(c.jsx)("div",{className:"header-search",style:{marginTop:"0.5rem"},children:Object(c.jsx)(p,{filters:a,setFilters:d,onSearch:b})})]})};var x=e=>{var t,o,r,n,s,a;let{filters:l={},searchTrigger:d,onAddToCart:b,onCartCountChange:h}=e;const[u,m]=Object(i.useState)([]),[p,g]=Object(i.useState)(!1),[x,f]=Object(i.useState)(null),[O,y]=Object(i.useState)("popular"),[v,S]=Object(i.useState)("all"),[w,k]=Object(i.useState)(()=>(JSON.parse(localStorage.getItem("cart"))||[]).reduce((e,t)=>e+(t.quantity||1),0)),[C,N]=Object(i.useState)("");Object(i.useEffect)(()=>{try{const e=JSON.parse(localStorage.getItem("user"));N((null===e||void 0===e?void 0:e.role)||"")}catch{N("")}},[]),Object(i.useEffect)(()=>{g(!0),f(null);const e={};l.make&&(e.make=l.make),l.model&&(e.model=l.model),l.year&&(e.year=l.year),l.search&&(e.search=l.search),j.a.get("/api/products",{params:e}).then(e=>m(e.data)).catch(e=>f("Failed to load products.")).finally(()=>g(!1))},[l,d]),Object(i.useEffect)(()=>{h&&h(w)},[w,h]);let z=u;"all"!==v&&"All Categories"!==v&&(z=z.filter(e=>(e.category||"").toLowerCase().includes(v.toLowerCase()))),"priceLow"===O&&(z=[...z].sort((e,t)=>e.price-t.price)),"priceHigh"===O&&(z=[...z].sort((e,t)=>t.price-e.price)),"newest"===O&&(z=[...z].sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));const B=e=>{let t=JSON.parse(localStorage.getItem("cart"))||[];const o=t.find(t=>t._id===e._id);if(o){if(!(o.quantity<e.stock))return;o.quantity=(o.quantity||1)+1}else{if(!(e.stock>0))return;t.push({...e,quantity:1})}t=t.map(e=>({...e,quantity:e.quantity||1})),localStorage.setItem("cart",JSON.stringify(t)),(()=>{const e=JSON.parse(localStorage.getItem("cart"))||[];k(e.reduce((e,t)=>e+(t.quantity||1),0))})(),b&&b()},[W,R]=Object(i.useState)(null),[I,P]=Object(i.useState)(!1),A=()=>{P(!1),R(null)},[E,T]=Object(i.useState)(!1),[L,D]=Object(i.useState)([]),[$,M]=Object(i.useState)(""),[q,F]=Object(i.useState)(null),[_,U]=Object(i.useState)(!1),H=async e=>{U(!0);try{const t=localStorage.getItem("token"),o=await j.a.get(`/api/messages?productId=${e}`,{headers:{Authorization:`Bearer ${t}`}});D(o.data)}catch(t){D([])}U(!1)},Y=async e=>{try{const t=localStorage.getItem("token");await j.a.post("/api/wishlist/add",{productId:e._id},{headers:{Authorization:`Bearer ${t}`}}),alert("Added to wishlist!")}catch{alert("Failed to add to wishlist.")}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("section",{className:"products",id:"products",style:{background:"#f6f6f7",padding:"60px 0 40px",minHeight:600,width:"100vw",position:"relative",left:"50%",right:"50%",marginLeft:"-50vw",marginRight:"-50vw"},children:Object(c.jsxs)("div",{className:"container",style:{maxWidth:"100vw",width:"100vw",margin:"0 auto",padding:"0 2vw"},children:[Object(c.jsxs)("h2",{className:"section-title",style:{fontWeight:700,fontSize:36,color:"#2c3e50",margin:0,letterSpacing:.5,textAlign:"center"},children:["Featured Products",Object(c.jsx)("div",{style:{width:60,height:4,background:"#e74c3c",borderRadius:2,margin:"16px auto 0",display:"block"}})]}),Object(c.jsxs)("div",{className:"product-filters",style:{display:"flex",justifyContent:"center",gap:32,margin:"40px 0 36px",flexWrap:"wrap"},children:[Object(c.jsxs)("div",{className:"filter-group",style:{minWidth:220,fontWeight:700,fontSize:16,background:"#fff",borderRadius:12,boxShadow:"0 2px 12px #eaeaea",padding:14,display:"flex",alignItems:"center",gap:10},children:[Object(c.jsx)("label",{htmlFor:"sort-by",style:{fontWeight:700,marginRight:8,fontSize:15},children:"Sort by:"}),Object(c.jsx)("select",{id:"sort-by",value:O,onChange:e=>y(e.target.value),style:{padding:8,borderRadius:8,border:"1.5px solid #ddd",minWidth:110,fontSize:14,fontWeight:500,boxShadow:"0 2px 8px #f6f6f7"},children:[{value:"popular",label:"Most Popular"},{value:"priceLow",label:"Price: Low to High"},{value:"priceHigh",label:"Price: High to Low"},{value:"newest",label:"Newest"}].map(e=>Object(c.jsx)("option",{value:e.value,children:e.label},e.value))})]}),Object(c.jsxs)("div",{className:"filter-group",style:{minWidth:220,fontWeight:700,fontSize:16,background:"#fff",borderRadius:12,boxShadow:"0 2px 12px #eaeaea",padding:14,display:"flex",alignItems:"center",gap:10},children:[Object(c.jsx)("label",{htmlFor:"category-filter",style:{fontWeight:700,marginRight:8,fontSize:15},children:"Category:"}),Object(c.jsx)("select",{id:"category-filter",value:v,onChange:e=>S(e.target.value),style:{padding:8,borderRadius:8,border:"1.5px solid #ddd",minWidth:110,fontSize:14,fontWeight:500,boxShadow:"0 2px 8px #f6f6f7"},children:["All Categories","Engine Parts","Brake System","Cooling System","Lighting"].map(e=>Object(c.jsx)("option",{value:e,children:e},e))})]})]}),Object(c.jsxs)("div",{className:"product-grid",id:"product-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(390px, 1fr))",gap:36,width:"100vw",padding:"0 2vw"},children:[p&&Object(c.jsx)("div",{children:"Loading products..."}),x&&Object(c.jsx)("div",{style:{color:"red"},children:x}),!p&&!x&&0===z.length&&Object(c.jsx)("div",{style:{gridColumn:"1/-1",textAlign:"center",color:"#888",fontSize:22,padding:"60px 0"},children:"No products found."}),!p&&!x&&z.map(e=>{var t;return Object(c.jsxs)("div",{className:"product-card",style:{background:"#fff",borderRadius:18,boxShadow:"0 4px 16px rgba(44,62,80,0.08)",padding:0,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column",minHeight:480},children:[Object(c.jsx)("div",{className:"product-badge",style:{position:"absolute",top:14,left:14,background:"#e74c3c",color:"#fff",fontWeight:700,fontSize:13,borderRadius:7,padding:"3px 12px",zIndex:2},children:"New"}),Object(c.jsx)("div",{className:"product-image",children:e.image&&Object(c.jsx)("img",{src:e.image?e.image.startsWith("http")?e.image:e.image.startsWith("/uploads/")?`http://localhost:5000${e.image}`:`http://localhost:5000/uploads/${e.image}`:"/default-product.png",alt:e.name,loading:"lazy",style:{width:"100%",height:170,objectFit:"cover",borderTopLeftRadius:18,borderTopRightRadius:18,background:"#f8f8f8"}})}),Object(c.jsxs)("div",{className:"product-info",style:{padding:"20px 20px 16px",flex:1,display:"flex",flexDirection:"column"},children:[Object(c.jsx)("span",{className:"product-category",style:{color:"#2980ef",fontWeight:700,fontSize:13,marginBottom:2},children:e.category||"Engine Parts"}),Object(c.jsx)("h3",{className:"product-title",style:{fontWeight:700,fontSize:18,color:"#223",marginBottom:6},children:e.name}),Object(c.jsx)("p",{className:"product-description",style:{color:"#666",fontSize:13,marginBottom:10,minHeight:28,maxHeight:28,overflow:"hidden",textOverflow:"ellipsis"},children:e.description||e.desc}),Object(c.jsxs)("div",{className:"product-meta",style:{display:"flex",alignItems:"center",gap:10,marginBottom:10},children:[Object(c.jsxs)("div",{className:"product-price",style:{fontWeight:700,fontSize:16,color:"#e74c3c"},children:["ETB ",null===(t=e.price)||void 0===t?void 0:t.toLocaleString()]}),e.stock>5&&Object(c.jsx)("div",{className:"product-stock in-stock",style:{background:"#27ae60",color:"#fff",fontWeight:600,fontSize:12,borderRadius:8,padding:"3px 10px"},children:"In Stock"}),e.stock>0&&e.stock<=5&&Object(c.jsxs)("div",{className:"product-stock low-stock",style:{background:"#f7c948",color:"#fff",fontWeight:600,fontSize:12,borderRadius:8,padding:"3px 10px"},children:["Low Stock (",e.stock,")"]}),(0===e.stock||void 0===e.stock||null===e.stock)&&Object(c.jsx)("div",{className:"product-stock out-stock",style:{background:"#e74c3c",color:"#fff",fontWeight:600,fontSize:12,borderRadius:8,padding:"3px 10px"},children:"Out of Stock"})]}),Object(c.jsxs)("div",{className:"product-actions",style:{display:"flex",gap:8,marginTop:"auto"},children:[Object(c.jsxs)("button",{className:"btn btn-outline view-details",onClick:()=>(async e=>{try{const t=await j.a.get(`/api/products/${e._id}`);R(t.data),P(!0)}catch(t){R(e),P(!0)}})(e),style:{background:"#fff",color:"#e74c3c",border:"2px solid #e74c3c",borderRadius:8,padding:"8px 18px",fontWeight:700,fontSize:14,cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center",gap:6},children:[Object(c.jsx)("i",{className:"fas fa-info-circle",style:{fontSize:16}})," Details"]}),e.shopId?Object(c.jsxs)("button",{className:"btn btn-primary add-to-cart",onClick:t=>{t.stopPropagation(),B(e)},disabled:!e.stock||0===e.stock,style:{background:e.stock&&0!==e.stock?"#e74c3c":"#f6f6f7",color:"#fff",border:"none",borderRadius:8,padding:"8px 18px",fontWeight:700,fontSize:14,cursor:e.stock&&0!==e.stock?"pointer":"not-allowed",opacity:e.stock&&0!==e.stock?1:.7,display:"flex",alignItems:"center",gap:6},children:[Object(c.jsx)("i",{className:"fas fa-cart-plus",style:{fontSize:16}})," Add to Cart"]}):null,Object(c.jsxs)("button",{className:"btn btn-outline",style:{background:"#fff",color:"#3a6cf6",border:"2px solid #3a6cf6",borderRadius:8,padding:"8px 18px",fontWeight:700,fontSize:14,cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center",gap:6},onClick:()=>Y(e),children:[Object(c.jsx)("i",{className:"fas fa-heart",style:{fontSize:16}})," Wishlist"]})]})]})]},e._id)})]}),Object(c.jsx)("div",{className:"load-more",style:{display:"flex",justifyContent:"center",marginTop:40},children:Object(c.jsx)("button",{className:"btn btn-outline",id:"load-more-btn",style:{background:"#fff",color:"#e74c3c",border:"2px solid #e74c3c",borderRadius:9,padding:"13px 38px",fontWeight:700,fontSize:18,cursor:"pointer",boxShadow:"0 2px 8px #f6f6f7",marginTop:8},children:"Load More Products"})})]})}),I&&W&&Object(c.jsx)("div",{className:"product-details-modal",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(44,62,80,0.18)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(c.jsxs)("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:24,minWidth:320,maxWidth:420,width:"90vw",position:"relative"},children:[Object(c.jsx)("button",{onClick:A,style:{position:"absolute",top:12,right:12,background:"none",border:"none",fontSize:20,color:"#e74c3c",cursor:"pointer",fontWeight:700},children:"\xd7"}),Object(c.jsxs)("div",{style:{display:"flex",gap:18,flexWrap:"wrap"},children:[Object(c.jsx)("div",{style:{flex:"1 1 120px",minWidth:120},children:Object(c.jsx)("img",{src:W.image?W.image.startsWith("http")?W.image:W.image.startsWith("/uploads/")?`http://localhost:5000${W.image}`:`http://localhost:5000/uploads/${W.image}`:"/default-product.png",alt:W.name,style:{width:"100%",height:120,objectFit:"cover",borderRadius:10,background:"#f8f8f8"}})}),Object(c.jsxs)("div",{style:{flex:"2 1 180px",minWidth:120},children:[Object(c.jsx)("h2",{style:{fontWeight:700,fontSize:18,color:"#223",marginBottom:6},children:W.name}),Object(c.jsx)("div",{style:{color:"#2980ef",fontWeight:700,fontSize:13,marginBottom:6},children:W.category||"Engine Parts"}),Object(c.jsxs)("div",{style:{fontWeight:700,fontSize:15,color:"#e74c3c",marginBottom:8},children:["ETB ",null===(t=W.price)||void 0===t?void 0:t.toLocaleString()]}),Object(c.jsx)("div",{style:{color:"#666",fontSize:13,marginBottom:10},children:W.description||W.desc}),Object(c.jsxs)("div",{style:{marginBottom:10},children:[W.stock>5&&Object(c.jsx)("span",{style:{background:"#27ae60",color:"#fff",fontWeight:600,fontSize:11,borderRadius:8,padding:"3px 10px"},children:"In Stock"}),W.stock>0&&W.stock<=5&&Object(c.jsxs)("span",{style:{background:"#f7c948",color:"#fff",fontWeight:600,fontSize:11,borderRadius:8,padding:"3px 10px"},children:["Low Stock (",W.stock,")"]}),(!W.stock||0===W.stock)&&Object(c.jsx)("span",{style:{background:"#e74c3c",color:"#fff",fontWeight:600,fontSize:11,borderRadius:8,padding:"3px 10px"},children:"Out of Stock"})]}),Object(c.jsxs)("div",{style:{marginBottom:10,marginTop:10,padding:"10px",background:"#f6f6f7",borderRadius:8},children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Seller Name:"})," ",W.sellerName||(null===(o=W.owner)||void 0===o?void 0:o.username)||"N/A"]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Phone:"})," ",W.sellerPhone||(null===(r=W.owner)||void 0===r?void 0:r.phone)||"N/A",W.sellerPhone||null!==(n=W.owner)&&void 0!==n&&n.phone?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{style:{marginLeft:8,fontSize:12,padding:"2px 8px",borderRadius:6,background:"#3a6cf6",color:"#fff",border:"none",cursor:"pointer"},onClick:()=>{var e;return window.open(`tel:${W.sellerPhone||(null===(e=W.owner)||void 0===e?void 0:e.phone)}`)},children:"Call Seller"}),Object(c.jsx)("button",{style:{marginLeft:4,fontSize:12,padding:"2px 8px",borderRadius:6,background:"#f7c948",color:"#222",border:"none",cursor:"pointer"},onClick:()=>{var e;navigator.clipboard.writeText(W.sellerPhone||(null===(e=W.owner)||void 0===e?void 0:e.phone))},children:"Copy Phone"})]}):null]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Email:"})," ",W.sellerEmail||(null===(s=W.owner)||void 0===s?void 0:s.email)||"N/A",W.sellerEmail||null!==(a=W.owner)&&void 0!==a&&a.email?Object(c.jsx)("button",{style:{marginLeft:8,fontSize:12,padding:"2px 8px",borderRadius:6,background:"#f7c948",color:"#222",border:"none",cursor:"pointer"},onClick:()=>{var e;navigator.clipboard.writeText(W.sellerEmail||(null===(e=W.owner)||void 0===e?void 0:e.email))},children:"Copy Email"}):null]})]}),!W.shopId&&Object(c.jsx)("button",{className:"btn btn-outline",style:{marginTop:8,marginBottom:8,background:"#3a6cf6",color:"#fff",border:"none",borderRadius:8,padding:"8px 18px",fontWeight:700,fontSize:14,cursor:"pointer"},onClick:async()=>{null!==W&&void 0!==W&&W._id&&await H(W._id),T(!0)},children:"Chat with Seller"}),W.shopId?Object(c.jsxs)("button",{className:"btn btn-primary add-to-cart",onClick:()=>{B(W),A()},disabled:!W.stock||0===W.stock,style:{background:W.stock&&0!==W.stock?"#e74c3c":"#f6f6f7",color:"#fff",border:"none",borderRadius:8,padding:"8px 18px",fontWeight:700,fontSize:14,cursor:W.stock&&0!==W.stock?"pointer":"not-allowed",opacity:W.stock&&0!==W.stock?1:.7,display:"flex",alignItems:"center",gap:6},children:[Object(c.jsx)("i",{className:"fas fa-cart-plus",style:{fontSize:14}})," Add to Cart"]}):null,Object(c.jsxs)("button",{className:"btn btn-outline",style:{marginTop:8,marginBottom:8,background:"#fff",color:"#3a6cf6",border:"2px solid #3a6cf6",borderRadius:8,padding:"8px 18px",fontWeight:700,fontSize:14,cursor:"pointer"},onClick:()=>Y(W),children:[Object(c.jsx)("i",{className:"fas fa-heart",style:{fontSize:14}})," Wishlist"]})]})]}),E&&Object(c.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#232946cc",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(c.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:12,minWidth:340,maxWidth:400,boxShadow:"0 2px 12px #23294655",color:"#232946",display:"flex",flexDirection:"column",gap:12},children:[Object(c.jsx)("h3",{style:{marginBottom:8},children:"Chat with Seller"}),Object(c.jsx)("div",{style:{maxHeight:220,overflowY:"auto",marginBottom:8,border:"1px solid #eee",borderRadius:8,padding:8},children:_?Object(c.jsx)("div",{children:"Loading..."}):0===L.length?Object(c.jsx)("div",{style:{color:"#888"},children:"No messages yet."}):L.map((e,t)=>{var o;return Object(c.jsxs)("div",{style:{marginBottom:6},children:[Object(c.jsxs)("b",{children:[(null===(o=e.from)||void 0===o?void 0:o.username)||"You",":"]})," ",e.text,e.fileUrl&&Object(c.jsx)("div",{style:{marginTop:4},children:e.fileUrl.match(/\.(jpg|jpeg|png|gif)$/i)?Object(c.jsx)("img",{src:e.fileUrl,alt:"file",style:{maxWidth:120,borderRadius:8}}):Object(c.jsx)("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",children:"Download File"})}),Object(c.jsx)("div",{style:{fontSize:11,color:"#888"},children:new Date(e.createdAt).toLocaleString()})]},t)})}),Object(c.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[Object(c.jsx)("input",{type:"file",accept:"image/*,.pdf,.doc,.docx,.txt",onChange:e=>F(e.target.files[0]),style:{flex:1}}),Object(c.jsx)("input",{type:"text",value:$,onChange:e=>M(e.target.value),placeholder:"Type your message...",style:{flex:2,padding:8,borderRadius:8,border:"1px solid #ccc"}}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if($.trim()||q){U(!0);try{const e=localStorage.getItem("token"),t=new FormData;t.append("productId",W._id),t.append("text",$),q&&t.append("file",q),await j.a.post("/api/messages/upload",t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}}),M(""),F(null),await H(W._id)}catch(e){}U(!1)}},disabled:_||!$.trim()&&!q,style:{padding:"8px 16px",borderRadius:8},children:"Send"})]}),Object(c.jsx)("button",{className:"btn btn-outline",onClick:()=>T(!1),style:{marginTop:8},children:"Close"})]})})]})})]})};var f=e=>{let{onClose:t,onCheckout:o,onCartCountChange:r}=e;const[n,s]=Object(i.useState)([]),a=Object(l.g)();Object(i.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("cart"))||[];if(s(e),r){const t=e.reduce((e,t)=>e+(t.quantity||1),0);r(t)}},[]),Object(i.useEffect)(()=>{const e=e=>{if("cart"===e.key){const t=JSON.parse(e.newValue)||[];if(s(t),r){const e=t.reduce((e,t)=>e+(t.quantity||1),0);r(e)}}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[r]);const d=e=>{(e=>{if(s(e),localStorage.setItem("cart",JSON.stringify(e)),r){const t=e.reduce((e,t)=>e+(t.quantity||1),0);r(t)}})(n.filter(t=>t._id!==e))},b=(e,t)=>{s(o=>{const i=o.map(o=>{if(o._id===e){const e=o.stock||1,i=Math.max(1,Math.min((o.quantity||1)+t,e));return{...o,quantity:i}}return o});if(localStorage.setItem("cart",JSON.stringify(i)),r){const e=i.reduce((e,t)=>e+(t.quantity||1),0);r(e)}return i})},j=n.reduce((e,t)=>e+t.price*(t.quantity||1),0);return n&&0!==n.length?Object(c.jsx)("div",{className:"cart-popup-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(44, 62, 80, 0.25)",zIndex:9999,display:"flex",alignItems:"stretch",justifyContent:"flex-end"},children:Object(c.jsxs)("div",{className:"cart-popup",style:{background:"#fff",borderRadius:"0 0 0 0",boxShadow:"-4px 0 32px rgba(44,62,80,0.18)",minWidth:380,maxWidth:420,width:"100%",maxHeight:"100vh",height:"100vh",overflowY:"auto",padding:0,position:"relative",display:"flex",flexDirection:"column"},children:[Object(c.jsxs)("div",{className:"cart-header",style:{background:"#42546e",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"24px 24px 18px 24px",borderTopLeftRadius:0,borderTopRightRadius:0},children:[Object(c.jsx)("span",{style:{fontWeight:700,fontSize:26,letterSpacing:.5},children:"Your Cart"}),Object(c.jsx)("button",{className:"cart-close",onClick:t,style:{background:"none",border:"none",fontSize:28,color:"#fff",cursor:"pointer",fontWeight:700,lineHeight:1},children:"\xd7"})]}),Object(c.jsx)("div",{className:"cart-list",style:{flex:1,padding:"24px 24px 0 24px",overflowY:"auto"},children:n.map((e,t)=>{var o;return Object(c.jsxs)("div",{style:{display:"flex",gap:18,alignItems:"flex-start",borderBottom:t!==n.length-1?"1px solid #ededed":"none",paddingBottom:22,marginBottom:22},children:[Object(c.jsx)("img",{src:null!==(o=e.image)&&void 0!==o&&o.startsWith("http")?e.image:e.image?`http://localhost:5000/uploads/${e.image}`:"/default-product.png",alt:e.name,style:{width:80,height:80,objectFit:"cover",borderRadius:8,boxShadow:"0 2px 8px #e0e0e0",background:"#f8f8f8"}}),Object(c.jsxs)("div",{style:{flex:1,minWidth:0},children:[Object(c.jsx)("div",{style:{fontWeight:700,fontSize:19,color:"#222",marginBottom:2},children:e.name}),Object(c.jsxs)("div",{style:{color:"#e74c3c",fontWeight:700,fontSize:20,marginBottom:8},children:["ETB ",e.price.toLocaleString()]}),Object(c.jsx)("div",{style:{color:"#888",fontSize:15,marginBottom:10},children:e.desc}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[Object(c.jsx)("button",{onClick:()=>b(e._id,-1),style:{background:"#f2f4f7",border:"none",borderRadius:4,width:32,height:32,fontWeight:700,fontSize:18,cursor:e.quantity>1?"pointer":"not-allowed",color:"#42546e"},disabled:e.quantity<=1,children:"-"}),Object(c.jsx)("span",{style:{fontWeight:600,fontSize:17,minWidth:24,textAlign:"center"},children:e.quantity||1}),Object(c.jsx)("button",{onClick:()=>b(e._id,1),style:{background:"#f2f4f7",border:"none",borderRadius:4,width:32,height:32,fontWeight:700,fontSize:18,cursor:e.quantity>=(e.stock||1)?"not-allowed":"pointer",color:"#42546e"},disabled:e.quantity>=(e.stock||1),children:"+"})]}),Object(c.jsxs)("button",{onClick:()=>d(e._id),style:{background:"none",border:"none",color:"#e74c3c",fontWeight:600,marginTop:0,cursor:"pointer",fontSize:16,display:"flex",alignItems:"center",gap:6},children:[Object(c.jsx)("span",{style:{fontSize:18,display:"inline-block",marginRight:2},children:"\ud83d\uddd1\ufe0f"})," Remove"]})]})]},e._id)})}),Object(c.jsxs)("div",{className:"cart-footer",style:{borderTop:"1px solid #ededed",background:"#fafbfc",marginTop:"auto",padding:"24px",position:"sticky",bottom:0,zIndex:2},children:[Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:700,fontSize:20,marginBottom:18},children:[Object(c.jsx)("span",{children:"Subtotal:"}),Object(c.jsxs)("span",{style:{color:"#222"},children:["ETB ",j.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),Object(c.jsx)("button",{disabled:0===n.length,onClick:n.length>0?()=>{o?o(n,j):a.push("/checkout")}:void 0,style:{background:"#e74c3c",color:"#fff",border:"none",borderRadius:8,padding:"1rem 0",fontWeight:700,fontSize:18,width:"100%",cursor:0===n.length?"not-allowed":"pointer",opacity:0===n.length?.85:1,letterSpacing:.2},children:"Proceed to Checkout"})]})]})}):null};var O=()=>{const[e]=Object(i.useState)(JSON.parse(localStorage.getItem("cart"))||[]),[t,o]=Object(i.useState)(""),[r,n]=Object(i.useState)(!1);if(0===e.length)return Object(c.jsx)("div",{children:"Your cart is empty."});const s=e.reduce((e,t)=>e+t.price*(t.quantity||1),0);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Checkout"}),Object(c.jsx)("ul",{children:e.map(e=>Object(c.jsxs)("li",{children:[e.name," - $",e.price," x ",e.quantity||1]},e._id))}),Object(c.jsx)("div",{children:Object(c.jsxs)("strong",{children:["Total: $",s.toFixed(2)]})}),Object(c.jsx)("button",{onClick:async()=>{n(!0),o("");try{var t,i,r,s;const a=localStorage.getItem("token"),l=JSON.parse(localStorage.getItem("user")),c=await Promise.all(e.map(async e=>(await j.a.get(`http://localhost:5000/api/products/${e._id}`)).data)),d=(null===(t=c[0])||void 0===t||null===(i=t.owner)||void 0===i?void 0:i._id)||(null===(r=c[0])||void 0===r?void 0:r.owner)||"",b=(null===(s=c[0])||void 0===s?void 0:s.shopId)||"",h=null===l||void 0===l?void 0:l._id;if(!d||!b||!h)return o(`Order failed: Missing required field(s). seller: ${d}, buyer: ${h}, shopId: ${b}`),void n(!1);const u={products:e.map((e,t)=>({product:e._id,quantity:e.quantity||1,price:e.price})),total:e.reduce((e,t)=>e+t.price*(t.quantity||1),0),buyer:h,seller:d,shopId:b};console.log("Order payload:",u);await j.a.post("http://localhost:5000/api/orders",u,{headers:{Authorization:`Bearer ${a}`}});localStorage.removeItem("cart"),o("Order placed successfully!")}catch(c){var a,l;o("Order failed: "+((null===(a=c.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.error)||c.message))}n(!1)},disabled:r,children:r?"Placing Order...":"Place Order"}),Object(c.jsx)("div",{children:t})]})};o(34);var y=e=>{let{onAddToCart:t,cartCount:o,setCartCount:r}=e;const[n,s]=Object(i.useState)({make:"",model:"",year:"",search:""}),[a,l]=Object(i.useState)(0),[b,j]=Object(i.useState)(!1),h=()=>{j(!0)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("section",{className:"hero-section",children:Object(c.jsxs)("div",{className:"hero-content",children:[Object(c.jsx)("h2",{className:"section-title",children:"Find Quality Spare Parts for Your Vehicle"}),Object(c.jsx)("div",{className:"hero-search-bar",children:Object(c.jsx)(p,{filters:n,setFilters:s,onSearch:()=>{l(e=>e+1)}})}),Object(c.jsx)("p",{className:"hero-subtitle",children:"Browse our extensive catalog of automotive spare parts and accessories. Fast delivery, trusted sellers, and the best prices online."})]})}),Object(c.jsxs)("section",{className:"categories-section",children:[Object(c.jsx)("h2",{className:"section-title",children:"Shop by Category"}),Object(c.jsx)("div",{className:"section-divider"}),Object(c.jsxs)("div",{className:"categories-grid",children:[Object(c.jsxs)("div",{className:"category-card",children:[Object(c.jsx)("div",{className:"category-icon","aria-label":"engine",children:"\ud83d\udd0b"}),Object(c.jsx)("div",{className:"category-title",children:"Engine Parts"}),Object(c.jsx)("div",{className:"category-desc",children:"Filters, pumps, belts and more"}),Object(c.jsx)("button",{className:"btn btn-outline",children:"Browse"})]}),Object(c.jsxs)("div",{className:"category-card",children:[Object(c.jsx)("div",{className:"category-icon","aria-label":"brake",children:"\ud83d\udd34"}),Object(c.jsx)("div",{className:"category-title",children:"Brake System"}),Object(c.jsx)("div",{className:"category-desc",children:"Pads, rotors, calipers"}),Object(c.jsx)("button",{className:"btn btn-outline",children:"Browse"})]}),Object(c.jsxs)("div",{className:"category-card",children:[Object(c.jsx)("div",{className:"category-icon","aria-label":"cooling",children:"\ud83c\udf00"}),Object(c.jsx)("div",{className:"category-title",children:"Cooling System"}),Object(c.jsx)("div",{className:"category-desc",children:"Radiators, thermostats, hoses"}),Object(c.jsx)("button",{className:"btn btn-outline",children:"Browse"})]}),Object(c.jsxs)("div",{className:"category-card",children:[Object(c.jsx)("div",{className:"category-icon","aria-label":"lighting",children:"\ud83d\udca1"}),Object(c.jsx)("div",{className:"category-title",children:"Lighting"}),Object(c.jsx)("div",{className:"category-desc",children:"Headlights, bulbs, assemblies"}),Object(c.jsx)("button",{className:"btn btn-outline",children:"Browse"})]})]})]}),Object(c.jsxs)("section",{className:"featured-products-section",children:[Object(c.jsx)("h2",{className:"section-title",children:"Featured Products"}),Object(c.jsx)("div",{className:"featured-products-grid",children:[{id:1,name:"Premium Oil Filter",image:"/uploads/1752314287701-518960914-oil filter.jpg",price:120,description:"High-quality oil filter for extended engine life."},{id:2,name:"Noiseless Brake Pads",image:"/uploads/1753118524708-592307236-Sp2092-Brake-Pads-Noiseless-Auto-Spare-Parts-Disc-Breakpad.avif",price:350,description:"Noiseless, durable brake pads for safe driving."},{id:3,name:"Air Filter",image:"/uploads/1752319736790-170185065-images.jfif",price:80,description:"Efficient air filter for improved performance."}].map(e=>Object(c.jsxs)("div",{className:"featured-product-card",children:[Object(c.jsx)("img",{src:e.image,alt:e.name,className:"featured-product-image"}),Object(c.jsx)("h3",{children:e.name}),Object(c.jsx)("p",{children:e.description}),Object(c.jsxs)("div",{className:"featured-product-price",children:["$",e.price]}),Object(c.jsx)("button",{className:"add-to-cart-btn",onClick:h,children:"Add to Cart"})]},e.id))})]}),Object(c.jsx)("div",{className:"home",id:"products-section",children:Object(c.jsx)("div",{style:{flex:1},children:Object(c.jsx)(x,{filters:n,searchTrigger:a,onAddToCart:h,onCartCountChange:r})})}),Object(c.jsxs)("section",{className:"benefits-section",children:[Object(c.jsx)("h2",{className:"section-title",children:"Why Choose Us?"}),Object(c.jsxs)("div",{className:"benefits-grid",children:[Object(c.jsxs)("div",{className:"benefit-card",children:[Object(c.jsx)("i",{className:"fas fa-shipping-fast"}),Object(c.jsx)("h3",{children:"Fast Delivery"}),Object(c.jsx)("p",{children:"Get your parts delivered quickly and reliably."})]}),Object(c.jsxs)("div",{className:"benefit-card",children:[Object(c.jsx)("i",{className:"fas fa-shield-alt"}),Object(c.jsx)("h3",{children:"Trusted Sellers"}),Object(c.jsx)("p",{children:"Buy from verified and reputable sellers only."})]}),Object(c.jsxs)("div",{className:"benefit-card",children:[Object(c.jsx)("i",{className:"fas fa-tags"}),Object(c.jsx)("h3",{children:"Best Prices"}),Object(c.jsx)("p",{children:"Competitive prices on all products."})]}),Object(c.jsxs)("div",{className:"benefit-card",children:[Object(c.jsx)("i",{className:"fas fa-headset"}),Object(c.jsx)("h3",{children:"Support"}),Object(c.jsx)("p",{children:"24/7 customer support for all your needs."})]})]})]}),Object(c.jsxs)("section",{className:"cta-section",children:[Object(c.jsx)("h2",{children:"Ready to find your part?"}),Object(c.jsx)("p",{children:"Sign up now and get access to exclusive deals and fast shipping!"}),Object(c.jsxs)("div",{className:"cta-buttons",children:[Object(c.jsx)("a",{href:"#products-section",className:"btn btn-primary",children:"Browse Products"}),Object(c.jsx)("a",{href:"/auth",className:"btn btn-secondary",children:"Register"})]})]}),Object(c.jsx)(d,{}),b&&Object(c.jsx)(f,{show:b,onClose:()=>j(!1)})]})};var v=e=>{let{onSuccess:t,onSwitchToRegister:o}=e;const[r,n]=Object(i.useState)({email:"",password:"",remember:!1}),[s,a]=Object(i.useState)(""),[l,d]=Object(i.useState)(!1),b=e=>{const{name:t,value:o,type:i,checked:s}=e.target;n({...r,[t]:"checkbox"===i?s:o})};return Object(c.jsxs)("div",{style:{width:1050,maxWidth:"95vw",minWidth:800,margin:"0 auto",background:"#fff",borderRadius:24,boxShadow:"0 4px 32px rgba(44,62,80,0.12)",padding:"3.5rem 2.5rem 2.5rem 2.5rem",fontFamily:"Poppins, Arial, sans-serif",position:"relative",minHeight:600,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(c.jsx)("h2",{style:{textAlign:"left",marginBottom:"2.5rem",color:"#222",fontWeight:700,fontSize:"2.6rem",letterSpacing:.5,alignSelf:"flex-start",marginLeft:0,marginTop:10},children:"Login to Your Account"}),Object(c.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0),a("");try{var o;const e=await j.a.post("/api/auth/login",{email:r.email,password:r.password}),i=(null===(o=e.data.user)||void 0===o?void 0:o.role)||e.data.role,n=window.location.pathname;if("admin"===i&&"/admin"!==n)return a("Admins can only log in at /admin"),void d(!1);if("subadmin"===i&&"/subadmin"!==n)return a("Subadmins can only log in at /subadmin"),void d(!1);a("Login successful!"),localStorage.setItem("token",e.data.token),localStorage.setItem("userEmail",r.email),window.location.href="/",t&&t()}catch(c){var i,n,s,l;a((null===(i=c.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)||(null===(s=c.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)||c.message||"Login failed.")}finally{d(!1)}},style:{width:"100%",maxWidth:900},children:[Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"2rem",display:"block"},children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",value:r.email,onChange:b,required:!0,style:{width:"100%",padding:"1.5rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.5rem",outline:"none",background:"#fff",marginBottom:48,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"2rem",display:"block"},children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",value:r.password,onChange:b,required:!0,style:{width:"100%",padding:"1.5rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.5rem",outline:"none",background:"#fff",marginBottom:48,marginTop:0,boxSizing:"border-box"}}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:48},children:[Object(c.jsx)("input",{type:"checkbox",id:"remember",name:"remember",checked:r.remember,onChange:b,style:{marginRight:18,width:28,height:28}}),Object(c.jsx)("label",{htmlFor:"remember",style:{fontWeight:700,color:"#444",fontSize:"1.6rem",letterSpacing:.2},children:"Remember me"})]}),Object(c.jsx)("button",{type:"submit",style:{background:"#e74c3c",color:"#fff",border:"none",padding:"1.3rem 0",borderRadius:10,fontWeight:700,fontSize:"2rem",marginTop:0,marginBottom:48,cursor:l?"not-allowed":"pointer",opacity:r.email&&r.password?1:.7,width:180,alignSelf:"flex-start",transition:"background 0.2s",boxShadow:"0 2px 8px #f6f6f7"},disabled:!r.email||!r.password||l,children:"Login"}),s&&Object(c.jsx)("div",{style:{color:"#e74c3c",marginBottom:18,textAlign:"center",fontWeight:600,fontSize:"1.2rem"},children:s}),Object(c.jsx)("div",{style:{textAlign:"center",marginTop:0},children:Object(c.jsx)("a",{href:"#",style:{color:"#2196f3",fontWeight:700,textDecoration:"none",fontSize:"1.35rem",marginBottom:8,display:"inline-block"},children:"Forgot password?"})}),Object(c.jsxs)("div",{style:{marginTop:18,textAlign:"center",color:"#444",fontSize:"1.35rem"},children:["Don't have an account?"," ",Object(c.jsx)("span",{style:{color:"#2196f3",fontWeight:700,cursor:"pointer"},onClick:o,children:"Register"})]})]})]})};const S="/api/auth";var w=e=>{let{onSuccess:t,onSwitchToLogin:o}=e;const[r,n]=Object(i.useState)("buyer"),[s,a]=Object(i.useState)({username:"",email:"",phone:"",password:"",confirmPassword:"",city:"",terms:!1}),[l,d]=Object(i.useState)({shopName:"",licenseCertificate:null,tin:"",location:"",address:"",owner:"",email:"",phone:"",password:"",confirmPassword:"",terms:!1}),[b,h]=Object(i.useState)(""),[u,m]=Object(i.useState)(!1),p=e=>{const{name:t,value:o,type:i,checked:n,files:c}=e.target;"buyer"===r?a({...s,[t]:"checkbox"===i?n:o}):d("licenseCertificate"===t?{...l,licenseCertificate:c[0]}:{...l,[t]:"checkbox"===i?n:o})},g=async e=>{if(e.preventDefault(),m(!0),h(""),"buyer"===r){if(!s.terms)return h("You must agree to the terms."),void m(!1);if(s.password!==s.confirmPassword)return h("Passwords do not match."),void m(!1);try{await j.a.post(`${S}/register`,s),h("Registration successful! You can now log in."),t&&t()}catch(g){var o,i,n,a;h((null===(o=g.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message)||(null===(n=g.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)||g.message||"Registration failed.")}finally{m(!1)}}else{if(!l.terms)return h("You must agree to the terms."),void m(!1);if(l.password!==l.confirmPassword)return h("Passwords do not match."),void m(!1);if(!l.shopName||!l.licenseCertificate||!l.tin||!l.location||!l.address||!l.owner||!l.email||!l.phone)return h("Please fill in all required fields and upload the license certificate."),void m(!1);try{const e=new FormData;Object.entries(l).forEach(t=>{let[o,i]=t;"licenseCertificate"===o&&i?e.append("licenseCertificate",i):e.append(o,i)}),await j.a.post(`${S}/register-shop`,e,{headers:{"Content-Type":"multipart/form-data"}}),h("Shop registration submitted! Your request will be reviewed by the admin."),d({shopName:"",licenseCertificate:null,tin:"",location:"",address:"",owner:"",email:"",phone:"",password:"",confirmPassword:"",terms:!1})}catch(g){var c,b,u,p;h((null===(c=g.response)||void 0===c||null===(b=c.data)||void 0===b?void 0:b.message)||(null===(u=g.response)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.error)||g.message||"Shop registration failed.")}finally{m(!1)}}};return Object(c.jsxs)("div",{style:{width:1050,maxWidth:"95vw",minWidth:800,margin:"0 auto",background:"#fff",borderRadius:24,boxShadow:"0 4px 32px rgba(44,62,80,0.12)",padding:"3.5rem 2.5rem 2.5rem 2.5rem",fontFamily:"Poppins, Arial, sans-serif",position:"relative",minHeight:600,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(c.jsx)("h2",{style:{textAlign:"left",marginBottom:"2.5rem",color:"#222",fontWeight:700,fontSize:"2.2rem",letterSpacing:.5,alignSelf:"flex-start",marginLeft:0,marginTop:10},children:"Create an Account"}),Object(c.jsxs)("div",{style:{display:"flex",gap:24,marginBottom:36},children:[Object(c.jsx)("button",{type:"button",className:"buyer"===r?"btn btn-primary":"btn btn-outline",style:{minWidth:180},onClick:()=>n("buyer"),children:"Register as Buyer"}),Object(c.jsx)("button",{type:"button",className:"shop"===r?"btn btn-primary":"btn btn-outline",style:{minWidth:180},onClick:()=>n("shop"),children:"Register as Shop"})]}),"buyer"===r?Object(c.jsxs)("form",{onSubmit:g,style:{width:"100%",maxWidth:900},children:[Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Full Name"}),Object(c.jsx)("input",{type:"text",name:"username",value:s.username,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",value:s.email,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Phone Number"}),Object(c.jsx)("input",{type:"text",name:"phone",value:s.phone,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",value:s.password,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Confirm Password"}),Object(c.jsx)("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"City"}),Object(c.jsxs)("select",{name:"city",value:s.city,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"},children:[Object(c.jsx)("option",{value:"",children:"Select City"}),Object(c.jsx)("option",{value:"Addis Ababa",children:"Addis Ababa"}),Object(c.jsx)("option",{value:"Hawassa",children:"Hawassa"}),Object(c.jsx)("option",{value:"DireDawa",children:"DireDawa"}),Object(c.jsx)("option",{value:"Adamma",children:"Adama"}),Object(c.jsx)("option",{value:"Mekelle",children:"Mekelle"}),Object(c.jsx)("option",{value:"Other",children:"Other"})]}),Object(c.jsxs)("div",{style:{marginBottom:32,display:"flex",alignItems:"center"},children:[Object(c.jsx)("input",{type:"checkbox",id:"terms",name:"terms",checked:s.terms,onChange:p,required:!0,style:{marginRight:12,width:22,height:22}}),Object(c.jsx)("label",{htmlFor:"terms",style:{fontWeight:700,color:"#222",fontSize:"1.15rem",verticalAlign:"middle"},children:"I agree to the Terms of Service and Privacy Policy"})]}),Object(c.jsx)("button",{type:"submit",style:{background:"#e74c3c",color:"#fff",border:"none",padding:"1.1rem 0",borderRadius:8,fontWeight:700,fontSize:"1.25rem",marginTop:0,marginBottom:32,cursor:u?"not-allowed":"pointer",opacity:s.username&&s.email&&s.phone&&s.password&&s.confirmPassword&&s.city&&s.terms?1:.7,width:120,alignSelf:"flex-start",transition:"background 0.2s"},disabled:!(s.username&&s.email&&s.phone&&s.password&&s.confirmPassword&&s.city&&s.terms)||u,children:"Register"}),b&&Object(c.jsx)("div",{style:{color:"#e74c3c",marginBottom:18,textAlign:"center",fontWeight:600,fontSize:"1.1rem"},children:b}),Object(c.jsxs)("div",{style:{marginTop:18,textAlign:"center",color:"#444",fontSize:"1.15rem"},children:["Already have an account?"," ",Object(c.jsx)("span",{style:{color:"#2196f3",fontWeight:700,cursor:"pointer"},onClick:o,children:"Login"})]})]}):Object(c.jsxs)("form",{onSubmit:g,style:{width:"100%",maxWidth:900},encType:"multipart/form-data",children:[Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Shop Name"}),Object(c.jsx)("input",{type:"text",name:"shopName",value:l.shopName,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"License Certificate (PDF or Image)"}),Object(c.jsx)("input",{type:"file",name:"licenseCertificate",accept:".pdf,image/*",onChange:p,required:!0,style:{width:"100%",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"TIN Number"}),Object(c.jsx)("input",{type:"text",name:"tin",value:l.tin,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Location"}),Object(c.jsx)("input",{type:"text",name:"location",value:l.location,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Address"}),Object(c.jsx)("input",{type:"text",name:"address",value:l.address,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Owner Name"}),Object(c.jsx)("input",{type:"text",name:"owner",value:l.owner,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",value:l.email,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Phone Number"}),Object(c.jsx)("input",{type:"text",name:"phone",value:l.phone,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",value:l.password,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:12,fontSize:"1.25rem",display:"block"},children:"Confirm Password"}),Object(c.jsx)("input",{type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:p,required:!0,style:{width:"100%",padding:"1.2rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1.15rem",outline:"none",background:"#fff",marginBottom:32,marginTop:0,boxSizing:"border-box"}}),Object(c.jsxs)("div",{style:{marginBottom:32,display:"flex",alignItems:"center"},children:[Object(c.jsx)("input",{type:"checkbox",id:"shop-terms",name:"terms",checked:l.terms,onChange:p,required:!0,style:{marginRight:12,width:22,height:22}}),Object(c.jsx)("label",{htmlFor:"shop-terms",style:{fontWeight:700,color:"#222",fontSize:"1.15rem",verticalAlign:"middle"},children:"I agree to the Terms of Service and Privacy Policy"})]}),Object(c.jsx)("button",{type:"submit",style:{background:"#e74c3c",color:"#fff",border:"none",padding:"1.1rem 0",borderRadius:8,fontWeight:700,fontSize:"1.25rem",marginTop:0,marginBottom:32,cursor:u?"not-allowed":"pointer",opacity:l.shopName&&l.licenseCertificate&&l.tin&&l.location&&l.address&&l.owner&&l.email&&l.phone&&l.password&&l.confirmPassword&&l.terms?1:.7,width:120,alignSelf:"flex-start",transition:"background 0.2s"},disabled:!(l.shopName&&l.licenseCertificate&&l.tin&&l.location&&l.address&&l.owner&&l.email&&l.phone&&l.password&&l.confirmPassword&&l.terms)||u,children:"Register"}),b&&Object(c.jsx)("div",{style:{color:"#e74c3c",marginBottom:18,textAlign:"center",fontWeight:600,fontSize:"1.1rem"},children:b}),Object(c.jsxs)("div",{style:{marginTop:18,textAlign:"center",color:"#444",fontSize:"1.15rem"},children:["Already have an account?"," ",Object(c.jsx)("span",{style:{color:"#2196f3",fontWeight:700,cursor:"pointer"},onClick:o,children:"Login"})]})]})]})};const k="/api/orders";var C=()=>{const e=JSON.parse(localStorage.getItem("cart"))||[],t=e.reduce((e,t)=>e+t.price*(t.quantity||1),0),[o,r]=Object(i.useState)("");return 0===e.length?Object(c.jsx)("div",{style:{padding:"2rem"},children:Object(c.jsx)("h2",{children:"Your cart is empty."})}):Object(c.jsxs)("div",{style:{maxWidth:600,margin:"2rem auto",background:"#fff",borderRadius:8,boxShadow:"0 2px 8px #eee",padding:24},children:[Object(c.jsx)("h2",{children:"Your Cart"}),Object(c.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.map(e=>Object(c.jsx)("li",{style:{marginBottom:16,borderBottom:"1px solid #eee",paddingBottom:8},children:Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[e.image&&Object(c.jsx)("img",{src:e.image,alt:e.name,style:{width:60,height:60,objectFit:"cover",borderRadius:4,marginRight:16}}),Object(c.jsxs)("div",{style:{flex:1},children:[Object(c.jsx)("strong",{children:e.name}),Object(c.jsx)("br",{}),Object(c.jsxs)("span",{children:["Price: $",e.price," x ",e.quantity||1]}),Object(c.jsx)("br",{}),Object(c.jsxs)("span",{children:["Total: $",(e.price*(e.quantity||1)).toFixed(2)]})]})]})},e._id))}),Object(c.jsxs)("div",{style:{marginTop:24,fontWeight:"bold",fontSize:18},children:["Cart Total: $",t.toFixed(2)]}),Object(c.jsxs)("div",{style:{marginTop:24},children:[Object(c.jsx)("h3",{children:"Payment Options"}),Object(c.jsx)("button",{style:{padding:"0.5rem 2rem",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,fontSize:16,cursor:"pointer"},onClick:async()=>{console.log("DEBUG: Pay Now button clicked"),alert("DEBUG: Pay Now button clicked");try{const e=localStorage.getItem("token");console.log("DEBUG: Calling placeOrder with token",e);await(async()=>(await j.a.post(`${k}/place-order`)).data)();r("Order placed successfully!"),localStorage.removeItem("cart")}catch(n){var e,t,o,i;r("Order failed: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||n.message)),console.log("DEBUG: Order failed",n),alert("DEBUG: Order failed: "+((null===(o=n.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.error)||n.message))}},children:"Pay Now (Demo)"}),o&&Object(c.jsx)("div",{style:{marginTop:16,color:o.startsWith("Order placed")?"green":"red"},children:o})]})]})};var N=()=>Object(c.jsxs)("div",{style:{maxWidth:700,margin:"2rem auto",background:"#fff",borderRadius:8,boxShadow:"0 2px 8px #eee",padding:24},children:[Object(c.jsx)("h2",{children:"About Us"}),Object(c.jsx)("p",{children:"We are dedicated to providing a wide range of quality automotive spare parts for all your vehicle needs. Our mission is to make it easy for you to find and purchase the right parts, with fast delivery and excellent customer service."})]});var z=()=>Object(c.jsxs)("div",{style:{maxWidth:700,margin:"2rem auto",background:"#fff",borderRadius:8,boxShadow:"0 2px 8px #eee",padding:24},children:[Object(c.jsx)("h2",{children:"Contact Us"}),Object(c.jsxs)("p",{children:["For inquiries, support, or feedback, please email us at ",Object(c.jsx)("a",{href:"ermias@.com",children:"er@spareparts.com"})," or call (123) 456-7890."]})]});const B=["Toyota","Honda","Ford","BMW","Mercedes"],W={Toyota:["Corolla","Camry","RAV4"],Honda:["Civic","Accord","CR-V"],Ford:["Focus","Fusion","Escape"],BMW:["3 Series","5 Series","X5"],Mercedes:["C-Class","E-Class","GLA"]},R=Array.from({length:25},(e,t)=>2025-t),I=["Engine Parts","Brake System","Cooling System","Lighting","Others"];var P=e=>{let{onProductAdded:t,user:o}=e;const[n,s]=Object(i.useState)({name:"",description:"",price:"",category:"",stock:"",make:"",model:"",year:""}),[a,l]=Object(i.useState)(null),[d,b]=Object(i.useState)(""),[h,u]=Object(i.useState)(""),[m,p]=Object(i.useState)(""),[g,x]=Object(i.useState)(!1),[f,O]=Object(i.useState)("user"===(null===o||void 0===o?void 0:o.role)?3:1/0);r.a.useEffect(()=>{if("user"!==(null===o||void 0===o?void 0:o.role))return void O(1/0);(async()=>{const e=localStorage.getItem("token");if(e)try{const t=await j.a.get("http://localhost:5000/api/auth/me",{headers:{Authorization:`Bearer ${e}`}});O(3-(t.data.postCount||0))}catch{O(3)}else O(3)})()},[o]);const y=e=>s({...n,[e.target.name]:e.target.value}),v=async()=>{const e=localStorage.getItem("token");if(e)try{const o=new FormData;Object.entries(n).forEach(e=>{let[t,i]=e;return o.append(t,i)}),a&&o.append("image",a),o.append("paid","true"),o.append("paymentMethod",m),o.append("paymentCode",h),await j.a.post("http://localhost:5000/api/products",o,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}}),b("Product added!"),s({name:"",description:"",price:"",category:"",stock:"",make:"",model:"",year:""}),l(null),u(""),O(f),t&&t()}catch(r){var o,i;b((null===(o=r.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.error)||"Error adding product")}else b("You must be logged in to add products.")},S=async e=>{e.preventDefault();const i=(()=>{if(null!==o&&void 0!==o&&o.token)return o.token;const e=localStorage.getItem("user");if(e)try{const t=JSON.parse(e);if(t.token)return t.token}catch{}return localStorage.getItem("token")})();if(i)try{const e=new FormData;Object.entries(n).forEach(t=>{let[o,i]=t;return e.append(o,i)}),a&&e.append("image",a);await j.a.post("http://localhost:5000/api/products",e,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"multipart/form-data"}});b("Product added!"),s({name:"",description:"",price:"",category:"",stock:"",make:"",model:"",year:""}),l(null),(async()=>{if("user"!==(null===o||void 0===o?void 0:o.role))return;const e=localStorage.getItem("token");if(e)try{const t=await j.a.get("http://localhost:5000/api/auth/me",{headers:{Authorization:`Bearer ${e}`}});O(3-(t.data.postCount||0))}catch{}})(),t&&t()}catch(u){var r,c,d,h;if("Invalid token."===(null===(r=u.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message))b("Session expired or invalid. Please log in again.");else b((null===(d=u.response)||void 0===d||null===(h=d.data)||void 0===h?void 0:h.error)||"Error adding product")}else b("You must be logged in to add products. Please log in again.")};return Object(c.jsxs)("div",{style:{width:"100%",maxWidth:500,minWidth:280,margin:"0 auto",background:"#fff",borderRadius:16,boxShadow:"0 4px 24px rgba(44,62,80,0.10)",padding:"2rem 1.2rem 1.2rem 1.2rem",fontFamily:"Poppins, Arial, sans-serif",position:"relative",minHeight:400,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",maxHeight:"70vh",overflowY:"auto"},children:[Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:400,marginBottom:18},children:[Object(c.jsx)("h2",{style:{textAlign:"left",color:"#222",fontWeight:700,fontSize:"1.5rem",letterSpacing:.5,margin:0},children:"Add New Product"}),"user"===(null===o||void 0===o?void 0:o.role)&&Object(c.jsxs)("div",{style:{fontWeight:600,color:"#3a6cf6",fontSize:16},children:["Free posts left: ",f>0?f:0," / 3"]})]}),"user"===(null===o||void 0===o?void 0:o.role)&&f<=0&&Object(c.jsx)("div",{style:{color:"#e74c3c",marginBottom:18,fontWeight:600,fontSize:16},children:"You have used all free posts. Please pay to post more items."}),Object(c.jsxs)("form",{onSubmit:e=>{if("user"===(null===o||void 0===o?void 0:o.role)&&f<=0)return e.preventDefault(),b("You have used all free posts. Please pay to post more items."),void x(!0);S(e)},encType:"multipart/form-data",style:{width:"100%",maxWidth:400},children:[Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Name"}),Object(c.jsx)("input",{name:"name",placeholder:"Name",value:n.name,onChange:y,required:!0,style:{width:"100%",padding:"1rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1rem",outline:"none",background:"#fff",marginBottom:24,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Description"}),Object(c.jsx)("input",{name:"description",placeholder:"Description",value:n.description,onChange:y,style:{width:"100%",padding:"1rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1rem",outline:"none",background:"#fff",marginBottom:24,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Price"}),Object(c.jsx)("input",{name:"price",type:"number",placeholder:"Price",value:n.price,onChange:y,required:!0,style:{width:"100%",padding:"1rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1rem",outline:"none",background:"#fff",marginBottom:24,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Category"}),Object(c.jsxs)("select",{name:"category",value:n.category,onChange:y,required:!0,style:{width:"100%",padding:"1rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1rem",outline:"none",background:"#fff",marginBottom:24,marginTop:0,boxSizing:"border-box"},children:[Object(c.jsx)("option",{value:"",children:"Select Category"}),I.map(e=>Object(c.jsx)("option",{value:e,children:e},e))]}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Stock"}),Object(c.jsx)("input",{name:"stock",type:"number",placeholder:"Stock",value:n.stock,onChange:y,style:{width:"100%",padding:"1rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1rem",outline:"none",background:"#fff",marginBottom:24,marginTop:0,boxSizing:"border-box"}}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Make"}),Object(c.jsxs)("select",{name:"make",value:n.make,onChange:e=>{s({...n,make:e.target.value,model:""})},required:!0,style:{width:"100%",padding:"1rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1rem",outline:"none",background:"#fff",marginBottom:24,marginTop:0,boxSizing:"border-box"},children:[Object(c.jsx)("option",{value:"",children:"Select Make"}),B.map(e=>Object(c.jsx)("option",{value:e,children:e},e))]}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Model"}),Object(c.jsxs)("select",{name:"model",value:n.model,onChange:y,required:!0,disabled:!n.make,style:{width:"100%",padding:"1rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1rem",outline:"none",background:"#fff",marginBottom:24,marginTop:0,boxSizing:"border-box"},children:[Object(c.jsx)("option",{value:"",children:"Select Model"}),n.make&&W[n.make].map(e=>Object(c.jsx)("option",{value:e,children:e},e))]}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Year"}),Object(c.jsxs)("select",{name:"year",value:n.year,onChange:y,required:!0,style:{width:"100%",padding:"1rem",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:"1rem",outline:"none",background:"#fff",marginBottom:24,marginTop:0,boxSizing:"border-box"},children:[Object(c.jsx)("option",{value:"",children:"Select Year"}),R.map(e=>Object(c.jsx)("option",{value:e,children:e},e))]}),Object(c.jsx)("label",{style:{fontWeight:700,color:"#333",marginBottom:10,fontSize:"1rem",display:"block"},children:"Image"}),Object(c.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{l(e.target.files[0])},style:{marginBottom:24}}),Object(c.jsx)("button",{type:"submit",style:{background:"#e74c3c",color:"#fff",border:"none",borderRadius:8,fontWeight:700,fontSize:"1.1rem",marginTop:0,marginBottom:24,cursor:"pointer",width:180,alignSelf:"flex-start",transition:"background 0.2s"},children:"Add Product"}),d&&Object(c.jsx)("div",{style:{color:"#e74c3c",marginBottom:18,textAlign:"center",fontWeight:600,fontSize:"1rem"},children:d})]}),g&&Object(c.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(44,62,80,0.18)",zIndex:2200,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(c.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:12,minWidth:340,maxWidth:400,boxShadow:"0 2px 12px #23294655",color:"#232946",display:"flex",flexDirection:"column",gap:12},children:[Object(c.jsx)("h3",{style:{marginBottom:8},children:"Payment Required"}),Object(c.jsx)("div",{style:{marginBottom:8},children:"You have used all free posts. Please pay 10 birr via Telebirr or CBE to post more items."}),Object(c.jsxs)("select",{value:m,onChange:e=>p(e.target.value),style:{marginBottom:8,padding:8,borderRadius:8,border:"1px solid #ccc"},children:[Object(c.jsx)("option",{value:"",children:"Select Payment Method"}),Object(c.jsx)("option",{value:"Telebirr",children:"Telebirr"}),Object(c.jsx)("option",{value:"CBE",children:"CBE"})]}),Object(c.jsx)("input",{type:"text",value:h,onChange:e=>u(e.target.value),placeholder:"Enter payment confirmation code",style:{marginBottom:8,padding:8,borderRadius:8,border:"1px solid #ccc"}}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:async()=>{h.trim()?(x(!1),await v()):b("Please enter your payment confirmation code.")},style:{padding:"8px 16px",borderRadius:8},children:"Submit Payment & Post"}),Object(c.jsx)("button",{className:"btn btn-outline",onClick:()=>x(!1),style:{marginTop:8},children:"Cancel"})]})})]})};function A(e){let{children:t,onClose:o}=e;const n=Object(i.useRef)(null),[s,a]=Object(i.useState)(!1),[l,d]=Object(i.useState)(0),[b,j]=Object(i.useState)(0),h=e=>{if(!s)return;const t=e.clientY-l;n.current.scrollTop=b+2*t},u=()=>{a(!1),document.body.style.userSelect=""};return r.a.useEffect(()=>(s?(window.addEventListener("mousemove",h),window.addEventListener("mouseup",u)):(window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",u)),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",u)}),[s]),Object(c.jsxs)("div",{style:{background:"#fff",padding:"2.5rem 2rem 2rem",borderRadius:12,minWidth:370,maxWidth:"95vw",position:"fixed",boxShadow:"0 8px 32px rgba(44,62,80,0.18)",animation:"modalSlideIn .35s cubic-bezier(.4,2,.6,1)",left:"50%",top:"15%",transform:"translate(-50%, 0)",zIndex:2100},children:[Object(c.jsx)("div",{className:"modal-vertical-bar",style:{position:"absolute",top:18,right:0,width:8,height:"calc(100% - 36px)",background:"linear-gradient(180deg, #e74c3c 0%, #2980ef 100%)",borderRadius:4,cursor:"ns-resize",zIndex:2200},title:"Slide bar",onMouseDown:e=>{a(!0),d(e.clientY),j(n.current.scrollTop),document.body.style.userSelect="none"}}),Object(c.jsx)("button",{onClick:o,style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700},children:"\xd7"}),Object(c.jsx)("div",{ref:n,style:{maxHeight:"60vh",overflowY:"auto",paddingRight:12},children:t})]})}var E=()=>{const[e,t]=Object(i.useState)(!0);return e?Object(c.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:[Object(c.jsxs)(A,{onClose:()=>{t(!1),window.location.href="/"},children:[Object(c.jsx)("h2",{style:{fontWeight:700,fontSize:"1.5rem",marginBottom:24,color:"#222",textAlign:"center"},children:"Add New Product"}),Object(c.jsx)("div",{style:{margin:"0 auto",maxWidth:370},children:Object(c.jsx)(P,{})})]}),Object(c.jsx)("style",{children:"\n        @keyframes modalSlideIn {\n          from { transform: translateY(100vh); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n      "})]}):null},T=o(8),L=o(3),D=(o(219),o(4));L.d.register(L.c,L.f,L.b,L.g,L.h,L.e,L.a);const $=`http://${window.location.hostname}:5000/api`;var M=()=>{var e,t,o;const[r,n]=Object(i.useState)([]),[s,a]=Object(i.useState)([]),[l,d]=Object(i.useState)(null),[b,h]=Object(i.useState)({name:"",price:"",category:"",image:"",description:""}),[u,m]=Object(i.useState)({username:"",email:"",password:"",role:"subadmin"}),[p,g]=Object(i.useState)(""),[x,f]=Object(i.useState)(!1),[O,y]=Object(i.useState)({username:"",password:""}),[v,S]=Object(i.useState)(""),[w,k]=Object(i.useState)(""),[C,N]=Object(i.useState)(""),[z,B]=Object(i.useState)(""),[W,R]=Object(i.useState)(!1),[I,P]=Object(i.useState)(null),[A,E]=Object(i.useState)({username:"",email:"",role:"subadmin",password:""}),[L,M]=Object(i.useState)(null),[q,F]=Object(i.useState)(!1),[_,U]=Object(i.useState)({current:"",new:"",confirm:""}),[H,Y]=Object(i.useState)(""),[J,V]=Object(i.useState)({productCount:0,userCount:0,totalSales:0,totalRevenue:0}),[Z,G]=Object(i.useState)([]),[Q,X]=Object(i.useState)([]),[K,ee]=Object(i.useState)(!1),[te,oe]=Object(i.useState)(!1),[ie,re]=Object(i.useState)(""),[ne,se]=Object(i.useState)(!1),[ae,le]=Object(i.useState)(!1),[ce,de]=Object(i.useState)(null);Object(i.useEffect)(()=>{if(!ae)return;const e=()=>le(!1);return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[ae]),Object(i.useEffect)(()=>{if(ne)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e);function e(e){const t=document.getElementById("admin-header-avatar"),o=document.getElementById("admin-header-avatar-dropdown");t&&o&&!t.contains(e.target)&&!o.contains(e.target)&&se(!1)}},[ne]);const[be,je]=Object(i.useState)(1),[he,ue]=Object(i.useState)(12),[me,pe]=Object(i.useState)([{id:1,msg:"Order #1001: ETB 2,500"},{id:2,msg:"Order #1002: ETB 1,200"},{id:3,msg:"Order #1003: ETB 3,800"}]),[ge,xe]=Object(i.useState)(0);Object(i.useEffect)(()=>{const e=setInterval(()=>{ue(e=>e+(Math.random()>.5?1:-1)),xe(e=>(e+1)%me.length)},2500);return()=>clearInterval(e)},[me.length]);const fe=r.reduce((e,t)=>{const o=t.category||"Uncategorized";return e[o]=(e[o]||0)+(Number(t.sales)||0),e},{}),Oe=Object.keys(fe),ye=Object.values(fe),ve=[{user:"admin",role:"admin",time:"2025-07-14 09:12"},{user:"subadmin1",role:"subadmin",time:"2025-07-14 08:55"},{user:"user123",role:"user",time:"2025-07-14 08:40"}],Se=[{label:"API",status:"online"},{label:"DB",status:"online"},{label:"Worker",status:"idle"},{label:"Cache",status:"online"}],[we,ke]=Object(i.useState)(null);Object(i.useEffect)(()=>{x&&(Ce(),Ne(),ze(),Be(),Me(),Ge())},[x]),Object(i.useEffect)(()=>{const e=localStorage.getItem("token");e&&(k(e),f(!0))},[]);const Ce=async()=>{try{const e=await j.a.get(`${$}/products`,w?{headers:{Authorization:`Bearer ${w}`}}:{});n(e.data)}catch(e){g("Failed to fetch products")}},Ne=async()=>{try{const e=await j.a.get(`${$}/auth/users`,{headers:{Authorization:`Bearer ${w}`}});a(e.data)}catch(e){g("Failed to fetch users")}},ze=async()=>{try{const e=await j.a.get(`${$}/admin/analytics`,{headers:{Authorization:`Bearer ${w}`}});V(e.data)}catch(e){g("Failed to fetch analytics")}},Be=async()=>{try{const e=await j.a.get(`${$}/admin/activity-log`,{headers:{Authorization:`Bearer ${w}`}});G(e.data.map(e=>({...e,time:e.timestamp?new Date(e.timestamp).toLocaleString():"",action:e.action||""})))}catch(e){g("Failed to fetch activity log")}},[We,Re]=Object(i.useState)([]),[Ie,Pe]=Object(i.useState)(!1),[Ae,Ee]=Object(i.useState)(""),[Te,Le]=Object(i.useState)(""),[De,$e]=Object(i.useState)(null),Me=async()=>{Pe(!0),Ee("");try{if(!w)return alert("Admin token missing. Please log in again."),void window.location.reload();try{JSON.parse(atob(w.split(".")[1]))}catch(e){}const t=await j.a.get(`${$}/admin/shop-requests`,{headers:{Authorization:`Bearer ${w}`}});Re(t.data)}catch(t){Ee("Failed to load shop requests."),t.response}Pe(!1)},qe=async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Le("");try{const i=await j.a.patch(`${$}/admin/shop-requests/${e}`,{action:t,...o},{headers:{Authorization:`Bearer ${w}`}});Le(i.data.message||"Action successful."),Me(),"approve"===t&&Ne()}catch(n){var i,r;Le("Error: "+((null===(i=n.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message)||n.message))}},[Fe,_e]=Object(i.useState)([]),[Ue,He]=Object(i.useState)(!1),[Ye,Je]=Object(i.useState)(""),[Ve,Ze]=Object(i.useState)(null),Ge=async()=>{He(!0),Je("");try{const e=await j.a.get(`${$}/orders`,{headers:{Authorization:`Bearer ${w}`}});_e(e.data)}catch(e){Je("Failed to fetch orders")}He(!1)};Object(i.useEffect)(()=>{x&&(Ce(),Ne(),ze(),Be(),Me(),Ge())},[x]);const Qe=r.filter(e=>Number(e.stock)>0&&Number(e.stock)<=5),Xe={totalOrders:J.totalSales||0,totalRevenue:J.totalRevenue||0,topProduct:(null===(e=r[0])||void 0===e?void 0:e.name)||"N/A",productCount:J.productCount||0,userCount:J.userCount||0},Ke=e=>{const{name:t,value:o}=e.target;y(e=>({...e,[t]:o}))},et=e=>{const{name:t,value:o}=e.target;h(e=>({...e,[t]:o}))},tt=e=>{const{name:t,value:o}=e.target;m(e=>({...e,[t]:o}))},ot=J.ordersByMonth||Array(12).fill(0),it=J.revenueByMonth||Array(12).fill(0),rt=s.reduce((e,t)=>(e[t.role]=(e[t.role]||0)+1,e),{}),nt=J.topProducts||[],st={labels:Array.from({length:12},(e,t)=>{const o=new Date;return o.setMonth(o.getMonth()-(11-t)),o.toLocaleString("default",{month:"short",year:"2-digit"})}),datasets:[{label:"Orders",data:ot,backgroundColor:"#3a6cf6"}]},at={labels:st.labels,datasets:[{label:"Revenue (ETB)",data:it,backgroundColor:"#27ae60"}]},lt={labels:Object.keys(rt),datasets:[{data:Object.values(rt),backgroundColor:["#3a6cf6","#27ae60","#f7c948","#e74c3c","#888"]}]},ct={labels:nt.map(e=>e.name),datasets:[{label:"Quantity Sold",data:nt.map(e=>e.qty),backgroundColor:"#f7c948"}]},dt=r.reduce((e,t)=>(0===Number(t.stock)?e.outOfStock++:Number(t.stock)<=5?e.lowStock++:e.inStock++,e),{inStock:0,lowStock:0,outOfStock:0}),bt=(dt.inStock,dt.lowStock,dt.outOfStock,J.newUsersByMonth||Array(12).fill(0),Array.from({length:12},(e,t)=>{const o=new Date;return o.setMonth(o.getMonth()-(11-t)),o.toLocaleString("default",{month:"short",year:"2-digit"})}),r.reduce((e,t)=>{const o=t.category||"Uncategorized";return e[o]=(e[o]||0)+(Number(t.revenue)||0),e},{})),[jt,ht]=(Object.keys(bt),Object.values(bt),Object(i.useState)("dashboard")),ut=[{key:"dashboard",label:"Dashboard",icon:Object(c.jsx)(D.f,{})},{key:"products",label:"Products",icon:Object(c.jsx)(D.b,{})},{key:"orders",label:"Orders",icon:Object(c.jsx)(D.i,{})},{key:"users",label:"Users",icon:Object(c.jsx)(D.j,{})},{key:"analytics",label:"Analytics",icon:Object(c.jsx)(D.c,{})},{key:"reports",label:"Reports",icon:Object(c.jsx)(D.e,{})},{key:"activity",label:"Activity Log",icon:Object(c.jsx)(D.i,{})},{key:"notifications",label:"Notifications",icon:Object(c.jsx)(D.g,{})},{key:"shopRequests",label:"Shop Requests",icon:Object(c.jsx)(D.h,{})},{key:"support",label:"Support",icon:Object(c.jsx)(D.h,{})},{key:"settings",label:"Settings",icon:Object(c.jsx)(D.d,{})}],[mt,pt]=Object(i.useState)("admin"),gt=async e=>{e.preventDefault();try{let e=`${$}/auth/login`;"seller"===mt&&(e=`${$}/auth/subadmin/login`);const t=await j.a.post(e,{email:O.username,password:O.password});k(t.data.token),localStorage.setItem("token",t.data.token);let o={};try{o=JSON.parse(atob(t.data.token.split(".")[1]))}catch{}if("admin"!==o.role)return f(!1),k(""),localStorage.removeItem("token"),S("Access denied: Only admin can access this dashboard."),void setTimeout(()=>window.location.reload(),1200);f(!0),S("")}catch(i){var t,o;S("Login failed: "+((null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||i.message))}};if(!x)return Object(c.jsx)("div",{className:"admin-login-wrapper",children:Object(c.jsxs)("form",{className:"admin-login-form",onSubmit:gt,children:[Object(c.jsx)("h2",{children:"Admin Login"}),Object(c.jsx)("input",{name:"username",value:O.username,onChange:Ke,placeholder:"Username or Email",required:!0}),Object(c.jsx)("input",{name:"password",type:"password",value:O.password,onChange:Ke,placeholder:"Password",required:!0}),Object(c.jsxs)("select",{name:"role",value:mt,onChange:e=>pt(e.target.value),style:{marginBottom:12},children:[Object(c.jsx)("option",{value:"admin",children:"Admin"}),Object(c.jsx)("option",{value:"subadmin",children:"Subadmin"}),Object(c.jsx)("option",{value:"seller",children:"Seller"})]}),Object(c.jsx)("button",{type:"submit",children:"Login"}),v&&Object(c.jsx)("div",{className:"login-error",children:v})]})});const xt=()=>{se(e=>!e),ce||(async()=>{if(w)try{const e=await j.a.get(`${$}/auth/me`,{headers:{Authorization:`Bearer ${w}`}});de(e.data)}catch(e){!e.response||401!==e.response.status&&400!==e.response.status||(f(!1),k(""),localStorage.removeItem("token"),window.location.reload())}})()},ft=e=>{const{name:t,value:o}=e.target;E(e=>({...e,[t]:o}))},Ot=e=>{e.preventDefault&&e.preventDefault(),P(null)},yt=()=>{P(null)},vt=r.filter(e=>e.name.toLowerCase().includes(C.toLowerCase())).slice(10*(be-1),10*be),St=Math.max(1,Math.ceil(r.filter(e=>e.name.toLowerCase().includes(C.toLowerCase())).length/10)),wt=s.filter(e=>e.username.toLowerCase().includes(z.toLowerCase()));return Object(c.jsxs)("div",{className:"admin-dashboard",children:[Object(c.jsxs)("div",{className:"admin-dashboard-header",children:[Object(c.jsxs)("div",{className:"header-left",children:[Object(c.jsx)("span",{className:"dashboard-logo",children:"Admin"}),Object(c.jsx)("span",{className:"future-title",children:"E-Commerce Management"})]}),Object(c.jsxs)("div",{className:"header-actions",style:{display:"flex",alignItems:"center",gap:18},children:[Object(c.jsx)("span",{style:{color:"#e0e6ff",fontSize:15,marginRight:10},children:(new Date).toLocaleString()}),Object(c.jsx)("button",{onClick:()=>R(e=>!e),style:{background:"none",border:"none",color:"#fff",fontSize:18,cursor:"pointer"},title:"Toggle Dark Mode",children:W?"\ud83c\udf19":"\u2600\ufe0f"}),Object(c.jsxs)("span",{className:"notification-bell",title:"Notifications",onClick:()=>{ee(e=>!e),K||(async()=>{oe(!0),re("");try{const e=await j.a.get(`${$}/admin/notifications`,{headers:{Authorization:`Bearer ${w}`}});X(e.data)}catch(e){re("Failed to load notifications")}oe(!1)})()},style:{position:"relative"},children:[Object(c.jsx)(D.g,{}),Q.filter(e=>!e.read).length>0&&Object(c.jsx)("span",{style:{position:"absolute",top:-4,right:-4,background:"#e74c3c",color:"#fff",borderRadius:"50%",fontSize:11,width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700},children:Q.filter(e=>!e.read).length})]}),Object(c.jsxs)("div",{id:"admin-header-avatar",className:"user-avatar",title:"Profile",onClick:e=>{e.stopPropagation(),xt()},style:{position:"relative",cursor:"pointer"},children:[null!==ce&&void 0!==ce&&ce.username?ce.username[0].toUpperCase():"A",ne&&Object(c.jsxs)("div",{id:"admin-header-avatar-dropdown",style:{position:"absolute",right:0,top:50,background:"#263159",color:"#fff",borderRadius:10,boxShadow:"0 2px 12px #23294655",minWidth:180,zIndex:100,padding:16},onClick:e=>e.stopPropagation(),children:[ce?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{style:{fontWeight:700,fontSize:17,marginBottom:4},children:ce.username}),Object(c.jsx)("div",{style:{fontSize:13,color:"#bbb",marginBottom:4},children:ce.email}),Object(c.jsx)("div",{style:{fontSize:13,color:"#bbb",marginBottom:8},children:ce.role})]}):(()=>{const e=function(e){if(!e)return{username:"Admin",email:"",role:"admin"};try{const t=JSON.parse(atob(e.split(".")[1]));return{username:t.username||t.name||"Admin",email:t.email||"",role:t.role||"admin"}}catch{return{username:"Admin",email:"",role:"admin"}}}(w);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{style:{fontWeight:700,fontSize:17,marginBottom:4},children:e.username}),Object(c.jsx)("div",{style:{fontSize:13,color:"#bbb",marginBottom:4},children:e.email}),Object(c.jsx)("div",{style:{fontSize:13,color:"#bbb",marginBottom:8},children:e.role})]})})(),Object(c.jsx)("button",{className:"btn btn-outline",style:{width:"100%"},onClick:()=>{f(!1),k(""),localStorage.removeItem("token"),window.location.reload()},children:"Logout"})]})]})]})]}),Object(c.jsxs)("div",{style:{display:"flex",minHeight:"100vh"},children:[Object(c.jsx)("div",{className:"future-sidebar",style:{width:260,height:"100vh",background:"#232946",display:"flex",flexDirection:"column",boxShadow:"2px 0 12px #23294622",position:"relative"},children:Object(c.jsx)("nav",{style:{flex:1,padding:"2rem 1.5rem 0 1.5rem"},children:ut.map(e=>Object(c.jsxs)("div",{className:jt===e.key?"active":"",style:{marginBottom:18,fontWeight:jt===e.key?600:400,color:jt===e.key?"#3a6cf6":"#e0e6ff",background:jt===e.key?"#263159":"none",borderRadius:6,padding:"8px 16px",cursor:"pointer",transition:"all 0.15s",display:"flex",alignItems:"center",gap:12,position:"relative"},onClick:()=>ht(e.key),title:e.label,onMouseEnter:e=>e.currentTarget.style.background="#3a6cf6",onMouseLeave:t=>t.currentTarget.style.background=jt===e.key?"#263159":"none",children:[Object(c.jsx)("span",{style:{fontSize:20},children:e.icon}),Object(c.jsx)("span",{children:e.label})]},e.key))})}),Object(c.jsxs)("div",{style:{flex:1,padding:"2.5rem 3rem",background:"#f4f7fa",minHeight:"100vh",boxSizing:"border-box",overflowY:"auto"},children:[("analytics"===jt||"dashboard"===jt)&&Object(c.jsxs)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto",boxSizing:"border-box",display:"flex",flexDirection:"column",gap:24},children:[Object(c.jsxs)("div",{className:"future-dashboard-cards",style:{display:"flex",flexWrap:"wrap",gap:24,marginBottom:32,width:"100%"},children:[Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Total Orders"}),Object(c.jsx)("div",{style:{fontWeight:700,fontSize:28,color:"#0984e3"},children:Xe.totalOrders})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Total Revenue"}),Object(c.jsxs)("div",{style:{fontWeight:700,fontSize:28,color:"#27ae60"},children:["ETB ",Xe.totalRevenue.toLocaleString()]})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Products"}),Object(c.jsx)("div",{style:{fontWeight:700,fontSize:28,color:"#f7c948"},children:Xe.productCount})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Users"}),Object(c.jsx)("div",{style:{fontWeight:700,fontSize:28,color:"#888"},children:Xe.userCount})]})]}),Object(c.jsxs)("div",{className:"future-dashboard-row",style:{display:"flex",flexWrap:"wrap",gap:24,marginBottom:32,width:"100%"},children:[Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:2,padding:"1.5rem"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Orders by Month"}),Object(c.jsx)(T.a,{data:st,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180})]}),Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:2,padding:"1.5rem"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Revenue by Month"}),Object(c.jsx)(T.a,{data:at,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180})]}),Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:1,padding:"1.5rem"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Users by Role"}),Object(c.jsx)(T.b,{data:lt,options:{responsive:!0,plugins:{legend:{position:"bottom"}}},height:180})]})]}),Object(c.jsxs)("div",{className:"future-chart-container",style:{padding:"1.5rem",marginBottom:32,width:"100%",boxSizing:"border-box"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Top Selling Products"}),Object(c.jsx)(T.a,{data:ct,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180})]}),Object(c.jsxs)("div",{className:"future-dashboard-row",style:{display:"flex",flexWrap:"wrap",gap:24,marginBottom:32,alignItems:"stretch",width:"100%"},children:[Object(c.jsxs)("div",{className:"future-card future-glow",style:{flex:1,padding:"1.5rem",minWidth:220,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},title:"Real-Time Active Users",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Active Users"}),Object(c.jsx)("div",{style:{fontSize:38,fontWeight:900,color:"#3a6cf6",transition:"all 0.5s"},children:he}),Object(c.jsx)("div",{style:{fontSize:13,color:"#888"},children:"in the last 5 min"})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:2,padding:"1.5rem",minWidth:220,display:"flex",flexDirection:"column",justifyContent:"center"},title:"Live Sales Ticker",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Live Sales"}),Object(c.jsx)("div",{style:{fontSize:18,color:"#27ae60",minHeight:32,transition:"all 0.5s"},children:null===(t=me[ge])||void 0===t?void 0:t.msg})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:3,padding:"1.5rem",minWidth:220},title:"Product/Category Heatmap",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Product/Category Heatmap"}),Object(c.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:Oe.map((e,t)=>{const o=.8+ye[t]/Math.max(...ye||[1])*.2,i=isNaN(o)?1:Math.max(0,Math.min(1,o));return Object(c.jsxs)("div",{style:{background:"#3a6cf6",color:"#fff",borderRadius:8,padding:"8px 16px",marginBottom:6,fontWeight:600,opacity:i},children:[e,": ",ye[t]]},e)})})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:2,padding:"1.5rem",minWidth:220},title:"Recent Logins",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Recent Logins"}),Object(c.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0,fontSize:15},children:ve.map(e=>Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:e.user})," ",Object(c.jsxs)("span",{style:{color:"#888"},children:["(",e.role,")"]})," ",Object(c.jsx)("span",{style:{float:"right",color:"#3a6cf6"},children:e.time})]},e.user))})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",minWidth:220},title:"Live Server Status",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Live Server Status"}),Object(c.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0,fontSize:15},children:Se.map(e=>Object(c.jsxs)("li",{children:[Object(c.jsxs)("b",{children:[e.label,":"]})," ",Object(c.jsx)("span",{style:{color:"online"===e.status?"#27ae60":"#f7c948",fontWeight:700,animation:"online"===e.status?"glowPulse 1.5s infinite alternate":void 0},children:e.status})]},e.label))})]})]})]}),"products"===jt&&Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Manage Products"}),Object(c.jsx)("input",{type:"text",placeholder:"Search products...",value:C,onChange:e=>N(e.target.value),style:{marginBottom:16,width:"100%",padding:"10px",borderRadius:8,border:"1px solid #3a6cf6"}}),Object(c.jsx)("button",{onClick:function(){const e=r.map(e=>[e.name,e.price,e.category,e.image,e.description]);let t=["Name","Price","Category","Image","Description"].join(",")+"\n";t+=e.map(e=>e.map(e=>'"'+String(e).replace(/"/g,'""')+'"').join(",")).join("\n");const o=new Blob([t],{type:"text/csv"}),i=URL.createObjectURL(o),n=document.createElement("a");n.href=i,n.download="products.csv",n.click(),URL.revokeObjectURL(i)},className:"btn btn-outline",style:{marginBottom:16,float:"right"},children:"Export CSV"}),Object(c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{let e=b.image;if(L){const t=new FormData;t.append("image",L);const o=await j.a.post(`${$.replace("/api","")}/upload`,t,{headers:{Authorization:`Bearer ${w}`}});e=o.data.url||o.data.path||o.data.filename||o.data.image}if(l)await j.a.put(`${$}/products/${l._id}`,{...b,image:e},{headers:{Authorization:`Bearer ${w}`}}),g("Product updated!");else{let t=null,o=null;ce&&"seller"===ce.role&&ce.uniqueId&&(t=ce.uniqueId),ce&&"subadmin"===ce.role&&ce.uniqueId&&(o=ce.uniqueId),ce&&"seller"===ce.role&&ce.managerId&&(o=ce.managerId);const i={...b,image:e,uniqueId:"product-"+Date.now()+"-"+Math.floor(1e4*Math.random()),sellerId:t,managerId:o};await j.a.post(`${$}/products`,i,{headers:{Authorization:`Bearer ${w}`}}),g("Product added!")}h({name:"",price:"",category:"",image:"",description:""}),M(null),d(null),Ce()}catch(i){var t,o;g("Error saving product: "+((null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||i.message))}},encType:"multipart/form-data",style:{display:"flex",flexWrap:"wrap",gap:12,marginBottom:18,background:"#232946",borderRadius:12,padding:16},children:[Object(c.jsx)("input",{name:"name",value:b.name,onChange:et,placeholder:"Name",required:!0,style:{flex:1}}),Object(c.jsx)("input",{name:"price",value:b.price,onChange:et,placeholder:"Price",required:!0,style:{flex:1}}),Object(c.jsx)("input",{name:"category",value:b.category,onChange:et,placeholder:"Category",style:{flex:1}}),Object(c.jsx)("input",{name:"image",value:b.image,onChange:et,placeholder:"Image URL or filename",style:{flex:2}}),Object(c.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{M(e.target.files[0])},style:{flex:2}}),Object(c.jsx)("input",{name:"description",value:b.description,onChange:et,placeholder:"Description",style:{flex:2}}),Object(c.jsxs)("button",{type:"submit",style:{flex:1},children:[l?"Update":"Add"," Product"]}),l&&Object(c.jsx)("button",{type:"button",onClick:()=>{d(null),h({name:"",price:"",category:"",image:"",description:""}),M(null)},style:{flex:1,background:"#e74c3c"},children:"Cancel"})]}),Qe.length>0&&Object(c.jsxs)("div",{className:"low-stock-alert",children:[Object(c.jsx)("span",{children:"\u26a0\ufe0f Low Stock Alert: "}),Qe.map(e=>`${e.name} (${e.stock})`).join(", ")]}),Object(c.jsx)("div",{style:{overflowX:"auto"},children:Object(c.jsxs)("table",{className:"future-table",style:{minWidth:1e3},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Name"}),Object(c.jsx)("th",{children:"Price"}),Object(c.jsx)("th",{children:"Category"}),Object(c.jsx)("th",{children:"Image"}),Object(c.jsx)("th",{children:"Description"}),Object(c.jsx)("th",{children:"Shop (Subadmin)"}),Object(c.jsx)("th",{children:"Seller"}),Object(c.jsx)("th",{children:"Actions"})]})}),Object(c.jsx)("tbody",{children:vt.map(e=>Object(c.jsxs)("tr",{style:{background:l&&l._id===e._id?"#353b48":void 0},children:[Object(c.jsx)("td",{children:e.name}),Object(c.jsxs)("td",{children:["$",e.price]}),Object(c.jsx)("td",{children:e.category}),Object(c.jsx)("td",{children:e.image?Object(c.jsx)("img",{src:e.image,alt:"",style:{width:40,height:40,objectFit:"cover",borderRadius:6,boxShadow:"0 1px 4px #2222"}}):""}),Object(c.jsx)("td",{children:e.description}),Object(c.jsx)("td",{children:e.shopId&&e.shopId.shopName?e.shopId.shopName:"-"}),Object(c.jsx)("td",{children:e.owner&&e.owner.username?e.owner.username:"-"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("button",{className:"btn btn-secondary",onClick:()=>(e=>{d(e),h({name:e.name||"",price:e.price||"",category:e.category||"",image:e.image||"",description:e.description||""})})(e),style:{marginRight:6},children:"Edit"}),Object(c.jsx)("button",{className:"btn btn-outline",onClick:()=>(async e=>{if(window.confirm("Delete this product?"))try{await j.a.delete(`${$}/products/${e}`,{headers:{Authorization:`Bearer ${w}`}}),g("Product deleted!"),Ce()}catch(i){var t,o;g("Error deleting product: "+((null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||i.message))}})(e._id),style:{color:"#e74c3c"},children:"Delete"})]})]},e._id))})]})}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:32,gap:12},children:[Object(c.jsx)("button",{onClick:()=>je(e=>Math.max(1,e-1)),disabled:1===be,children:"< Prev"}),Object(c.jsxs)("span",{children:["Page ",be," of ",St]}),Object(c.jsx)("button",{onClick:()=>je(e=>Math.min(St,e+1)),disabled:be===St,children:"Next >"})]})]}),"users"===jt&&Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{style:{color:"#00b894",marginBottom:8},children:"Subadmin - Users"}),Object(c.jsx)("h3",{children:"Manage Users (Create Sellers)"}),Object(c.jsx)("input",{type:"text",placeholder:"Search users...",value:z,onChange:e=>B(e.target.value),style:{marginBottom:16,width:"100%",padding:"10px",borderRadius:8,border:"1px solid #3a6cf6"}}),Object(c.jsx)("button",{onClick:function(){const e=s.map(e=>[e.username,e.email,e.role]);let t=["Username","Email","Role"].join(",")+"\n";t+=e.map(e=>e.map(e=>'"'+String(e).replace(/"/g,'""')+'"').join(",")).join("\n");const o=new Blob([t],{type:"text/csv"}),i=URL.createObjectURL(o),r=document.createElement("a");r.href=i,r.download="users.csv",r.click(),URL.revokeObjectURL(i)},className:"btn btn-outline",style:{marginBottom:16,float:"right"},children:"Export CSV"}),Object(c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{let e={...u};if("subadmin"===u.role)e.uniqueId="subadmin-"+Date.now()+"-"+Math.floor(1e4*Math.random()),await j.a.post(`${$}/auth/register`,e,{headers:{Authorization:`Bearer ${w}`}}),g("Sub-admin created!");else if("seller"===u.role){if(!ce||"subadmin"!==ce.role&&"admin"!==ce.role)return void g("Only subadmin (shop manager) or admin can create sellers.");e.uniqueId="seller-"+Date.now()+"-"+Math.floor(1e4*Math.random()),ce&&"subadmin"===ce.role&&ce.uniqueId&&(e.managerId=ce.uniqueId),delete e.owner,await j.a.post(`${$}/auth/subadmin/sellers`,e,{headers:{Authorization:`Bearer ${w}`}}),g("Seller created!")}else await j.a.post(`${$}/auth/register`,u,{headers:{Authorization:`Bearer ${w}`}}),g("User created!");m({username:"",email:"",password:"",role:"subadmin"}),Ne()}catch(i){var t,o;g("Error creating user: "+((null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||i.message))}},style:{display:"flex",flexWrap:"wrap",gap:12,marginBottom:18,background:"#232946",borderRadius:12,padding:16},children:[Object(c.jsx)("input",{name:"username",value:u.username,onChange:tt,placeholder:"Username",required:!0,style:{flex:1}}),Object(c.jsx)("input",{name:"email",value:u.email,onChange:tt,placeholder:"Email",required:!0,style:{flex:1}}),Object(c.jsx)("input",{name:"password",type:"password",value:u.password,onChange:tt,placeholder:"Password",required:!0,style:{flex:1}}),Object(c.jsxs)("select",{name:"role",value:u.role,onChange:tt,style:{flex:1},children:[Object(c.jsx)("option",{value:"seller",children:"Seller"}),Object(c.jsx)("option",{value:"subadmin",children:"Sub-Admin"})]}),Object(c.jsx)("button",{type:"submit",style:{flex:1},children:"Create User"})]}),Object(c.jsx)("div",{style:{overflowX:"auto"},children:Object(c.jsxs)("table",{className:"future-table",style:{minWidth:700},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Username"}),Object(c.jsx)("th",{children:"Email"}),Object(c.jsx)("th",{children:"Role"}),Object(c.jsx)("th",{children:"Created By"}),Object(c.jsx)("th",{children:"Actions"})]})}),Object(c.jsx)("tbody",{children:wt.map(e=>I===e._id?Object(c.jsxs)("tr",{style:{background:"#353b48"},children:[Object(c.jsx)("td",{children:Object(c.jsx)("input",{name:"username",value:A.username,onChange:ft})}),Object(c.jsx)("td",{children:Object(c.jsx)("input",{name:"email",value:A.email,onChange:ft})}),Object(c.jsx)("td",{children:Object(c.jsxs)("select",{name:"role",value:A.role,onChange:ft,children:[Object(c.jsx)("option",{value:"seller",children:"Seller"}),Object(c.jsx)("option",{value:"subadmin",children:"Sub-Admin"})]})}),Object(c.jsx)("td",{children:"-"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("input",{name:"password",type:"password",value:A.password,onChange:ft,placeholder:"New password (optional)"}),Object(c.jsx)("button",{onClick:Ot,children:"Save"}),Object(c.jsx)("button",{onClick:yt,children:"Cancel"})]})]},e._id):Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.username}),Object(c.jsx)("td",{children:e.email}),Object(c.jsx)("td",{children:e.role}),Object(c.jsx)("td",{children:"seller"===e.role&&e.shopId&&e.shopId.shopName?e.shopId.shopName:"subadmin"===e.role&&e.owner&&e.owner.username?e.owner.username:"admin"===e.role?"Super Admin":"-"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("button",{onClick:()=>(e=>{P(e._id),E({username:e.username,email:e.email,role:e.role,password:""})})(e),style:{marginRight:6},children:"Edit"}),Object(c.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this user?"))try{await j.a.delete(`${$}/auth/users/${e}`,{headers:{Authorization:`Bearer ${w}`}}),g("User deleted!"),Ne()}catch(i){var t,o;g("Error deleting user: "+((null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||i.message))}})(e._id),style:{background:"#e74c3c",color:"#fff",marginRight:6},children:"Delete"})]})]},e._id))})]})})]}),"analytics"===jt&&Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"future-dashboard-cards",style:{display:"flex",flexWrap:"wrap",gap:24,marginBottom:32},children:[Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Total Orders"}),Object(c.jsx)("div",{style:{fontWeight:700,fontSize:28,color:"#0984e3"},children:Xe.totalOrders})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Total Revenue"}),Object(c.jsxs)("div",{style:{fontWeight:700,fontSize:28,color:"#27ae60"},children:["ETB ",Xe.totalRevenue.toLocaleString()]})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Products"}),Object(c.jsx)("div",{style:{fontWeight:700,fontSize:28,color:"#f7c948"},children:Xe.productCount})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Users"}),Object(c.jsx)("div",{style:{fontWeight:700,fontSize:28,color:"#888"},children:Xe.userCount})]})]}),Object(c.jsxs)("div",{className:"future-dashboard-row",style:{display:"flex",flexWrap:"wrap",gap:24,marginBottom:32,width:"100%"},children:[Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:2,padding:"1.5rem"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Orders by Month"}),Object(c.jsx)(T.a,{data:st,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180})]}),Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:2,padding:"1.5rem"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Revenue by Month"}),Object(c.jsx)(T.a,{data:at,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180})]}),Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:1,padding:"1.5rem"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Users by Role"}),Object(c.jsx)(T.b,{data:lt,options:{responsive:!0,plugins:{legend:{position:"bottom"}}},height:180})]})]}),Object(c.jsxs)("div",{className:"future-chart-container",style:{padding:"1.5rem",marginBottom:32,width:"100%",boxSizing:"border-box"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Top Selling Products"}),Object(c.jsx)(T.a,{data:ct,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180})]}),Object(c.jsxs)("div",{className:"future-dashboard-row",style:{display:"flex",flexWrap:"wrap",gap:24,marginBottom:32,alignItems:"stretch",width:"100%"},children:[Object(c.jsxs)("div",{className:"future-card future-glow",style:{flex:1,padding:"1.5rem",minWidth:220,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},title:"Real-Time Active Users",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Active Users"}),Object(c.jsx)("div",{style:{fontSize:38,fontWeight:900,color:"#3a6cf6",transition:"all 0.5s"},children:he}),Object(c.jsx)("div",{style:{fontSize:13,color:"#888"},children:"in the last 5 min"})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:2,padding:"1.5rem",minWidth:220,display:"flex",flexDirection:"column",justifyContent:"center"},title:"Live Sales Ticker",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Live Sales"}),Object(c.jsx)("div",{style:{fontSize:18,color:"#27ae60",minHeight:32,transition:"all 0.5s"},children:null===(o=me[ge])||void 0===o?void 0:o.msg})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:3,padding:"1.5rem",minWidth:220},title:"Product/Category Heatmap",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Product/Category Heatmap"}),Object(c.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:Oe.map((e,t)=>{const o=.8+ye[t]/Math.max(...ye||[1])*.2,i=isNaN(o)?1:Math.max(0,Math.min(1,o));return Object(c.jsxs)("div",{style:{background:"#3a6cf6",color:"#fff",borderRadius:8,padding:"8px 16px",marginBottom:6,fontWeight:600,opacity:i},children:[e,": ",ye[t]]},e)})})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:2,padding:"1.5rem",minWidth:220},title:"Recent Logins",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Recent Logins"}),Object(c.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0,fontSize:15},children:ve.map(e=>Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:e.user})," ",Object(c.jsxs)("span",{style:{color:"#888"},children:["(",e.role,")"]})," ",Object(c.jsx)("span",{style:{float:"right",color:"#3a6cf6"},children:e.time})]},e.user))})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",minWidth:220},title:"Live Server Status",children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Live Server Status"}),Object(c.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0,fontSize:15},children:Se.map(e=>Object(c.jsxs)("li",{children:[Object(c.jsxs)("b",{children:[e.label,":"]})," ",Object(c.jsx)("span",{style:{color:"online"===e.status?"#27ae60":"#f7c948",fontWeight:700,animation:"online"===e.status?"glowPulse 1.5s infinite alternate":void 0},children:e.status})]},e.label))})]})]})]}),"shopRequests"===jt&&Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Shop Registration Requests"}),Ie?Object(c.jsx)("div",{children:"Loading shop requests..."}):Ae?Object(c.jsx)("div",{style:{color:"red"},children:Ae}):0===We.length?Object(c.jsx)("div",{children:"No shop requests found."}):Object(c.jsxs)("table",{className:"future-table",style:{minWidth:700},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Shop Name"}),Object(c.jsx)("th",{children:"Owner"}),Object(c.jsx)("th",{children:"Status"}),Object(c.jsx)("th",{children:"Actions"})]})}),Object(c.jsx)("tbody",{children:We.map(e=>Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.shopName||e.name}),Object(c.jsx)("td",{children:e.ownerName||e.owner||"-"}),Object(c.jsx)("td",{children:e.status}),Object(c.jsxs)("td",{children:[Object(c.jsx)("button",{onClick:()=>qe(e._id,"approve"),children:"Approve"}),Object(c.jsx)("button",{onClick:()=>qe(e._id,"reject"),children:"Reject"}),Object(c.jsx)("button",{onClick:()=>$e(e),children:"View"})]})]},e._id))})]}),Te&&Object(c.jsx)("div",{style:{marginTop:12,color:"#27ae60"},children:Te})]}),De&&Object(c.jsx)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",zIndex:200,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(c.jsxs)("div",{className:"modal-content",style:{background:"#fff",padding:32,borderRadius:12,minWidth:350,maxWidth:500,boxShadow:"0 4px 24px #23294655",position:"relative"},children:[Object(c.jsx)("h3",{children:"Shop Request Details"}),Object(c.jsx)("table",{style:{width:"100%",marginBottom:16},children:Object(c.jsx)("tbody",{children:Object.entries(De).map(e=>{let[t,o]=e;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{style:{fontWeight:600,padding:"4px 8px",textTransform:"capitalize"},children:t}),Object(c.jsx)("td",{style:{padding:"4px 8px"},children:String(o)})]},t)})})}),Object(c.jsx)("button",{onClick:()=>$e(null),style:{marginTop:8},children:"Close"})]})})]})]})]})};L.d.register(L.c,L.f,L.b,L.g,L.h,L.e,L.a);const q=`http://${window.location.hostname}:5000/api`,F={canAddProducts:!0,canEditProducts:!0,canDeleteProducts:!0,canViewOrders:!0,canManageProfile:!0},_=()=>{var e,t;const[o,r]=Object(i.useState)([]),[n,s]=Object(i.useState)(null),[a,l]=Object(i.useState)(!1),[d,b]=Object(i.useState)(null),[h,u]=Object(i.useState)("dashboard"),[m,p]=Object(i.useState)([]),[g,x]=Object(i.useState)(!1),[f,O]=Object(i.useState)(null),[y,v]=Object(i.useState)({username:"",email:"",role:""}),[S,w]=Object(i.useState)(""),[k,C]=Object(i.useState)([]),[N,z]=Object(i.useState)({email:"",password:""}),[B,W]=Object(i.useState)(""),[R,I]=Object(i.useState)(!1),[A,E]=Object(i.useState)(!1),[L,$]=Object(i.useState)([]),[M,_]=Object(i.useState)(!1),[H,Y]=Object(i.useState)(!1),[J,V]=Object(i.useState)(""),[Z,G]=Object(i.useState)([]),[Q,X]=Object(i.useState)(!1),[K,ee]=Object(i.useState)({current:"",new:"",confirm:""}),[te,oe]=Object(i.useState)(""),[ie,re]=Object(i.useState)(!1),[ne,se]=Object(i.useState)({totalOrders:0,totalRevenue:0,bestSeller:null}),[ae,le]=Object(i.useState)([]),[ce,de]=Object(i.useState)(""),[be,je]=Object(i.useState)(1),[he,ue]=Object(i.useState)({}),[me,pe]=Object(i.useState)(null),[ge,xe]=Object(i.useState)(null),[fe,Oe]=Object(i.useState)(""),[ye,ve]=Object(i.useState)(null),[Se,we]=Object(i.useState)(null),[ke,Ce]=Object(i.useState)(!1),[Ne,ze]=Object(i.useState)(""),[Be,We]=Object(i.useState)(""),[Re,Ie]=Object(i.useState)({show:!1,message:"",type:"success"}),Pe=function(e){Ie({show:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout(()=>Ie({show:!1,message:"",type:"success"}),2500)},[Ae,Ee]=Object(i.useState)(!1),[Te,Le]=Object(i.useState)("dashboard"),De=[{key:"dashboard",label:"Dashboard",icon:Object(c.jsx)(D.f,{})},{key:"products",label:"Products",icon:Object(c.jsx)(D.b,{})},{key:"sellers",label:"Sellers",icon:Object(c.jsx)(D.j,{})},{key:"orders",label:"Orders",icon:Object(c.jsx)(D.i,{})},{key:"reports",label:"Reports",icon:Object(c.jsx)(D.e,{})},{key:"ratings",label:"Ratings",icon:Object(c.jsx)(D.c,{})},{key:"comments",label:"Comments",icon:Object(c.jsx)(D.h,{})},{key:"settings",label:"Settings",icon:Object(c.jsx)(D.d,{})},{key:"products-managed",label:"Products Managed",icon:Object(c.jsx)(D.b,{})}],$e="seller"===(null===n||void 0===n?void 0:n.role)?De.filter(e=>"sellers"!==e.key):De;Object(i.useEffect)(()=>{const e=()=>{window.innerWidth<900&&!Ae&&Ee(!0),window.innerWidth>=900&&Ae&&Ee(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[Ae]),Object(i.useEffect)(()=>{let e=localStorage.getItem("user"),t=null;if(e&&"undefined"!==e)try{t=JSON.parse(e)}catch(o){t=null}if(s(t),t&&"subadmin"===t.role){const e=t.token;j.a.get(`${q}/products?shopId=${t.shopId}`,{headers:{Authorization:`Bearer ${e}`}}).then(e=>r(e.data.filter(e=>e.shopId===t.shopId))).catch(()=>r([]))}},[a,B,R]),Object(i.useEffect)(()=>{"sellers"===h&&n&&n.token&&(x(!0),j.a.get(`${q}/auth/subadmin/sellers?shopId=${n.shopId}`,{headers:{Authorization:`Bearer ${n.token}`}}).then(e=>{p(e.data.filter(e=>e.shopId===n.shopId)),x(!1)}).catch(()=>{p([]),x(!1)}))},[h,n]),Object(i.useEffect)(()=>{n&&n.token&&(j.a.get(`${q}/admin/subadmin/analytics`,{headers:{Authorization:`Bearer ${n.token}`}}).then(e=>se(e.data)).catch(()=>se({totalOrders:0,totalRevenue:0,bestSeller:null})),j.a.get(`${q}/admin/subadmin/orders`,{headers:{Authorization:`Bearer ${n.token}`}}).then(e=>le(e.data)).catch(()=>le([])))},[n]),Object(i.useEffect)(()=>{m.length>0&&n&&n.token&&Promise.all(m.map(e=>j.a.get(`${q}/products?seller=${e._id}&shopId=${n.shopId}`,{headers:{Authorization:`Bearer ${n.token}`}}).then(t=>({id:e._id,count:t.data.length})).catch(()=>({id:e._id,count:0})))).then(e=>{const t={};e.forEach(e=>{t[e.id]=e.count}),ue(t)})},[m,n]);const Me=e=>{r(t=>t.map(t=>t._id===e._id?e:t)),l(!1),b(null)},qe=e=>{const{name:t,value:o,type:i,checked:r}=e.target;if(t.startsWith("privileges.")){const e=t.split(".")[1];v(t=>({...t,privileges:{...t.privileges,[e]:"checkbox"===i?r:o}}))}else v(e=>({...e,[t]:o}))},Fe=async e=>{if(e.preventDefault(),f)try{await j.a.put(`${q}/auth/subadmin/sellers/${f._id}`,y,{headers:{Authorization:`Bearer ${n.token}`}}),w("User updated!"),p(m.map(e=>e._id===f._id?{...e,...y}:e)),O(null)}catch(t){w("Error updating user.")}},[_e,Ue]=Object(i.useState)({username:"",email:"",password:"",privileges:{...F}}),[He,Ye]=Object(i.useState)(""),Je=e=>{const{name:t,value:o,type:i,checked:r}=e.target;if(t.startsWith("privileges.")){const e=t.split(".")[1];Ue(t=>({...t,privileges:{...t.privileges,[e]:"checkbox"===i?r:o}}))}else Ue(e=>({...e,[t]:o}))},Ve=async e=>{e.preventDefault(),Ye("");try{const e=null===n||void 0===n?void 0:n.shopId,t=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>e.sellerId).filter(Boolean);let t=0;return e.forEach(e=>{const o=/^se(\d+)$/.exec(e);o&&(t=Math.max(t,parseInt(o[1],10)))}),`se${t+1}`}(m.filter(t=>t.shopId===e)),o={..._e,shopId:e,sellerId:t};await j.a.post(`${q}/auth/subadmin/sellers`,o,{headers:{Authorization:`Bearer ${n.token}`}}),Ye("Seller created!"),Ue({username:"",email:"",password:"",privileges:{...F}}),x(!0);const i=await j.a.get(`${q}/auth/subadmin/sellers`,{headers:{Authorization:`Bearer ${n.token}`}});p(i.data),x(!1)}catch(i){var t,o;const e=(null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||i.message||"Error creating seller.";Ye(e)}},Ze=e=>{const{name:t,value:o}=e.target;z(e=>({...e,[t]:o}))},Ge=async e=>{e.preventDefault(),I(!0),W("");try{const e=await j.a.post(`${q}/auth/login`,N),t={token:e.data.token,role:e.data.role,shopId:e.data.shopId?e.data.shopId.toString():null};localStorage.setItem("user",JSON.stringify(t)),s(t),z({email:"",password:""})}catch(t){W("Invalid sub-admin credentials")}I(!1)},Qe=()=>re(!0);Object(i.useEffect)(()=>{(async()=>{G([{time:(new Date).toLocaleString(),action:"Edited product X"},{time:(new Date).toLocaleString(),action:"Created seller Y"}])})()},[]);const Xe=e=>{const{name:t,value:o}=e.target;ee(e=>({...e,[t]:o}))},Ke=async e=>{e.preventDefault(),We("");try{await j.a.post(`${q}/auth/forgot-password`,{email:Ne}),We("Password reset link sent! Check your email."),ze("")}catch(i){var t,o;We("Error: "+((null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||i.message))}};const et=async e=>{if(n&&n.token)try{await j.a.delete(`${q}/products/${e}`,{headers:{Authorization:`Bearer ${n.token}`}}),C(k.filter(t=>t._id!==e)),b(null),Pe("Product deleted!","success")}catch(i){var t,o;const e=(null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.error)||"Error deleting product";Pe(e,"error")}},tt="user"===(null===n||void 0===n?void 0:n.role)&&(null===n||void 0===n?void 0:n.privileges)||{},ot="subadmin"===(null===n||void 0===n?void 0:n.role)&&(null===n||void 0===n?void 0:n.privileges)||{},[it,rt]=Object(i.useState)(""),[nt,st]=Object(i.useState)("all"),[at,lt]=Object(i.useState)("name"),[ct,dt]=Object(i.useState)("asc"),bt=o.filter(e=>e.name.toLowerCase().includes(it.toLowerCase())).filter(e=>"low"===nt?e.stock<=5&&e.stock>0:"out"===nt?0===e.stock:"in"!==nt||e.stock>5).sort((e,t)=>{let o=e[at],i=t[at];return"string"===typeof o&&(o=o.toLowerCase()),"string"===typeof i&&(i=i.toLowerCase()),o<i?"asc"===ct?-1:1:o>i?"asc"===ct?1:-1:0}),[jt,ht]=Object(i.useState)({});Object(i.useEffect)(()=>{"products-managed"===h&&n&&n.token&&j.a.get(`${q}/auth/subadmin/products-managed`,{headers:{Authorization:`Bearer ${n.token}`}}).then(e=>{Array.isArray(e.data)&&e.data.length>0?C(e.data):j.a.get(`${q}/products?shopId=${n.shopId}`,{headers:{Authorization:`Bearer ${n.token}`}}).then(e=>C(e.data)).catch(()=>C([]))}).catch(()=>{j.a.get(`${q}/products?shopId=${n.shopId}`,{headers:{Authorization:`Bearer ${n.token}`}}).then(e=>C(e.data)).catch(()=>C([]))})},[h,n,a]);return!n||"subadmin"!==n.role&&"seller"!==n.role?Object(c.jsxs)("div",{style:{maxWidth:400,margin:"60px auto",background:"#fff",borderRadius:12,boxShadow:"0 2px 8px rgba(44,62,80,0.06)",padding:"2rem"},children:[Object(c.jsx)("h2",{style:{marginBottom:24,textAlign:"center"},children:"Subadmin / Seller Login"}),Object(c.jsxs)("form",{onSubmit:Ge,children:[Object(c.jsxs)("div",{style:{marginBottom:16},children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",value:N.email,onChange:Ze,required:!0,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #eee"}})]}),Object(c.jsxs)("div",{style:{marginBottom:16},children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)("input",{type:A?"text":"password",name:"password",value:N.password,onChange:Ze,required:!0,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #eee"}})]}),Object(c.jsxs)("div",{style:{marginBottom:16},children:[Object(c.jsx)("label",{children:"Role"}),Object(c.jsxs)("select",{name:"role",value:N.role||"",onChange:Ze,required:!0,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #eee"},children:[Object(c.jsx)("option",{value:"",children:"Select role"}),Object(c.jsx)("option",{value:"subadmin",children:"Subadmin"}),Object(c.jsx)("option",{value:"seller",children:"Seller"})]})]}),B&&Object(c.jsx)("div",{style:{color:"red",marginBottom:12},children:B}),Object(c.jsx)("button",{type:"submit",className:"button",style:{width:"100%",background:"#00b894",color:"#fff",border:"none",borderRadius:6,padding:"10px 0",fontWeight:600},disabled:R,children:R?"Logging in...":"Login"})]}),Object(c.jsx)("div",{style:{marginTop:16,textAlign:"center"},children:Object(c.jsx)("button",{type:"button",style:{background:"none",border:"none",color:"#0984e3",cursor:"pointer"},onClick:()=>Ce(!0),children:"Forgot password?"})}),ke&&Object(c.jsxs)("form",{onSubmit:Ke,style:{marginTop:16},children:[Object(c.jsx)("input",{type:"email",value:Ne,onChange:e=>ze(e.target.value),placeholder:"Enter your email",required:!0,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #eee",marginBottom:8}}),Object(c.jsx)("button",{type:"submit",className:"button",style:{width:"100%",background:"#0984e3",color:"#fff",border:"none",borderRadius:6,padding:"8px 0",fontWeight:600},children:"Send Reset Link"}),Be&&Object(c.jsx)("div",{style:{color:"#00b894",marginTop:8},children:Be})]})]}):Object(c.jsx)(U,{children:Object(c.jsxs)("div",{style:{minHeight:"100vh",background:"#f4f7fa",padding:0,margin:0},children:[Object(c.jsxs)("div",{style:{display:"flex",minHeight:"100vh"},children:[Object(c.jsxs)("div",{className:"future-sidebar",style:{width:Ae?68:240,background:"#232946",color:"#e0e6ff",display:"flex",flexDirection:"column",boxShadow:"2px 0 12px #23294622",transition:"width 0.2s",position:"relative",zIndex:10},children:[Object(c.jsx)("button",{onClick:()=>Ee(e=>!e),style:{position:"absolute",top:18,right:Ae?-18:-22,background:"#3a6cf6",color:"#fff",border:"none",borderRadius:"50%",width:36,height:36,cursor:"pointer",boxShadow:"0 2px 8px #23294644",zIndex:20,transition:"right 0.2s"},title:Ae?"Expand sidebar":"Collapse sidebar",children:Ae?"\xbb":"\xab"}),Object(c.jsxs)("div",{style:{padding:Ae?"1.2rem 0.5rem":"2rem 1.5rem",borderBottom:"1px solid #2d3652",display:"flex",alignItems:"center",gap:Ae?0:12,cursor:"pointer",justifyContent:Ae?"center":"flex-start"},title:"Show Profile",onClick:Qe,children:[Object(c.jsx)("div",{style:{width:40,height:40,borderRadius:"50%",background:"#3a6cf6",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:22,color:"#fff"},children:null!==n&&void 0!==n&&n.username?n.username[0].toUpperCase():"S"}),!Ae&&Object(c.jsx)("span",{style:{fontWeight:700,fontSize:20,letterSpacing:1},children:(null===n||void 0===n?void 0:n.username)||"Subadmin"})]}),Object(c.jsx)("nav",{style:{flex:1,padding:Ae?"1rem 0.5rem":"2rem 1.5rem 0 1.5rem"},children:$e.map(e=>Object(c.jsxs)("div",{className:h===e.key?"active":"",style:{marginBottom:18,fontWeight:h===e.key?600:400,color:h===e.key?"#3a6cf6":"#e0e6ff",background:h===e.key?"#263159":"none",borderRadius:6,padding:Ae?"10px 0":"8px 16px",cursor:"pointer",transition:"all 0.15s",display:"flex",alignItems:"center",gap:Ae?0:12,position:"relative",justifyContent:Ae?"center":"flex-start"},onClick:()=>u(e.key),title:e.label,onMouseEnter:e=>{Ae&&(e.currentTarget.style.background="#3a6cf6")},onMouseLeave:t=>{Ae&&(t.currentTarget.style.background=h===e.key?"#263159":"none")},children:[Object(c.jsx)("span",{style:{fontSize:20},children:e.icon}),!Ae&&Object(c.jsx)("span",{children:e.label}),Ae&&Object(c.jsx)("span",{style:{position:"absolute",left:60,background:"#263159",color:"#fff",padding:"4px 12px",borderRadius:6,fontSize:14,whiteSpace:"nowrap",opacity:0,pointerEvents:"none",transition:"opacity 0.2s",zIndex:100},className:"sidebar-tooltip",children:e.label})]},e.key))}),Object(c.jsx)("div",{style:{padding:Ae?"0.5rem":"1.5rem",borderTop:"1px solid #2d3652",textAlign:"center",fontSize:13,color:"#bbb"},children:!Ae&&Object(c.jsxs)("span",{children:["\xa9 ",(new Date).getFullYear()," Shop Manager"]})})]}),Object(c.jsxs)("div",{style:{flex:1,padding:"2.5rem 3rem",minHeight:"100vh",boxSizing:"border-box",overflowY:"auto"},children:[Object(c.jsxs)("div",{className:"subadmin-dashboard-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32},children:[Object(c.jsxs)("div",{className:"subadmin-header-left",style:{display:"flex",alignItems:"center",gap:12},children:[Object(c.jsx)("span",{className:"subadmin-dashboard-logo",style:{fontWeight:700,fontSize:22,color:"#00b894"},children:"AutoPartsPro"}),Object(c.jsx)("span",{className:"subadmin-dashboard-title",style:{fontWeight:600,fontSize:18,color:"#222"},children:"Subadmin Dashboard"})]}),Object(c.jsxs)("div",{className:"subadmin-header-actions",style:{display:"flex",alignItems:"center",gap:16},children:[Object(c.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:18},children:Object(c.jsxs)("div",{style:{position:"relative"},children:[Object(c.jsxs)("button",{onClick:()=>{_(e=>!e),L.length||(async()=>{Y(!0),V("");try{$([{id:1,message:"Low stock on product X",read:!1,createdAt:(new Date).toISOString()},{id:2,message:"New order received",read:!1,createdAt:(new Date).toISOString()}])}catch(e){V("Failed to load notifications")}Y(!1)})()},style:{background:"none",border:"none",cursor:"pointer",position:"relative",padding:0},"aria-label":"Notifications",children:[Object(c.jsx)(D.a,{size:22,color:M?"#0984e3":"#888"}),L.some(e=>!e.read)&&Object(c.jsx)("span",{style:{position:"absolute",top:-4,right:-4,background:"#e74c3c",color:"#fff",borderRadius:"50%",fontSize:11,padding:"2px 6px",fontWeight:700},children:L.filter(e=>!e.read).length})]}),M&&Object(c.jsxs)("div",{style:{position:"absolute",right:0,top:28,background:"#fff",border:"1px solid #eee",borderRadius:8,boxShadow:"0 2px 12px #0984e322",minWidth:260,zIndex:100},children:[Object(c.jsx)("div",{style:{fontWeight:700,fontSize:15,padding:"10px 16px",borderBottom:"1px solid #eee",background:"#f8faff"},children:"Notifications"}),H?Object(c.jsx)("div",{style:{padding:16,color:"#888"},children:"Loading..."}):J?Object(c.jsx)("div",{style:{padding:16,color:"#e74c3c"},children:J}):0===L.length?Object(c.jsx)("div",{style:{padding:16,color:"#888"},children:"No notifications."}):L.map(e=>Object(c.jsxs)("div",{style:{padding:"10px 16px",background:e.read?"#fff":"#eaf6ff",borderBottom:"1px solid #f2f2f2",fontWeight:e.read?400:700,color:e.read?"#444":"#0984e3",cursor:"pointer",display:"flex",alignItems:"center",gap:8},onClick:()=>{return t=e.id,void $(e=>e.map(e=>e.id===t?{...e,read:!0}:e));var t},children:[!e.read&&Object(c.jsx)("span",{style:{width:8,height:8,background:"#0984e3",borderRadius:"50%",display:"inline-block",marginRight:6}}),Object(c.jsx)("span",{children:e.message}),Object(c.jsx)("span",{style:{marginLeft:"auto",fontSize:11,color:"#aaa"},children:e.createdAt?new Date(e.createdAt).toLocaleString():""})]},e.id))]})]})}),Object(c.jsx)("button",{className:"subadmin-export-btn",onClick:function(){const e=o.map(e=>[e.name,e.price,e.stock]);let t=["Name","Price","Stock"].join(",")+"\n";t+=e.map(e=>e.map(e=>'"'+String(e).replace(/"/g,'""')+'"').join(",")).join("\n");const i=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(i),n=document.createElement("a");n.href=r,n.download="my_products.csv",n.click(),URL.revokeObjectURL(r)},style:{background:"#00b894",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Export Products"}),Object(c.jsx)("button",{className:"subadmin-export-btn",onClick:function(){const e=m.map(e=>[e.username,e.email]);let t=["Username","Email"].join(",")+"\n";t+=e.map(e=>e.map(e=>'"'+String(e).replace(/"/g,'""')+'"').join(",")).join("\n");const o=new Blob([t],{type:"text/csv"}),i=URL.createObjectURL(o),r=document.createElement("a");r.href=i,r.download="my_sellers.csv",r.click(),URL.revokeObjectURL(i)},style:{background:"#0984e3",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Export Sellers"}),Object(c.jsx)("button",{className:"subadmin-logout-btn",onClick:async()=>{try{await j.a.post(`${q}/auth/logout`,{},{headers:{Authorization:`Bearer ${null===n||void 0===n?void 0:n.token}`}})}catch(e){}localStorage.removeItem("user"),s(null)},style:{background:"none",color:"#e74c3c",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Logout"}),Object(c.jsx)("span",{className:"subadmin-header-avatar",title:"Profile",onClick:Qe,style:{width:36,height:36,borderRadius:"50%",background:"#00b894",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:700,fontSize:18},children:(null===n||void 0===n||null===(e=n.username)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.toUpperCase())||"S"})]})]}),ie&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>re(!1),children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:400,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>re(!1),style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)("div",{style:{marginBottom:"1rem",fontWeight:600},children:"Profile"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Username:"})," ",null===n||void 0===n?void 0:n.username]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Email:"})," ",null===n||void 0===n?void 0:n.email]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Role:"})," ",null===n||void 0===n?void 0:n.role]})]})}),Q&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>X(!1),children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:400,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>X(!1),style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)("div",{style:{marginBottom:"1rem",fontWeight:600},children:"Change Password"}),Object(c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),oe(""),K.new===K.confirm)try{await j.a.post(`${q}/auth/change-password`,{currentPassword:K.current,newPassword:K.new},{headers:{Authorization:`Bearer ${null===n||void 0===n?void 0:n.token}`}}),oe("Password changed successfully!"),ee({current:"",new:"",confirm:""}),setTimeout(()=>X(!1),1200)}catch(i){var t,o;oe("Error: "+((null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||i.message))}else oe("New passwords do not match.")},children:[Object(c.jsx)("input",{name:"current",type:"password",value:K.current,onChange:Xe,placeholder:"Current Password",required:!0,style:{marginBottom:12,width:"100%"}}),Object(c.jsx)("input",{name:"new",type:"password",value:K.new,onChange:Xe,placeholder:"New Password",required:!0,style:{marginBottom:12,width:"100%"}}),Object(c.jsx)("input",{name:"confirm",type:"password",value:K.confirm,onChange:Xe,placeholder:"Confirm New Password",required:!0,style:{marginBottom:12,width:"100%"}}),Object(c.jsx)("button",{type:"submit",className:"button",style:{width:"100%"},children:"Change Password"})]}),te&&Object(c.jsx)("div",{style:{color:te.includes("success")?"#00b894":"#e74c3c",marginTop:10},children:te})]})}),Object(c.jsxs)("div",{className:"dashboard-root",children:[(()=>{var e,t,i,s,x,f,O,v,C,N,z,B,W;switch(h){case"dashboard":return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"future-dashboard-cards",style:{display:"flex",gap:24,marginBottom:32},children:[Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Products Managed"}),Object(c.jsx)("div",{style:{fontWeight:700,fontSize:28,color:"#00b894"},children:o.length})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Total Orders"}),Object(c.jsx)("div",{style:{fontWeight:700,fontSize:28,color:"#0984e3"},children:ne.totalOrders})]}),Object(c.jsxs)("div",{className:"future-card",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Total Revenue"}),Object(c.jsxs)("div",{style:{fontWeight:700,fontSize:28,color:"#27ae60"},children:["ETB ",null!==(e=null===(t=ne.totalRevenue)||void 0===t||null===(i=t.toLocaleString)||void 0===i?void 0:i.call(t))&&void 0!==e?e:0]})]}),Object(c.jsxs)("div",{className:"future-card future-glow",style:{flex:1,padding:"1.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[Object(c.jsx)("div",{style:{fontSize:14,color:"#888"},children:"Best Seller"}),Object(c.jsx)("div",{className:"future-best-seller",style:{fontSize:22},children:ne.bestSeller||"N/A"})]})]}),Object(c.jsxs)("div",{className:"future-dashboard-row",style:{display:"flex",gap:24,marginBottom:32,flexWrap:"wrap"},children:[Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:2,padding:"1.5rem",minWidth:320},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Revenue by Month"}),ne.revenueByMonth&&Array.isArray(ne.revenueByMonth)&&12===ne.revenueByMonth.length?Object(c.jsx)(T.a,{data:{labels:Array.from({length:12},(e,t)=>{const o=new Date;return o.setMonth(o.getMonth()-(11-t)),o.toLocaleString("default",{month:"short",year:"2-digit"})}),datasets:[{label:"Revenue (ETB)",data:ne.revenueByMonth,backgroundColor:"#3a6cf6"}]},options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180}):Object(c.jsx)("div",{style:{height:180,display:"flex",alignItems:"center",justifyContent:"center",color:"#bbb",fontSize:18,border:"1px dashed #eee",borderRadius:8},children:"No data available"})]}),Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:1,padding:"1.5rem"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Orders by Status"}),ne.statusCounts&&Object.keys(ne.statusCounts).length>0?Object(c.jsx)(T.b,{data:{labels:Object.keys(ne.statusCounts),datasets:[{data:Object.values(ne.statusCounts),backgroundColor:["#3a6cf6","#27ae60","#f7c948","#e74c3c","#888"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}},height:180}):Object(c.jsx)("div",{style:{height:180,display:"flex",alignItems:"center",justifyContent:"center",color:"#bbb",fontSize:18,border:"1px dashed #eee",borderRadius:8},children:"No data available"})]})]}),Object(c.jsxs)("div",{style:{display:"flex",gap:24,marginBottom:32,flexWrap:"wrap"},children:[Object(c.jsxs)("div",{className:"future-chart-container",style:{flex:2,padding:"1.5rem",minWidth:320},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Top Selling Products"}),ne.topProducts&&ne.topProducts.length>0?Object(c.jsx)(T.a,{data:{labels:ne.topProducts.map(e=>e.name),datasets:[{label:"Quantity Sold",data:ne.topProducts.map(e=>e.qty),backgroundColor:"#00b894"}]},options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180}):Object(c.jsx)("div",{style:{height:180,display:"flex",alignItems:"center",justifyContent:"center",color:"#bbb",fontSize:18,border:"1px dashed #eee",borderRadius:8},children:"No data available"})]}),Object(c.jsxs)("div",{style:{flex:1,background:"#fff",borderRadius:12,padding:"1.5rem",boxShadow:"0 2px 8px rgba(44,62,80,0.06)",minWidth:260},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Horizontal Timeline"}),Object(c.jsx)("div",{style:{color:"#888",fontSize:15,marginBottom:8},children:"No recent activity."}),Object(c.jsx)("div",{style:{color:"#888",fontSize:15},children:"More features coming soon."}),Object(c.jsx)("button",{className:"button",style:{marginTop:16,background:"#00b894",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Read More"})]})]}),Object(c.jsxs)("div",{className:"future-chart-container",style:{padding:"1.5rem",marginBottom:32},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Top Selling Products"}),ne.topProducts&&ne.topProducts.length>0?Object(c.jsx)(T.a,{data:{labels:ne.topProducts.map(e=>e.name),datasets:[{label:"Quantity Sold",data:ne.topProducts.map(e=>e.qty),backgroundColor:"#00b894"}]},options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!0}}},height:180}):Object(c.jsx)("div",{style:{height:180,display:"flex",alignItems:"center",justifyContent:"center",color:"#bbb",fontSize:18,border:"1px dashed #eee",borderRadius:8},children:"No data available"})]}),Object(c.jsxs)("div",{style:{flex:1,background:"#fff",borderRadius:12,padding:"1.5rem",boxShadow:"0 2px 8px rgba(44,62,80,0.06)"},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Horizontal Timeline"}),Object(c.jsx)("div",{style:{color:"#888",fontSize:15,marginBottom:8},children:"No recent activity."}),Object(c.jsx)("div",{style:{color:"#888",fontSize:15},children:"More features coming soon."}),Object(c.jsx)("button",{className:"button",style:{marginTop:16,background:"#00b894",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Read More"})]})]});case"products":const R="user"!==(null===n||void 0===n?void 0:n.role)||tt.canAddProducts,I="user"!==(null===n||void 0===n?void 0:n.role)||tt.canEditProducts,A="user"!==(null===n||void 0===n?void 0:n.role)||tt.canDeleteProducts;return Object(c.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:"1.5rem",boxShadow:"0 2px 8px rgba(44,62,80,0.06)",marginBottom:32},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"My Products"}),Object(c.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:12,alignItems:"center"},children:[Object(c.jsx)("input",{type:"text",placeholder:"Search products...",value:it,onChange:e=>rt(e.target.value),style:{width:180}}),Object(c.jsxs)("select",{value:nt,onChange:e=>st(e.target.value),children:[Object(c.jsx)("option",{value:"all",children:"All Stock"}),Object(c.jsx)("option",{value:"low",children:"Low Stock (\u22645)"}),Object(c.jsx)("option",{value:"out",children:"Out of Stock"}),Object(c.jsx)("option",{value:"in",children:"In Stock (>5)"})]}),Object(c.jsxs)("select",{value:at,onChange:e=>lt(e.target.value),children:[Object(c.jsx)("option",{value:"name",children:"Sort by Name"}),Object(c.jsx)("option",{value:"price",children:"Sort by Price"}),Object(c.jsx)("option",{value:"stock",children:"Sort by Stock"})]}),Object(c.jsxs)("select",{value:ct,onChange:e=>dt(e.target.value),children:[Object(c.jsx)("option",{value:"asc",children:"Asc"}),Object(c.jsx)("option",{value:"desc",children:"Desc"})]})]}),Object(c.jsxs)("div",{style:{background:"#ffe",padding:"10px",marginBottom:"10px"},children:[Object(c.jsx)("strong",{children:"Debug Info:"}),Object(c.jsx)("br",{}),"User shopId: ",null!==n&&void 0!==n&&n.shopId?n.shopId:"N/A",Object(c.jsx)("br",{}),"Products: ",Object(c.jsx)("pre",{children:JSON.stringify(o,null,2)})]}),0===o.length?Object(c.jsx)("div",{style:{color:"#888",textAlign:"center",padding:32},children:"No products found."}):Object(c.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:8},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{style:{background:"#f4f4f4"},children:[Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Name"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Stock"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Price"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Actions"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Inventory"})]})}),Object(c.jsx)("tbody",{children:bt.map(e=>[Object(c.jsxs)("tr",{style:0===e.stock?{background:"#ffeaea"}:e.stock<=5?{background:"#fffbe6"}:{},children:[Object(c.jsx)("td",{style:{padding:8,border:"1px solid #eee"},children:e.name}),Object(c.jsxs)("td",{style:{padding:8,border:"1px solid #eee"},children:[e.stock,0===e.stock&&Object(c.jsx)("span",{style:{color:"#e74c3c",fontWeight:700,marginLeft:6},title:"Out of stock",children:"\u26a0\ufe0f"}),e.stock>0&&e.stock<=5&&Object(c.jsx)("span",{style:{color:"#f7b731",fontWeight:700,marginLeft:6},title:"Low stock",children:"!"})]}),Object(c.jsxs)("td",{style:{padding:8,border:"1px solid #eee"},children:["ETB ",e.price]}),Object(c.jsxs)("td",{style:{padding:8,border:"1px solid #eee"},children:[Object(c.jsx)("button",{className:"button",style:{marginRight:8},onClick:()=>{return b((t=e)?{...t,shopId:n.shopId,managerId:n._id}:{shopId:n.shopId,managerId:n._id}),void l(!0);var t},disabled:!I,title:I?"Edit product":"No privilege",children:"Edit"}),Object(c.jsx)("button",{className:"button",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{const t=localStorage.getItem("user"),o=t?JSON.parse(t).token:"";await j.a.delete(`${q}/products/${e}`,{headers:{Authorization:`Bearer ${o}`}}),r(t=>t.filter(t=>t._id!==e))}catch(t){alert("Failed to delete product.")}})(e._id),disabled:!A,title:A?"Delete product":"No privilege",children:"Delete"})]}),Object(c.jsx)("td",{style:{padding:8,border:"1px solid #eee"},children:Object(c.jsx)("button",{className:"button",style:{background:"#eee",color:"#0984e3",fontWeight:600,border:"none",borderRadius:6,padding:"4px 10px",fontSize:14},onClick:()=>(async e=>{if(ht(t=>({...t,[e._id]:!t[e._id]})),!e.stockHistory)try{const t=localStorage.getItem("user"),o=t?JSON.parse(t).token:"",i=await j.a.get(`${q}/products/${e._id}`,{headers:{Authorization:`Bearer ${o}`}});r(t=>t.map(t=>t._id===e._id?i.data:t))}catch(t){}})(e),children:jt[e._id]?"Hide History":"Show History"})})]},e._id),jt[e._id]&&Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:5,style:{background:"#f9f9f9",padding:0,border:"1px solid #eee"},children:e.stockHistory&&e.stockHistory.length>0?Object(c.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",margin:0},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{style:{background:"#f4f4f4"},children:[Object(c.jsx)("th",{style:{padding:6,border:"1px solid #eee"},children:"Date"}),Object(c.jsx)("th",{style:{padding:6,border:"1px solid #eee"},children:"Change"}),Object(c.jsx)("th",{style:{padding:6,border:"1px solid #eee"},children:"Reason"}),Object(c.jsx)("th",{style:{padding:6,border:"1px solid #eee"},children:"User"})]})}),Object(c.jsx)("tbody",{children:e.stockHistory.slice().reverse().map((e,t)=>Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{style:{padding:6,border:"1px solid #eee"},children:e.date?new Date(e.date).toLocaleString():""}),Object(c.jsxs)("td",{style:{padding:6,border:"1px solid #eee"},children:[e.change>0?"+":"",e.change]}),Object(c.jsx)("td",{style:{padding:6,border:"1px solid #eee"},children:e.reason||"-"}),Object(c.jsx)("td",{style:{padding:6,border:"1px solid #eee"},children:e.user||"-"})]},t))})]}):Object(c.jsx)("div",{style:{color:"#888",padding:12},children:"No inventory history found for this product."})})},e._id+"-history")])})]}),R&&Object(c.jsx)("button",{className:"button",style:{marginTop:16},onClick:()=>{b({}),l(!0)},children:"+ Add Product"}),a&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>{l(!1),b(null)},children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:480,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>{l(!1),b(null)},style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)("div",{style:{marginBottom:"1rem",fontWeight:600},children:d&&d._id?`Edit Product: ${d.name}`:"Add Product"}),Object(c.jsx)(P,{product:d,onClose:()=>{l(!1),b(null)},onProductUpdated:Me,shopId:null===n||void 0===n?void 0:n.shopId,managerId:null===n||void 0===n?void 0:n._id})]})}),a&&"string"!==typeof a&&d&&!d.delete&&!d.view&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>{l(!1),b(null)},children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:500,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>{l(!1),b(null)},style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)(P,{user:n,product:d,onProductAdded:Me})]})}),d&&d.delete&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>{b(null)},children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:400,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>b(null),style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)("h3",{children:"Delete Product"}),Object(c.jsxs)("p",{children:["Are you sure you want to delete ",Object(c.jsx)("b",{children:d.name}),"?"]}),Object(c.jsx)("button",{onClick:()=>{et(d._id),b(null)},style:{background:"#e74c3c",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600,marginRight:12},children:"Delete"}),Object(c.jsx)("button",{onClick:()=>b(null),style:{background:"#636e72",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Cancel"})]})}),d&&d.view&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>{b(null)},children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:400,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>b(null),style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)("h3",{children:"Product Details"}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Name:"})," ",d.name]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Category:"})," ",d.category]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Price:"})," $",d.price]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Stock:"})," ",d.stock]}),Object(c.jsx)("button",{onClick:()=>b(null),style:{background:"#636e72",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Close"})]})})]});case"sellers":const E=m.filter(e=>e.username.toLowerCase().includes(ce.toLowerCase())||e.email.toLowerCase().includes(ce.toLowerCase())),L=Math.ceil(E.length/8),D=E.slice(8*(be-1),8*be),$=async e=>{Oe("");try{await j.a.post(`${q}/auth/subadmin/sellers/${e}/reset-password`,{},{headers:{Authorization:`Bearer ${n.token}`}}),Oe("Password reset! New password sent to seller email."),xe(null)}catch(t){Oe("Error resetting password.")}},M=async e=>{pe(e)},F=e=>e.active?"Active":"Inactive";return Object(c.jsxs)("div",{className:"future-card",style:{padding:"1.5rem",marginBottom:32},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"My Sellers"}),Object(c.jsxs)("form",{onSubmit:Ve,style:{marginBottom:18,display:"flex",gap:8,alignItems:"center"},children:[Object(c.jsx)("input",{name:"username",value:_e.username,onChange:Je,placeholder:"Username",required:!0,style:{width:120}}),Object(c.jsx)("input",{name:"email",value:_e.email,onChange:Je,placeholder:"Email",required:!0,style:{width:180}}),Object(c.jsx)("input",{name:"password",type:"password",value:_e.password,onChange:Je,placeholder:"Password",required:!0,style:{width:120}}),Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:16,alignItems:"center",minWidth:320},children:[Object(c.jsxs)("label",{title:"Allow seller to add new products",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canAddProducts",checked:_e.privileges.canAddProducts,onChange:Je,disabled:"subadmin"===(null===n||void 0===n?void 0:n.role)&&!ot.canAddProducts})," Add Products"]}),Object(c.jsxs)("label",{title:"Allow seller to edit their products",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canEditProducts",checked:_e.privileges.canEditProducts,onChange:Je,disabled:"subadmin"===(null===n||void 0===n?void 0:n.role)&&!ot.canEditProducts})," Edit Products"]}),Object(c.jsxs)("label",{title:"Allow seller to delete their products",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canDeleteProducts",checked:_e.privileges.canDeleteProducts,onChange:Je,disabled:"subadmin"===(null===n||void 0===n?void 0:n.role)&&!ot.canDeleteProducts})," Delete Products"]}),Object(c.jsxs)("label",{title:"Allow seller to view orders for their products",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canViewOrders",checked:_e.privileges.canViewOrders,onChange:Je,disabled:"subadmin"===(null===n||void 0===n?void 0:n.role)&&!ot.canViewOrders})," View Orders"]}),Object(c.jsxs)("label",{title:"Allow seller to manage their profile (change password)",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canManageProfile",checked:_e.privileges.canManageProfile,onChange:Je,disabled:"subadmin"===(null===n||void 0===n?void 0:n.role)&&!ot.canManageProfile})," Manage Profile"]})]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create Seller"})]}),He&&Object(c.jsx)("div",{style:{color:"#00b894",marginBottom:10},children:He}),Object(c.jsx)("input",{type:"text",value:ce,onChange:e=>{de(e.target.value),je(1)},placeholder:"Search by username or email",style:{marginBottom:12,width:220}}),Object(c.jsxs)("div",{style:{marginBottom:10},children:[Object(c.jsx)("button",{disabled:1===be,onClick:()=>je(be-1),style:{marginRight:8},children:"Prev"}),Object(c.jsxs)("span",{children:["Page ",be," of ",L]}),Object(c.jsx)("button",{disabled:be===L,onClick:()=>je(be+1),style:{marginLeft:8},children:"Next"})]}),g?Object(c.jsx)("div",{children:"Loading sellers..."}):Object(c.jsxs)("table",{className:"future-table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Username"}),Object(c.jsx)("th",{children:"Email"}),Object(c.jsx)("th",{children:"Status"}),Object(c.jsx)("th",{children:"Products"}),Object(c.jsx)("th",{children:"Actions"})]})}),Object(c.jsx)("tbody",{children:D.map(e=>{var t;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.username}),Object(c.jsx)("td",{children:e.email}),Object(c.jsx)("td",{children:F(e)}),Object(c.jsx)("td",{children:null!==(t=he[e._id])&&void 0!==t?t:"-"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("button",{className:"btn btn-secondary",style:{marginRight:8},onClick:()=>we(e._id),children:"Edit"}),Object(c.jsx)("button",{className:"btn btn-outline",style:{color:"red",marginRight:8},onClick:()=>ve(e._id),children:"Delete"}),Object(c.jsx)("button",{className:"btn btn-info",style:{marginRight:8},onClick:()=>M(e),children:"View Products"}),Object(c.jsx)("button",{className:"btn btn-warning",onClick:()=>xe(e._id),children:"Reset Password"})]})]},e._id)})})]}),ye&&Object(c.jsx)("div",{className:"future-modal-overlay",onClick:()=>ve(null),children:Object(c.jsxs)("div",{className:"future-modal-content",onClick:e=>e.stopPropagation(),children:[Object(c.jsx)("button",{className:"future-modal-close",onClick:()=>ve(null),children:"\xd7"}),Object(c.jsx)("div",{style:{marginBottom:"1rem",fontWeight:600},children:"Confirm Delete"}),Object(c.jsx)("div",{children:"Are you sure you want to delete this seller?"}),Object(c.jsxs)("div",{style:{display:"flex",gap:12,marginTop:12},children:[Object(c.jsx)("button",{className:"btn btn-danger",onClick:()=>{(async e=>{if(window.confirm("Delete this user?"))try{await j.a.delete(`${q}/auth/subadmin/sellers/${e}`,{headers:{Authorization:`Bearer ${n.token}`}}),p(m.filter(t=>t._id!==e))}catch(t){w("Error deleting user.")}})(ye),ve(null)},children:"Delete"}),Object(c.jsx)("button",{className:"btn",onClick:()=>ve(null),children:"Cancel"})]})]})}),Se&&Object(c.jsx)("div",{className:"future-modal-overlay",onClick:()=>we(null),children:Object(c.jsxs)("div",{className:"future-modal-content",onClick:e=>e.stopPropagation(),children:[Object(c.jsx)("button",{className:"future-modal-close",onClick:()=>we(null),children:"\xd7"}),Object(c.jsx)("div",{style:{marginBottom:"1rem",fontWeight:600},children:"Edit Seller"}),Object(c.jsxs)("form",{onSubmit:Fe,children:[Object(c.jsx)("input",{name:"username",value:y.username,onChange:qe,placeholder:"Username",required:!0,style:{marginBottom:12,width:"100%"}}),Object(c.jsx)("input",{name:"email",value:y.email,onChange:qe,placeholder:"Email",required:!0,style:{marginBottom:12,width:"100%"}}),Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:16,alignItems:"center",minWidth:320,marginBottom:12},children:[Object(c.jsxs)("label",{title:"Allow seller to add new products",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canAddProducts",checked:null===(s=null===(x=y.privileges)||void 0===x?void 0:x.canAddProducts)||void 0===s||s,onChange:qe})," Add Products"]}),Object(c.jsxs)("label",{title:"Allow seller to edit their products",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canEditProducts",checked:null===(f=null===(O=y.privileges)||void 0===O?void 0:O.canEditProducts)||void 0===f||f,onChange:qe})," Edit Products"]}),Object(c.jsxs)("label",{title:"Allow seller to delete their products",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canDeleteProducts",checked:null===(v=null===(C=y.privileges)||void 0===C?void 0:C.canDeleteProducts)||void 0===v||v,onChange:qe})," Delete Products"]}),Object(c.jsxs)("label",{title:"Allow seller to view orders for their products",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canViewOrders",checked:null===(N=null===(z=y.privileges)||void 0===z?void 0:z.canViewOrders)||void 0===N||N,onChange:qe})," View Orders"]}),Object(c.jsxs)("label",{title:"Allow seller to manage their profile (change password)",children:[Object(c.jsx)("input",{type:"checkbox",name:"privileges.canManageProfile",checked:null===(B=null===(W=y.privileges)||void 0===W?void 0:W.canManageProfile)||void 0===B||B,onChange:qe})," Manage Profile"]})]}),Object(c.jsxs)("div",{style:{display:"flex",gap:12},children:[Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"}),Object(c.jsx)("button",{type:"button",className:"btn",onClick:()=>we(null),children:"Cancel"})]})]}),S&&Object(c.jsx)("div",{style:{color:"#e74c3c",marginTop:10},children:S})]})}),ge&&Object(c.jsx)("div",{className:"future-modal-overlay",onClick:()=>xe(null),children:Object(c.jsxs)("div",{className:"future-modal-content",onClick:e=>e.stopPropagation(),children:[Object(c.jsx)("button",{className:"future-modal-close",onClick:()=>xe(null),children:"\xd7"}),Object(c.jsx)("div",{style:{marginBottom:"1rem",fontWeight:600},children:"Reset Seller Password"}),Object(c.jsx)("div",{children:"Are you sure you want to reset this seller's password?"}),Object(c.jsxs)("div",{style:{display:"flex",gap:12,marginTop:12},children:[Object(c.jsx)("button",{className:"btn btn-warning",onClick:()=>$(ge),children:"Reset Password"}),Object(c.jsx)("button",{className:"btn",onClick:()=>xe(null),children:"Cancel"})]}),fe&&Object(c.jsx)("div",{style:{color:"#00b894",marginTop:10},children:fe})]})}),me&&Object(c.jsx)("div",{className:"future-modal-overlay",onClick:()=>pe(null),children:Object(c.jsxs)("div",{className:"future-modal-content",onClick:e=>e.stopPropagation(),children:[Object(c.jsx)("button",{className:"future-modal-close",onClick:()=>pe(null),children:"\xd7"}),Object(c.jsxs)("div",{style:{marginBottom:"1rem",fontWeight:600},children:["Products for ",me.username]}),Object(c.jsx)("div",{children:"Feature coming soon: manage seller's products here."})]})})]});case"reports":const _=o.reduce((e,t)=>e+(Number(t.revenue)||0),0);return Object(c.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:"1.5rem",boxShadow:"0 2px 8px rgba(44,62,80,0.06)",marginBottom:32},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"My Product Reports"}),Object(c.jsxs)("div",{style:{marginBottom:10},children:["Total Revenue: ",Object(c.jsxs)("span",{style:{color:"#00b894",fontWeight:700},children:["ETB ",_.toLocaleString()]})]}),Object(c.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:8},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{style:{background:"#f4f4f4"},children:[Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Product"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Revenue"})]})}),Object(c.jsx)("tbody",{children:o.map(e=>Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{style:{padding:8,border:"1px solid #eee"},children:e.name}),Object(c.jsxs)("td",{style:{padding:8,border:"1px solid #eee"},children:["ETB ",Number(e.revenue||0).toLocaleString()]})]},e._id))})]})]});case"orders":return"user"!==(null===n||void 0===n?void 0:n.role)||tt.canViewOrders?Object(c.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:"1.5rem",boxShadow:"0 2px 8px rgba(44,62,80,0.06)",marginBottom:32},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Orders"}),0===ae.length?Object(c.jsx)("div",{style:{color:"#888"},children:"No orders found."}):Object(c.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:8},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{style:{background:"#f4f4f4"},children:[Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Order ID"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Buyer"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Total"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Status"}),Object(c.jsx)("th",{style:{padding:8,border:"1px solid #eee"},children:"Created"})]})}),Object(c.jsx)("tbody",{children:ae.map(e=>{var t,o,i,r,n;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{style:{padding:8,border:"1px solid #eee"},children:e._id}),Object(c.jsx)("td",{style:{padding:8,border:"1px solid #eee"},children:(null===(t=e.buyer)||void 0===t?void 0:t.username)||(null===(o=e.buyer)||void 0===o?void 0:o.email)||"N/A"}),Object(c.jsxs)("td",{style:{padding:8,border:"1px solid #eee"},children:["ETB ",null!==(i=null===(r=e.total)||void 0===r||null===(n=r.toLocaleString)||void 0===n?void 0:n.call(r))&&void 0!==i?i:0]}),Object(c.jsx)("td",{style:{padding:8,border:"1px solid #eee"},children:e.status}),Object(c.jsx)("td",{style:{padding:8,border:"1px solid #eee"},children:e.createdAt?new Date(e.createdAt).toLocaleString():""})]},e._id)})})]})]}):Object(c.jsx)("div",{style:{color:"#888",textAlign:"center",padding:32},children:"You do not have privilege to view orders."});case"ratings":return Object(c.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:"1.5rem",boxShadow:"0 2px 8px rgba(44,62,80,0.06)",marginBottom:32},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Ratings"}),Object(c.jsx)("div",{style:{color:"#888"},children:"Ratings and reviews coming soon."})]});case"comments":return Object(c.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:"1.5rem",boxShadow:"0 2px 8px rgba(44,62,80,0.06)",marginBottom:32},children:[Object(c.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:"Comments"}),Object(c.jsx)("div",{style:{color:"#888"},children:"Comments and feedback coming soon."})]});case"products-managed":if("products-managed"===h)return Object(c.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:"2rem",boxShadow:"0 2px 8px rgba(44,62,80,0.06)"},children:[Object(c.jsx)("h2",{style:{fontWeight:700,fontSize:22,marginBottom:18},children:"Products Managed"}),Object(c.jsx)("button",{onClick:()=>l("add"),style:{marginBottom:18,background:"#00b894",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Add Product"}),0===k.length?Object(c.jsx)("div",{style:{color:"#888"},children:"No products managed yet."}):Object(c.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{style:{background:"#f8faff"},children:[Object(c.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"Name"}),Object(c.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"Category"}),Object(c.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"Price"}),Object(c.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"Stock"}),Object(c.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"Actions"})]})}),Object(c.jsx)("tbody",{children:k.map(e=>Object(c.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[Object(c.jsx)("td",{style:{padding:"8px"},children:e.name}),Object(c.jsx)("td",{style:{padding:"8px"},children:e.category}),Object(c.jsxs)("td",{style:{padding:"8px"},children:["$",e.price]}),Object(c.jsx)("td",{style:{padding:"8px"},children:e.stock}),Object(c.jsxs)("td",{style:{padding:"8px"},children:[Object(c.jsx)("button",{onClick:()=>b(e),style:{marginRight:8,background:"#0984e3",color:"#fff",border:"none",borderRadius:4,padding:"4px 10px"},children:"Edit"}),Object(c.jsx)("button",{onClick:()=>b({...e,delete:!0}),style:{marginRight:8,background:"#e74c3c",color:"#fff",border:"none",borderRadius:4,padding:"4px 10px"},children:"Delete"}),Object(c.jsx)("button",{onClick:()=>b({...e,view:!0}),style:{background:"#636e72",color:"#fff",border:"none",borderRadius:4,padding:"4px 10px"},children:"View"})]})]},e._id))})]}),"add"===a&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>l(!1),children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:500,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>l(!1),style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)(P,{user:n,onProductAdded:()=>{l(!1),u("products-managed")}})]})}),a&&"string"!==typeof a&&d&&!d.delete&&!d.view&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>{l(!1),b(null)},children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:500,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>{l(!1),b(null)},style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)(P,{user:n,product:d,onProductAdded:Me})]})}),d&&d.delete&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>{b(null)},children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:400,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>b(null),style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)("h3",{children:"Delete Product"}),Object(c.jsxs)("p",{children:["Are you sure you want to delete ",Object(c.jsx)("b",{children:d.name}),"?"]}),Object(c.jsx)("button",{onClick:()=>{et(d._id),b(null)},style:{background:"#e74c3c",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600,marginRight:12},children:"Delete"}),Object(c.jsx)("button",{onClick:()=>b(null),style:{background:"#636e72",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Cancel"})]})}),d&&d.view&&Object(c.jsx)("div",{className:"modal-overlay",onClick:()=>{b(null)},children:Object(c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:400,width:"95vw",borderRadius:16,boxShadow:"0 8px 32px rgba(44,62,80,0.18)",padding:"2rem",position:"relative"},children:[Object(c.jsx)("button",{className:"modal-close",onClick:()=>b(null),style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700,zIndex:10},children:"\xd7"}),Object(c.jsx)("h3",{children:"Product Details"}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Name:"})," ",d.name]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Category:"})," ",d.category]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Price:"})," $",d.price]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"Stock:"})," ",d.stock]}),Object(c.jsx)("button",{onClick:()=>b(null),style:{background:"#636e72",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:600},children:"Close"})]})})]});break;default:return null}})(),"dashboard"===h&&Object(c.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:"1.5rem",marginBottom:32,boxShadow:"0 2px 8px rgba(44,62,80,0.06)"},children:[Object(c.jsx)("div",{style:{fontWeight:700,fontSize:18,marginBottom:10},children:"Recent Activity"}),Object(c.jsx)("ul",{children:0===Z.length?Object(c.jsx)("li",{style:{color:"#888"},children:"No recent activity."}):Z.map((e,t)=>Object(c.jsxs)("li",{children:[Object(c.jsxs)("span",{style:{fontWeight:600},children:[e.time,":"]})," ",e.action]},t))})]})]})]})]}),Re.show&&Object(c.jsx)("div",{style:{position:"fixed",top:24,right:24,zIndex:9999,background:"success"===Re.type?"#00b894":"#e74c3c",color:"#fff",padding:"14px 28px",borderRadius:8,fontWeight:700,fontSize:16,boxShadow:"0 2px 12px #23252633",transition:"all 0.2s"},children:Re.message}),Object(c.jsx)("style",{children:"\n          @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n        "})]})})};class U extends r.a.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?Object(c.jsxs)("div",{style:{padding:32,color:"red",background:"#fff",borderRadius:12,margin:32},children:[Object(c.jsx)("h2",{children:"Something went wrong in the dashboard."}),Object(c.jsx)("pre",{children:this.state.error&&this.state.error.toString()})]}):this.props.children}}function H(e){return Object(c.jsx)(U,{children:Object(c.jsx)(_,{...e})})}var Y=()=>{const[e,t]=Object(i.useState)(null),[o,r]=Object(i.useState)(!0),[n,s]=Object(i.useState)("");return Object(i.useEffect)(()=>{const e=localStorage.getItem("token");if(!e)return s("You must be logged in to view your profile."),void r(!1);j.a.get("/api/auth/me",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{t(e.data),r(!1)}).catch(e=>{var t,o,i,n;s((null===(t=e.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||(null===(i=e.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.error)||e.message||"Failed to load profile."),r(!1)})},[]),o?Object(c.jsx)("div",{style:{textAlign:"center",marginTop:40},children:"Loading profile..."}):n?Object(c.jsx)("div",{style:{color:"#e74c3c",textAlign:"center",marginTop:40},children:n}):e?Object(c.jsxs)("div",{style:{maxWidth:600,margin:"3rem auto",background:"#fff",borderRadius:18,boxShadow:"0 4px 24px rgba(44,62,80,0.10)",padding:"2.5rem 2rem",fontFamily:"Poppins, Arial, sans-serif",position:"relative"},children:[Object(c.jsx)("h2",{style:{fontWeight:700,fontSize:"2rem",marginBottom:32,color:"#222"},children:"My Profile"}),Object(c.jsxs)("div",{style:{fontSize:"1.2rem",marginBottom:18},children:[Object(c.jsx)("b",{children:"Name:"})," ",e.username||e.name]}),Object(c.jsxs)("div",{style:{fontSize:"1.2rem",marginBottom:18},children:[Object(c.jsx)("b",{children:"Email:"})," ",e.email]}),e.phone&&Object(c.jsxs)("div",{style:{fontSize:"1.2rem",marginBottom:18},children:[Object(c.jsx)("b",{children:"Phone:"})," ",e.phone]}),e.city&&Object(c.jsxs)("div",{style:{fontSize:"1.2rem",marginBottom:18},children:[Object(c.jsx)("b",{children:"City:"})," ",e.city]}),Object(c.jsxs)("div",{style:{fontSize:"1.2rem",marginBottom:18},children:[Object(c.jsx)("b",{children:"Role:"})," ",e.role||"User"]})]}):null};var J=()=>{const{token:e}=Object(l.i)(),t=Object(l.g)(),[o,r]=Object(i.useState)(""),[n,s]=Object(i.useState)(""),[a,d]=Object(i.useState)(!1),[b,h]=Object(i.useState)(""),[u,m]=Object(i.useState)(!1);return Object(c.jsxs)("div",{className:"future-login-bg",style:{minHeight:"100vh",background:"radial-gradient(ellipse at 60% 40%, #232526 0%, #414345 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[Object(c.jsx)("div",{style:{position:"absolute",top:"-10%",left:"-10%",width:300,height:300,background:"linear-gradient(135deg, #00b89499 0%, #0984e399 100%)",filter:"blur(60px)",borderRadius:"50%",zIndex:0,opacity:.7,animation:"float1 8s ease-in-out infinite alternate"}}),Object(c.jsx)("div",{style:{position:"absolute",bottom:"-10%",right:"-10%",width:320,height:320,background:"linear-gradient(135deg, #3a6cf699 0%, #23252699 100%)",filter:"blur(70px)",borderRadius:"50%",zIndex:0,opacity:.6,animation:"float2 10s ease-in-out infinite alternate"}}),Object(c.jsx)("style",{children:"\n        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Roboto:wght@400;500;700&display=swap');\n        .future-login-card { box-sizing: border-box; font-family: 'Montserrat', 'Roboto', Arial, sans-serif; }\n        .future-login-card input { box-sizing: border-box; width: 100%; background: none; border: 1.5px solid #bbb; border-radius: 8px; padding: 18px 40px 18px 12px; font-size: 17px; color: #232526; outline: none; transition: border 0.2s; margin: 0; display: block; font-family: 'Roboto', 'Montserrat', Arial, sans-serif; font-weight: 500; letter-spacing: 0.02em; }\n        .future-login-card form { width: 100%; box-sizing: border-box; }\n        .future-login-card label { position: absolute; left: 18px; top: 18px; color: #888; font-size: 16px; pointer-events: none; transition: all 0.18s; background: none; font-family: 'Montserrat', Arial, sans-serif; font-weight: 700; letter-spacing: 0.03em; }\n        .future-login-card input:focus ~ label, .future-login-card input:not(:placeholder-shown) ~ label { top: 2px; left: 12px; font-size: 13px; color: #00b894; background: #fff8; padding: 0 4px; font-family: 'Montserrat', Arial, sans-serif; font-weight: 900; }\n        .future-login-card .eye-btn { position: absolute; right: 12px; top: 16px; background: none; border: none; cursor: pointer; color: #888; font-size: 20px; }\n        .future-login-card .login-btn { width: 100%; background: linear-gradient(90deg, #00b894 0%, #0984e3 100%); color: #fff; border: none; border-radius: 8px; padding: 14px 0; font-size: 19px; font-family: 'Montserrat', 'Roboto', Arial, sans-serif; font-weight: 900; margin-top: 18px; box-shadow: 0 2px 12px #00b89433; transition: transform 0.12s, box-shadow 0.12s; letter-spacing: 0.04em; }\n        .future-login-card .login-btn:hover { transform: translateY(-2px) scale(1.03); box-shadow: 0 4px 18px #0984e344; }\n        .future-login-card .login-btn:active { transform: scale(0.98); }\n        .future-login-card .error-msg { color: #e74c3c; margin-top: 16px; display: flex; align-items: center; font-size: 15px; font-weight: 700; font-family: 'Roboto', Arial, sans-serif; letter-spacing: 0.02em; }\n        .future-login-card .success-msg { color: #00b894; margin-top: 16px; font-size: 15px; font-weight: 700; font-family: 'Roboto', Arial, sans-serif; letter-spacing: 0.02em; }\n      "}),Object(c.jsxs)("div",{className:"future-login-card",style:{maxWidth:340,width:"100%",margin:"0 auto",background:"rgba(255,255,255,0.18)",borderRadius:18,boxShadow:"0 8px 32px 0 rgba(44,62,80,0.18)",padding:"2rem 1.2rem 1.2rem 1.2rem",backdropFilter:"blur(16px)",border:"1.5px solid rgba(255,255,255,0.22)",position:"relative",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"center",boxSizing:"border-box",fontFamily:"Montserrat, Roboto, Arial, sans-serif"},children:[Object(c.jsx)("div",{style:{fontWeight:900,fontSize:28,color:"#232526",letterSpacing:.04,marginBottom:8,textAlign:"center",fontFamily:"Montserrat, Arial, sans-serif"},children:"Reset Password"}),Object(c.jsx)("div",{style:{fontWeight:500,fontSize:16,color:"#888",marginBottom:24,textAlign:"center",fontFamily:"Roboto, Arial, sans-serif"},children:"Enter your new password below."}),Object(c.jsxs)("form",{onSubmit:async i=>{if(i.preventDefault(),h(""),o&&n)if(o===n){m(!0);try{await j.a.post("/api/auth/reset-password",{token:e,password:o});h("Password reset successful! You can now log in."),setTimeout(()=>t.push("/subadmin"),1800)}catch(a){var r,s;h((null===(r=a.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Error resetting password.")}m(!1)}else h("Passwords do not match.");else h("Please enter and confirm your new password.")},autoComplete:"off",children:[Object(c.jsxs)("div",{style:{position:"relative",marginBottom:24},children:[Object(c.jsx)("input",{name:"password",id:"reset-password",type:a?"text":"password",value:o,onChange:e=>r(e.target.value),required:!0,placeholder:" ",autoComplete:"new-password",disabled:u}),Object(c.jsx)("label",{htmlFor:"reset-password",children:"New Password"}),Object(c.jsx)("button",{type:"button",className:"eye-btn",tabIndex:-1,"aria-label":"Show password",onClick:()=>d(e=>!e),style:{outline:"none"},children:a?Object(c.jsxs)("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:[Object(c.jsx)("path",{d:"M1 1l22 22"}),Object(c.jsx)("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-5 0-9.27-3.11-11-7 1.21-2.71 3.19-4.96 5.66-6.32"}),Object(c.jsx)("path",{d:"M9.53 9.53A3.5 3.5 0 0 0 12 15.5c1.38 0 2.63-.7 3.35-1.77"}),Object(c.jsx)("path",{d:"M14.47 14.47A3.5 3.5 0 0 1 9.53 9.53"})]}):Object(c.jsxs)("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:[Object(c.jsx)("ellipse",{cx:"12",cy:"12",rx:"10",ry:"7"}),Object(c.jsx)("circle",{cx:"12",cy:"12",r:"3.5"})]})})]}),Object(c.jsxs)("div",{style:{position:"relative",marginBottom:24},children:[Object(c.jsx)("input",{name:"confirm",id:"reset-confirm",type:a?"text":"password",value:n,onChange:e=>s(e.target.value),required:!0,placeholder:" ",autoComplete:"new-password",disabled:u}),Object(c.jsx)("label",{htmlFor:"reset-confirm",children:"Confirm Password"})]}),Object(c.jsx)("button",{type:"submit",className:"login-btn",disabled:u,children:u?"Resetting...":"Reset Password"})]}),b&&Object(c.jsx)("div",{className:b.includes("success")?"success-msg":"error-msg",children:b})]})]})};var V=()=>{const[e,t]=Object(i.useState)([]),[o,r]=Object(i.useState)(!0),[n,s]=Object(i.useState)(null);return Object(i.useEffect)(()=>{r(!0),j.a.get("/api/wishlist").then(e=>t(e.data)).catch(()=>s("Failed to load wishlist.")).finally(()=>r(!1))},[]),o?Object(c.jsx)("div",{style:{padding:"2rem"},children:Object(c.jsx)("h2",{children:"Loading wishlist..."})}):n?Object(c.jsx)("div",{style:{padding:"2rem"},children:Object(c.jsx)("h2",{children:n})}):0===e.length?Object(c.jsx)("div",{style:{padding:"2rem"},children:Object(c.jsx)("h2",{children:"Your wishlist is empty."})}):Object(c.jsxs)("div",{style:{maxWidth:800,margin:"2rem auto",background:"#fff",borderRadius:8,boxShadow:"0 2px 8px #eee",padding:24},children:[Object(c.jsx)("h2",{children:"Your Wishlist"}),Object(c.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.map(e=>Object(c.jsx)("li",{style:{marginBottom:16,borderBottom:"1px solid #eee",paddingBottom:8},children:Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[e.image&&Object(c.jsx)("img",{src:e.image,alt:e.name,style:{width:60,height:60,objectFit:"cover",borderRadius:4,marginRight:16}}),Object(c.jsxs)("div",{style:{flex:1},children:[Object(c.jsx)("strong",{children:e.name}),Object(c.jsx)("br",{}),Object(c.jsxs)("span",{children:["Price: $",e.price]})]})]})},e._id))})]})};var Z=()=>{const[e,t]=Object(i.useState)([]),[o,r]=Object(i.useState)(!0),[n,s]=Object(i.useState)("");return Object(i.useEffect)(()=>{const e=localStorage.getItem("token");j.a.get("http://localhost:5000/api/orders/my",{headers:{Authorization:`Bearer ${e}`}}).then(e=>t(e.data)).catch(e=>s("Failed to load orders.")).finally(()=>r(!1))},[]),o?Object(c.jsx)("div",{style:{padding:"2rem"},children:"Loading orders..."}):n?Object(c.jsx)("div",{style:{padding:"2rem",color:"red"},children:n}):0===e.length?Object(c.jsx)("div",{style:{padding:"2rem"},children:Object(c.jsx)("h2",{children:"No orders found."})}):Object(c.jsxs)("div",{style:{maxWidth:900,margin:"2rem auto",background:"#fff",borderRadius:8,boxShadow:"0 2px 8px #eee",padding:24},children:[Object(c.jsx)("h2",{children:"Your Orders"}),Object(c.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.map(e=>Object(c.jsxs)("li",{style:{marginBottom:16,borderBottom:"1px solid #eee",paddingBottom:8},children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Order ID:"})," ",e._id]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Status:"})," ",e.status]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Total:"})," $",e.total]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Date:"})," ",e.createdAt?new Date(e.createdAt).toLocaleString():""]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Products:"}),Object(c.jsx)("ul",{children:e.products.map((e,t)=>{var o;return Object(c.jsxs)("li",{children:[(null===(o=e.product)||void 0===o?void 0:o.name)||"Product"," x ",e.quantity," @ ",e.price]},t)})})]})]},e._id))})]})};var G=()=>{const[e,t]=Object(i.useState)({}),[o,r]=Object(i.useState)([]);return Object(i.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user"))||{};t(e),fetch("/api/orders?userId="+e._id).then(e=>e.json()).then(e=>r(e)).catch(()=>r([]))},[]),Object(c.jsxs)("div",{className:"dashboard-container",children:[Object(c.jsx)("h2",{children:"User Dashboard"}),Object(c.jsxs)("div",{className:"profile-section",children:[Object(c.jsx)("h3",{children:"Profile Info"}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Name:"})," ",e.name]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Email:"})," ",e.email]})]}),Object(c.jsxs)("div",{className:"orders-section",children:[Object(c.jsx)("h3",{children:"Order Summary"}),0===o.length?Object(c.jsx)("p",{children:"No orders found."}):Object(c.jsx)("ul",{children:o.map(e=>Object(c.jsxs)("li",{children:[Object(c.jsxs)("strong",{children:["Order #",e._id]})," - ",e.status," - ",e.total," USD"]},e._id))})]}),Object(c.jsx)(d,{})]})};o(81);function Q(e){let{children:t,onClose:o}=e;const n=Object(i.useRef)(null),[s,a]=Object(i.useState)(!1),[l,d]=Object(i.useState)(0),[b,j]=Object(i.useState)(0),h=e=>{if(!s)return;const t=e.clientY-l;n.current.scrollTop=b+2*t},u=()=>{a(!1),document.body.style.userSelect=""};return r.a.useEffect(()=>(s?(window.addEventListener("mousemove",h),window.addEventListener("mouseup",u)):(window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",u)),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",u)}),[s]),Object(c.jsxs)("div",{style:{background:"#fff",padding:"2.5rem 2rem 2rem",borderRadius:12,minWidth:370,maxWidth:"95vw",position:"fixed",boxShadow:"0 8px 32px rgba(44,62,80,0.18)",animation:"modalSlideIn .35s cubic-bezier(.4,2,.6,1)",left:"50%",top:"15%",transform:"translate(-50%, 0)",zIndex:2100},children:[Object(c.jsx)("div",{className:"modal-vertical-bar",style:{position:"absolute",top:18,right:0,width:8,height:"calc(100% - 36px)",background:"linear-gradient(180deg, #e74c3c 0%, #2980ef 100%)",borderRadius:4,cursor:"ns-resize",zIndex:2200},title:"Slide bar",onMouseDown:e=>{a(!0),d(e.clientY),j(n.current.scrollTop),document.body.style.userSelect="none"}}),Object(c.jsx)("button",{onClick:o,style:{position:"absolute",top:18,right:18,background:"none",border:"none",fontSize:28,color:"#888",cursor:"pointer",fontWeight:700},children:"\xd7"}),Object(c.jsx)("div",{ref:n,style:{maxHeight:"60vh",overflowY:"auto",paddingRight:12},children:t})]})}var X=function(){const[e,t]=Object(i.useState)(!1),[o,r]=Object(i.useState)(!1),[n,s]=Object(i.useState)("login"),[d,b]=Object(i.useState)(()=>(JSON.parse(localStorage.getItem("cart"))||[]).reduce((e,t)=>e+(t.quantity||1),0)),[j,h]=Object(i.useState)(!1),[u,m]=Object(i.useState)({make:"",model:"",year:"",search:""}),[p,x]=Object(i.useState)(0),S=e=>{s(e),r(!0)},k=()=>{h(!0)},B=()=>{x(e=>e+1)};return Object(c.jsxs)(a.a,{children:[Object(c.jsx)(l.b,{path:["/admin","/subadmin"],render:()=>null}),Object(c.jsx)(l.b,{path:["/","/about","/contact","/post","/profile","/cart","/wishlist","/orders","/dashboard"],render:()=>Object(c.jsx)(g,{onLoginClick:()=>S("login"),onRegisterClick:()=>S("register"),onCartClick:()=>t(!0),onCartCount:d,onChatClick:k,filters:u,setFilters:m,onSearch:B})}),Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{exact:!0,path:"/",children:Object(c.jsx)(y,{onAddToCart:()=>{t(!0)},cartCount:d,setCartCount:b})}),Object(c.jsx)(l.b,{path:"/about",children:Object(c.jsx)(N,{})}),Object(c.jsx)(l.b,{path:"/contact",children:Object(c.jsx)(z,{})}),Object(c.jsx)(l.b,{path:"/post",children:Object(c.jsx)(E,{})}),Object(c.jsx)(l.b,{path:"/profile",children:Object(c.jsx)(Y,{})}),Object(c.jsx)(l.b,{path:"/admin",children:Object(c.jsx)(M,{})}),Object(c.jsx)(l.b,{path:"/cart",children:Object(c.jsx)(C,{})}),Object(c.jsx)(l.b,{path:"/reset-password/:token",children:Object(c.jsx)(J,{})}),Object(c.jsx)(l.b,{path:"/subadmin",children:Object(c.jsx)(H,{})}),Object(c.jsx)(l.b,{path:"/checkout",children:Object(c.jsx)(O,{})}),Object(c.jsx)(l.b,{path:"/wishlist",children:Object(c.jsx)(V,{})}),Object(c.jsx)(l.b,{path:"/orders",children:Object(c.jsx)(Z,{})}),Object(c.jsx)(l.b,{path:"/dashboard",children:Object(c.jsx)(G,{})})]}),e&&Object(c.jsx)("div",{className:"cart-sidebar-overlay",onClick:()=>t(!1),children:Object(c.jsx)(f,{onClose:()=>t(!1),onCartCountChange:b})}),o&&Object(c.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:[Object(c.jsx)(Q,{onClose:()=>{r(!1),window.location.href="/"},children:"login"===n?Object(c.jsx)(v,{onSuccess:()=>r(!1),onSwitchToRegister:()=>s("register")}):Object(c.jsx)(w,{onSuccess:()=>r(!1),onSwitchToLogin:()=>s("login")})}),Object(c.jsx)("style",{children:"\n            @keyframes modalSlideIn {\n              from { transform: translateY(100vh); opacity: 0; }\n              to { transform: translateY(0); opacity: 1; }\n            }\n          "})]}),j&&Object(c.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(44,62,80,0.18)",zIndex:2200,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(c.jsxs)(Q,{onClose:()=>h(!1),children:[Object(c.jsx)("h2",{style:{marginBottom:12},children:"Chat"}),Object(c.jsx)("div",{style:{color:"#888"},children:"To chat with a seller, please open a product detail and use the chat button for user-to-user products."})]})})]})};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(X,{})}),document.getElementById("root"))},34:function(e,t,o){},81:function(e,t,o){}},[[220,1,2]]]);
//# sourceMappingURL=main.60929cf2.chunk.js.map