{"version":3,"sources":["components/Footer.js","components/SearchBar.js","components/Header.js","components/ProductList.js","components/Cart.js","components/Checkout.js","pages/Home.js","components/Auth.js","components/Register.js","api/orderApi.js","pages/CartPage.js","pages/About.js","pages/Contact.js","components/ProductForm.js","pages/Post.js","pages/AdminPage.js","pages/SubAdminDashboard.js","pages/Profile.js","pages/ResetPassword.js","pages/Wishlist.js","pages/Orders.js","pages/UserDashboard.js","App.js","index.js"],"names":["Footer","_jsxs","style","background","color","padding","textAlign","marginTop","borderRadius","children","maxWidth","margin","display","justifyContent","flexWrap","gap","alignItems","flex","minWidth","_jsx","fontWeight","marginBottom","borderBottom","paddingBottom","fontSize","href","className","listStyle","textDecoration","marginRight","border","borderTop","position","bottom","right","width","height","boxShadow","cursor","zIndex","makes","models","Toyota","Honda","Ford","BMW","Mercedes","years","Array","from","length","_","i","SearchBar","_ref","filters","setFilters","onSearch","handleChange","e","target","name","value","make","onChange","map","model","disabled","year","type","placeholder","search","onClick","Header","onLoginClick","onRegisterClick","onCartClick","onCartCount","onChatClick","location","useLocation","isLoggedIn","setIsLoggedIn","useState","userEmail","setUserEmail","notifications","setNotifications","notifCount","setNotifCount","showNotifDropdown","setShowNotifDropdown","darkMode","setDarkMode","useEffect","localStorage","getItem","notifs","JSON","parse","filter","n","read","interval","setInterval","clearInterval","user","role","adminNotifs","document","body","pathname","handleLogout","removeItem","window","reload","_Fragment","marginLeft","title","onNotifClick","v","top","idx","message","ProductList","_selectedProduct$pric","_selectedProduct$owne","_selectedProduct$owne2","_selectedProduct$owne3","_selectedProduct$owne6","_selectedProduct$owne7","searchTrigger","onAddToCart","onCartCountChange","products","setProducts","loading","setLoading","error","setError","sort","setSort","category","setCategory","cartCount","setCartCount","reduce","sum","item","quantity","userRole","setUserRole","params","axios","get","then","res","data","catch","err","finally","filtered","p","toLowerCase","includes","a","b","price","Date","createdAt","addToCart","product","cart","existing","find","_id","stock","push","setItem","stringify","updateCartCount","selectedProduct","setSelectedProduct","showDetails","setShowDetails","closeDetails","showChat","setShowChat","chatMessages","setChatMessages","chatText","setChatText","chatFile","setChatFile","chatLoading","setChatLoading","fetchChatMessages","async","token","productId","headers","Authorization","handleAddToWishlist","post","alert","id","minHeight","left","letterSpacing","htmlFor","label","opt","cat","gridTemplateColumns","gridColumn","_product$price","overflow","flexDirection","image","src","startsWith","alt","objectFit","borderTopLeftRadius","borderTopRightRadius","maxHeight","textOverflow","description","desc","toLocaleString","undefined","handleDetails","transition","shopId","stopPropagation","opacity","sellerName","owner","username","sellerPhone","phone","_selectedProduct$owne4","open","_selectedProduct$owne5","navigator","clipboard","writeText","sellerEmail","email","_selectedProduct$owne8","overflowY","msg","_msg$from","text","fileUrl","match","rel","accept","files","trim","formData","FormData","append","Cart","onClose","onCheckout","setCart","history","useHistory","storedCart","count","handleStorage","key","updated","newValue","addEventListener","removeEventListener","removeFromCart","updatedCart","updateCartAndCount","updateQuantity","delta","prev","maxQty","newQty","Math","max","min","total","lineHeight","_item$image","minimumFractionDigits","handleCheckout","Checkout","setMessage","toFixed","_productDetails$","_productDetails$$owne","_productDetails$2","_productDetails$3","productDetails","Promise","all","seller","buyer","orderData","console","log","_err$response","_err$response$data","response","Home","setSearchTrigger","showCart","setShowCart","handleAddToCart","handleSearch","show","Auth","onSuccess","onSwitchToRegister","setFormData","password","remember","checked","fontFamily","alignSelf","onSubmit","preventDefault","_res$data$user","currentPath","_err$response2","_err$response2$data","required","outline","boxSizing","API_BASE","Register","onSwitchToLogin","registerType","setRegisterType","confirmPassword","city","terms","shopData","setShopData","shopName","licenseCertificate","tin","address","handleSubmit","formDataObj","Object","entries","forEach","_ref2","_err$response3","_err$response3$data","_err$response4","_err$response4$data","verticalAlign","encType","CartPage","placeOrder","About","Contact","categories","ProductForm","onProductAdded","form","setForm","imageFile","setImageFile","paymentCode","setPaymentCode","paymentMethod","setPaymentMethod","showPayment","setShowPayment","freePostsLeft","setFreePostsLeft","Infinity","React","postCount","fetchPostCount","handleSubmitPaid","getToken","userObj","parsed","_ref3","updateFreePosts","StaticModal","contentRef","useRef","dragging","setDragging","startY","setStartY","startScroll","setStartScroll","handleDrag","deltaY","clientY","current","scrollTop","handleDragEnd","userSelect","animation","transform","onMouseDown","ref","paddingRight","Post","showModal","setShowModal","handleClose","ChartJS","register","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ArcElement","hostname","AdminPage","_products$","_salesTicker$tickerIn","_salesTicker$tickerIn2","users","setUsers","editing","setEditing","userForm","setUserForm","auth","setAuth","login","setLogin","loginError","setLoginError","setToken","productSearch","setProductSearch","userSearch","setUserSearch","editingUser","setEditingUser","editUserForm","setEditUserForm","showPasswordModal","setShowPasswordModal","passwordForm","setPasswordForm","new","confirm","passwordMsg","setPasswordMsg","analytics","setAnalytics","productCount","userCount","totalSales","totalRevenue","activityLog","setActivityLog","notifLoading","setNotifLoading","notifError","setNotifError","showUserDropdown","setShowUserDropdown","showHeaderUserDropdown","setShowHeaderUserDropdown","adminProfile","setAdminProfile","close","handleClickAway","avatar","getElementById","dropdown","contains","productPage","setProductPage","activeUsers","setActiveUsers","salesTicker","setSalesTicker","tickerIndex","setTickerIndex","u","random","heatmapData","acc","Number","sales","heatmapLabels","keys","heatmapValues","values","recentLogins","time","liveStatus","status","toast","setToast","fetchProducts","fetchUsers","fetchAnalytics","fetchActivityLog","fetchShopRequests","fetchOrders","storedToken","timestamp","action","shopRequests","setShopRequests","shopRequestsLoading","setShopRequestsLoading","shopRequestsError","setShopRequestsError","shopRequestActionMsg","setShopRequestActionMsg","viewingRequest","setViewingRequest","atob","split","handleShopRequestAction","extra","arguments","patch","orders","setOrders","ordersLoading","setOrdersLoading","ordersError","setOrdersError","viewingOrder","setViewingOrder","lowStockProducts","salesSummary","totalOrders","topProduct","handleLoginChange","f","handleUserChange","ordersByMonth","fill","revenueByMonth","usersByRole","topProducts","ordersByMonthData","labels","d","setMonth","getMonth","month","datasets","backgroundColor","revenueByMonthData","usersByRoleData","topProductsData","qty","stockStats","outOfStock","lowStock","inStock","revenuePerCategory","newUsersByMonth","revenue","sidebarSection","setSidebarSection","sidebarLinks","icon","FaHome","FaBoxOpen","FaRegListAlt","FaUsers","FaChartBar","FaFileAlt","FaRegBell","FaRegCommentDots","FaCog","loginRole","setLoginRole","handleLogin","endpoint","payload","setTimeout","_err$response6","_err$response6$data","handleUserClick","fetchAdminProfile","handleEditUserChange","handleEditUserSubmit","handleCancelEditUser","paginatedProducts","slice","totalProductPages","ceil","filteredUsers","dm","handleNotifClick","fetchNotifications","toUpperCase","fallback","getProfileFallback","onMouseEnter","currentTarget","onMouseLeave","Bar","options","responsive","plugins","legend","scales","y","beginAtZero","Pie","rawOpacity","safeOpacity","isNaN","l","float","s","rows","csv","join","r","x","String","replace","blob","Blob","url","URL","createObjectURL","createElement","download","click","revokeObjectURL","imageUrl","uploadRes","path","filename","put","sellerId","managerId","uniqueId","productData","now","floor","overflowX","handleEdit","delete","handleDelete","submitData","handleEditUser","_err$response5","_err$response5$data","handleUserDelete","req","ownerName","textTransform","defaultPrivileges","canAddProducts","canEditProducts","canDeleteProducts","canViewOrders","canManageProfile","SubAdminDashboard","_user$username","_user$username$","setUser","showEditModal","setShowEditModal","editProduct","setEditProduct","section","setSection","loadingUsers","setLoadingUsers","userEdit","setUserEdit","userEditForm","setUserEditForm","userMessage","setUserMessage","managedProducts","setManagedProducts","loggingIn","setLoggingIn","showPassword","setShowPassword","showProfileModal","setShowProfileModal","bestSeller","sellerSearch","setSellerSearch","sellerPage","setSellerPage","sellerProductCounts","setSellerProductCounts","viewSellerProducts","setViewSellerProducts","resetSellerId","setResetSellerId","resetSellerMsg","setResetSellerMsg","confirmDeleteId","setConfirmDeleteId","confirmEditId","setConfirmEditId","showForgot","setShowForgot","forgotEmail","setForgotEmail","forgotMsg","setForgotMsg","showToast","sidebarCollapsed","setSidebarCollapsed","filteredSidebarLinks","link","handleResize","innerWidth","userData","results","counts","handleProductUpdated","updatedProduct","handleUserEditChange","privKey","privileges","handleUserEditSubmit","newSeller","setNewSeller","sellerMsg","setSellerMsg","handleNewSellerChange","handleCreateSeller","ids","Boolean","exec","parseInt","generateSellerId","toString","handleProfileClick","handlePasswordChangeInput","handleForgotSubmit","handleDeleteProduct","errorMsg","sellerPrivileges","subadminPrivileges","stockFilter","setStockFilter","sortBy","setSortBy","sortDir","setSortDir","filteredProducts","valA","valB","expandedHistory","setExpandedHistory","isArray","res2","ErrorBoundary","c","whiteSpace","pointerEvents","getFullYear","toISOString","FaBell","size","some","markNotificationRead","notif","currentPassword","newPassword","renderSection","_analytics$totalReven","_analytics$totalReven2","_analytics$totalReven3","_userEditForm$privile","_userEditForm$privile2","_userEditForm$privile3","_userEditForm$privile4","_userEditForm$privile5","_userEditForm$privile6","_userEditForm$privile7","_userEditForm$privile8","_userEditForm$privile9","_userEditForm$privile0","call","statusCounts","canAdd","canEdit","canDelete","borderCollapse","stockHistory","toggleHistory","colSpan","reverse","h","date","change","reason","onProductUpdated","view","filteredSellers","totalPages","pagedSellers","handleResetSellerPassword","handleViewSellerProducts","getSellerStatus","active","_sellerProductCounts$","order","_order$buyer","_order$buyer2","_order$total$toLocale","_order$total","_order$total$toLocale2","Component","constructor","props","super","this","state","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","render","DashboardWithBoundary","Profile","ResetPassword","useParams","setPassword","setConfirm","setMsg","backdropFilter","autoComplete","tabIndex","stroke","strokeWidth","strokeLinecap","strokeLinejoin","viewBox","cx","cy","rx","ry","Wishlist","wishlist","setWishlist","Orders","_item$product","UserDashboard","userInfo","fetch","json","SlideBarModal","App","showAuth","setShowAuth","authMode","setAuthMode","handleAuthClick","mode","handleChatClick","Router","Route","Switch","exact","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.60929cf2.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Footer = () => (\r\n  <footer style={{ background: '#46617a', color: '#fff', padding: '2.5rem 0 1.5rem', textAlign: 'center', marginTop: '2rem', borderRadius: '0 0 10px 10px' }}>\r\n    <div style={{ maxWidth: 1200, margin: '0 auto', display: 'flex', justifyContent: 'space-between', flexWrap: 'wrap', gap: 32, alignItems: 'flex-start' }}>\r\n      <div style={{ flex: 1, minWidth: 220, textAlign: 'left' }}>\r\n        <h3 style={{ fontWeight: 700, marginBottom: 8, borderBottom: '2px solid #e74c3c', display: 'inline-block', paddingBottom: 2 }}>AutoParts Online</h3>\r\n        <p style={{ margin: '10px 0 18px', color: '#e0e6ed', fontSize: 15 }}>Your trusted source for quality automotive spare parts with convenient online shopping and fast delivery.</p>\r\n        <div style={{ display: 'flex', gap: 16 }}>\r\n          <a href=\"#\" style={{ color: '#fff', fontSize: 22 }}><i className=\"fab fa-facebook\"></i></a>\r\n          <a href=\"#\" style={{ color: '#fff', fontSize: 22 }}><i className=\"fab fa-twitter\"></i></a>\r\n          <a href=\"#\" style={{ color: '#fff', fontSize: 22 }}><i className=\"fab fa-instagram\"></i></a>\r\n          <a href=\"#\" style={{ color: '#fff', fontSize: 22 }}><i className=\"fab fa-linkedin\"></i></a>\r\n        </div>\r\n      </div>\r\n      <div style={{ flex: 1, minWidth: 180, textAlign: 'left' }}>\r\n        <h3 style={{ fontWeight: 700, marginBottom: 8, borderBottom: '2px solid #e74c3c', display: 'inline-block', paddingBottom: 2 }}>Quick Links</h3>\r\n        <ul style={{ listStyle: 'none', padding: 0, margin: 0, color: '#e0e6ed', fontSize: 15 }}>\r\n          <li><a href=\"/\" style={{ color: '#fff', textDecoration: 'none' }}>Home</a></li>\r\n          <li><a href=\"/products\" style={{ color: '#fff', textDecoration: 'none' }}>Products</a></li>\r\n          <li><a href=\"/about\" style={{ color: '#fff', textDecoration: 'none' }}>About Us</a></li>\r\n          <li><a href=\"/contact\" style={{ color: '#fff', textDecoration: 'none' }}>Contact</a></li>\r\n          <li><a href=\"#\" style={{ color: '#fff', textDecoration: 'none' }}>My Account</a></li>\r\n          <li><a href=\"#\" style={{ color: '#fff', textDecoration: 'none' }}>Order Tracking</a></li>\r\n        </ul>\r\n      </div>\r\n      <div style={{ flex: 1, minWidth: 180, textAlign: 'left' }}>\r\n        <h3 style={{ fontWeight: 700, marginBottom: 8, borderBottom: '2px solid #e74c3c', display: 'inline-block', paddingBottom: 2 }}>Customer Service</h3>\r\n        <ul style={{ listStyle: 'none', padding: 0, margin: 0, color: '#e0e6ed', fontSize: 15 }}>\r\n          <li><a href=\"#\" style={{ color: '#fff', textDecoration: 'none' }}>FAQs</a></li>\r\n          <li><a href=\"#\" style={{ color: '#fff', textDecoration: 'none' }}>Shipping Policy</a></li>\r\n          <li><a href=\"#\" style={{ color: '#fff', textDecoration: 'none' }}>Return Policy</a></li>\r\n          <li><a href=\"#\" style={{ color: '#fff', textDecoration: 'none' }}>Privacy Policy</a></li>\r\n          <li><a href=\"#\" style={{ color: '#fff', textDecoration: 'none' }}>Terms of Service</a></li>\r\n        </ul>\r\n      </div>\r\n      <div style={{ flex: 1, minWidth: 220, textAlign: 'left' }}>\r\n        <h3 style={{ fontWeight: 700, marginBottom: 8, borderBottom: '2px solid #e74c3c', display: 'inline-block', paddingBottom: 2 }}>Contact Us</h3>\r\n        <ul style={{ listStyle: 'none', padding: 0, margin: 0, color: '#e0e6ed', fontSize: 15 }}>\r\n          <li><span style={{ marginRight: 8 }}><i className=\"fas fa-map-marker-alt\"></i></span>MicroLink IT College, Addis Ababa</li>\r\n          <li><span style={{ marginRight: 8 }}><i className=\"fas fa-phone\"></i></span>+251 911 234 567</li>\r\n          <li><span style={{ marginRight: 8 }}><i className=\"fas fa-envelope\"></i></span>info@autopartsonline.et</li>\r\n          <li><span style={{ marginRight: 8 }}><i className=\"fas fa-clock\"></i></span>Mon-Fri: 8:30 AM - 5:30 PM</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <hr style={{ border: 'none', borderTop: '1px solid #7b8fa1', margin: '32px 0 18px' }} />\r\n    <div style={{ color: '#e0e6ed', fontSize: 14, textAlign: 'center' }}>\r\n       2025 AutoParts Online. All Rights Reserved. Developed by MicroLink IT College Team.\r\n    </div>\r\n    <button style={{ position: 'fixed', bottom: 32, right: 32, background: '#e74c3c', color: '#fff', border: 'none', borderRadius: '50%', width: 44, height: 44, fontSize: 22, boxShadow: '0 2px 8px rgba(44,62,80,0.18)', cursor: 'pointer', zIndex: 1000 }}>\r\n      <i className=\"fas fa-bars\"></i>\r\n    </button>\r\n  </footer>\r\n);\r\n\r\nexport default Footer;\r\n","import React, { useState } from 'react';\r\n\r\nconst makes = ['Toyota', 'Honda', 'Ford', 'BMW', 'Mercedes'];\r\nconst models = {\r\n  Toyota: ['Corolla', 'Camry', 'RAV4'],\r\n  Honda: ['Civic', 'Accord', 'CR-V'],\r\n  Ford: ['Focus', 'Fusion', 'Escape'],\r\n  BMW: ['3 Series', '5 Series', 'X5'],\r\n  Mercedes: ['C-Class', 'E-Class', 'GLA']\r\n};\r\nconst years = Array.from({ length: 25 }, (_, i) => 2025 - i);\r\n\r\nfunction SearchBar({ filters, setFilters, onSearch }) {\r\n  const handleChange = (e) => {\r\n    setFilters({ ...filters, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleModelChange = (e) => {\r\n    setFilters({ ...filters, model: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-bar\">\r\n      <select name=\"make\" value={filters.make} onChange={handleChange}>\r\n        <option value=\"\">All Makes</option>\r\n        {makes.map(make => (\r\n          <option key={make} value={make}>{make}</option>\r\n        ))}\r\n      </select>\r\n      <select name=\"model\" value={filters.model} onChange={handleModelChange} disabled={!filters.make}>\r\n        <option value=\"\">All Models</option>\r\n        {filters.make && models[filters.make].map(model => (\r\n          <option key={model} value={model}>{model}</option>\r\n        ))}\r\n      </select>\r\n      <select name=\"year\" value={filters.year} onChange={handleChange}>\r\n        <option value=\"\">All Years</option>\r\n        {years.map(year => (\r\n          <option key={year} value={year}>{year}</option>\r\n        ))}\r\n      </select>\r\n      <input\r\n        type=\"text\"\r\n        name=\"search\"\r\n        placeholder=\"Search parts...\"\r\n        value={filters.search}\r\n        onChange={handleChange}\r\n      />\r\n      <button onClick={onSearch}>Search</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport SearchBar from './SearchBar';\r\n\r\nconst Header = ({ onLoginClick, onRegisterClick, onCartClick, onCartCount, onChatClick, filters, setFilters, onSearch }) => {\r\n  const location = useLocation();\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [notifCount, setNotifCount] = useState(0);\r\n  const [showNotifDropdown, setShowNotifDropdown] = useState(false);\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsLoggedIn(!!localStorage.getItem('token'));\r\n    setUserEmail(localStorage.getItem('userEmail') || '');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Example: fetch notifications from localStorage or backend\r\n    const notifs = JSON.parse(localStorage.getItem('notifications')) || [];\r\n    setNotifications(notifs);\r\n    setNotifCount(notifs.filter(n => !n.read).length);\r\n  }, [showNotifDropdown]);\r\n\r\n  // Real-time notification polling (demo)\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      const notifs = JSON.parse(localStorage.getItem('notifications')) || [];\r\n      setNotifications(notifs);\r\n      setNotifCount(notifs.filter(n => !n.read).length);\r\n    }, 5000); // Poll every 5 seconds\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Admin notification polling (demo)\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    if (user?.role === 'admin') {\r\n      const interval = setInterval(() => {\r\n        // Replace with backend fetch for admin notifications\r\n        const adminNotifs = JSON.parse(localStorage.getItem('adminNotifications')) || [];\r\n        setNotifications(adminNotifs);\r\n        setNotifCount(adminNotifs.filter(n => !n.read).length);\r\n      }, 5000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.body.className = darkMode ? 'dark-mode' : '';\r\n  }, [darkMode]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userEmail');\r\n    setIsLoggedIn(false);\r\n    setUserEmail('');\r\n    window.location.reload();\r\n  };\r\n\r\n  const onNotifClick = () => setShowNotifDropdown(v => !v);\r\n\r\n  // Hide header on /admin and /subadmin routes\r\n  if (location.pathname === '/admin' || location.pathname === '/subadmin') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <header className={`main-header${darkMode ? ' dark' : ''}`} style={{ background: '#2c3e50', color: '#fff', padding: '1rem 0', textAlign: 'center' }}>\r\n      <div className=\"header-top\">\r\n        <div className=\"logo\" style={{ color: '#fff' }}>AutoParts Online</div>\r\n        <nav className=\"nav-links\" style={{ marginBottom: '1rem', display: 'flex', justifyContent: 'center', alignItems: 'center', flexWrap: 'wrap' }}>\r\n          <a href=\"/\" style={{ color: '#fff', margin: '0 1rem', textDecoration: 'underline' }}>Home</a>\r\n          <a href=\"#products-section\" style={{ color: '#fff', margin: '0 1rem' }}>Products</a>\r\n          <a href=\"/about\" style={{ color: '#fff', margin: '0 1rem' }}>About</a>\r\n          <a href=\"/contact\" style={{ color: '#fff', margin: '0 1rem' }}>Contact</a>\r\n          <a href=\"/post\" style={{ color: '#fff', margin: '0 1rem' }}>Post</a>\r\n          <a href=\"/wishlist\" style={{ color: '#fff', margin: '0 1rem' }}>Wishlist</a>\r\n          <a href=\"/orders\" style={{ color: '#fff', margin: '0 1rem' }}>Orders</a>\r\n          {isLoggedIn && (\r\n            <a href=\"/profile\" style={{ color: '#fff', margin: '0 1rem', textDecoration: 'underline' }}>Profile</a>\r\n          )}\r\n        </nav>\r\n        <div className=\"header-actions\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n          <button onClick={() => setDarkMode(!darkMode)} className=\"dark-mode-toggle\" style={{ background: 'none', border: 'none', color: '#fff', fontSize: '1.5rem', cursor: 'pointer', margin: '0 1rem' }}>\r\n            {darkMode ? '' : ''}\r\n          </button>\r\n          {!isLoggedIn ? (\r\n            <>\r\n              <button onClick={onLoginClick} style={{ margin: '0 0.5rem', padding: '0.3rem 1rem', background: '#3498db', color: '#fff', border: 'none', borderRadius: 4, cursor: 'pointer' }}>Login</button>\r\n              <button onClick={onRegisterClick} style={{ margin: '0 0.5rem', padding: '0.3rem 1rem', background: '#8e44ad', color: '#fff', border: 'none', borderRadius: 4, cursor: 'pointer' }}>Register</button>\r\n            </>\r\n          ) : (\r\n            <button onClick={handleLogout} style={{ margin: '0 1rem', padding: '0.3rem 1rem', background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 4, cursor: 'pointer' }}>Logout</button>\r\n          )}\r\n          <button onClick={onCartClick} style={{ margin: '0 1rem', padding: '0.3rem 1rem', background: '#27ae60', color: '#fff', border: 'none', borderRadius: 4, cursor: 'pointer' }}>\r\n            Cart ({onCartCount || 0})\r\n          </button>\r\n          {isLoggedIn && userEmail && (\r\n            <span style={{ marginLeft: '1.5rem', fontWeight: 'bold', fontSize: '1rem', color: '#fff' }}>\r\n              Signed in as {userEmail}\r\n            </span>\r\n          )}\r\n          {isLoggedIn && (\r\n            <button onClick={onChatClick} style={{ margin: '0 1rem', padding: '0.3rem 1rem', background: '#3a6cf6', color: '#fff', border: 'none', borderRadius: 4, cursor: 'pointer', display: 'flex', alignItems: 'center', gap: 6 }}>\r\n              <i className=\"fas fa-comments\" style={{ fontSize: 16 }}></i> Chat\r\n            </button>\r\n          )}\r\n          <span className=\"notification-bell\" title=\"Notifications\" onClick={onNotifClick} style={{position: 'relative', margin: '0 1rem', cursor: 'pointer'}}>\r\n            <i className=\"fas fa-bell\" style={{ fontSize: 20, color: '#fff' }}></i>\r\n            {notifCount > 0 && (\r\n              <span style={{position: 'absolute', top: -6, right: -6, background: '#e74c3c', color: '#fff', borderRadius: '50%', fontSize: 12, padding: '2px 6px', fontWeight: 700}}>{notifCount}</span>\r\n            )}\r\n          </span>\r\n          {/* Notification dropdown */}\r\n          {showNotifDropdown && (\r\n            <div style={{position: 'absolute', right: 0, top: 40, background: '#fff', border: '1px solid #eee', borderRadius: 8, boxShadow: '0 2px 12px #0984e322', minWidth: 260, zIndex: 100}}>\r\n              <div style={{fontWeight:700, padding: '8px 12px', borderBottom: '1px solid #eee'}}>Notifications</div>\r\n              {notifications.length === 0 ? (\r\n                <div style={{padding: '12px', color: '#888'}}>No notifications.</div>\r\n              ) : notifications.map((n, idx) => (\r\n                <div key={idx} style={{padding: '10px 12px', borderBottom: '1px solid #eee', fontSize: 15, color: n.read ? '#888' : '#222'}}>{n.message}</div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"header-search\" style={{ marginTop: '0.5rem' }}>\r\n        <SearchBar filters={filters} setFilters={setFilters} onSearch={onSearch} />\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Header from './Header';\r\n\r\nconst ProductList = ({ filters = {}, searchTrigger, onAddToCart, onCartCountChange }) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [sort, setSort] = useState('popular');\r\n  const [category, setCategory] = useState('all');\r\n  const [cartCount, setCartCount] = useState(() => {\r\n    const cart = JSON.parse(localStorage.getItem('cart')) || [];\r\n    return cart.reduce((sum, item) => sum + (item.quantity || 1), 0);\r\n  });\r\n  // Get user role from localStorage (assumes user info is stored after login)\r\n  const [userRole, setUserRole] = useState('');\r\n  useEffect(() => {\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem('user'));\r\n      setUserRole(user?.role || '');\r\n    } catch {\r\n      setUserRole('');\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(null);\r\n    // Build query params for backend filtering\r\n    const params = {};\r\n    if (filters.make) params.make = filters.make;\r\n    if (filters.model) params.model = filters.model;\r\n    if (filters.year) params.year = filters.year;\r\n    if (filters.search) params.search = filters.search;\r\n    axios.get('/api/products', { params })\r\n      .then(res => setProducts(res.data))\r\n      .catch(err => setError('Failed to load products.'))\r\n      .finally(() => setLoading(false));\r\n  }, [filters, searchTrigger]);\r\n\r\n  useEffect(() => {\r\n    if (onCartCountChange) onCartCountChange(cartCount);\r\n  }, [cartCount, onCartCountChange]);\r\n\r\n  // Demo categories for dropdown\r\n  const categories = ['All Categories', 'Engine Parts', 'Brake System', 'Cooling System', 'Lighting'];\r\n\r\n  // Demo sort options\r\n  const sortOptions = [\r\n    { value: 'popular', label: 'Most Popular' },\r\n    { value: 'priceLow', label: 'Price: Low to High' },\r\n    { value: 'priceHigh', label: 'Price: High to Low' },\r\n    { value: 'newest', label: 'Newest' },\r\n  ];\r\n\r\n  // Filter and sort products for demo (replace with backend sort/filter if available)\r\n  let filtered = products;\r\n  if (category !== 'all' && category !== 'All Categories') {\r\n    filtered = filtered.filter(p => (p.category || '').toLowerCase().includes(category.toLowerCase()));\r\n  }\r\n  if (sort === 'priceLow') filtered = [...filtered].sort((a, b) => a.price - b.price);\r\n  if (sort === 'priceHigh') filtered = [...filtered].sort((a, b) => b.price - a.price);\r\n  if (sort === 'newest') filtered = [...filtered].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n\r\n  const updateCartCount = () => {\r\n    const cart = JSON.parse(localStorage.getItem('cart')) || [];\r\n    setCartCount(cart.reduce((sum, item) => sum + (item.quantity || 1), 0));\r\n  };\r\n\r\n  const addToCart = (product) => {\r\n    let cart = JSON.parse(localStorage.getItem('cart')) || [];\r\n    const existing = cart.find(item => item._id === product._id);\r\n    // Only add if stock allows\r\n    if (existing) {\r\n      if (existing.quantity < product.stock) {\r\n        existing.quantity = (existing.quantity || 1) + 1;\r\n      } else {\r\n        // Optionally show a message: max stock reached\r\n        return;\r\n      }\r\n    } else {\r\n      if (product.stock > 0) {\r\n        cart.push({ ...product, quantity: 1 });\r\n      } else {\r\n        // Optionally show a message: out of stock\r\n        return;\r\n      }\r\n    }\r\n    cart = cart.map(item => ({ ...item, quantity: item.quantity || 1 }));\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n    updateCartCount();\r\n    if (onAddToCart) onAddToCart();\r\n  };\r\n\r\n  // Details modal state\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [showDetails, setShowDetails] = useState(false);\r\n\r\n  const handleDetails = async (product) => {\r\n    try {\r\n      const res = await axios.get(`/api/products/${product._id}`);\r\n      setSelectedProduct(res.data);\r\n      setShowDetails(true);\r\n    } catch (err) {\r\n      setSelectedProduct(product); // fallback to local data\r\n      setShowDetails(true);\r\n    }\r\n  };\r\n  const closeDetails = () => {\r\n    setShowDetails(false);\r\n    setSelectedProduct(null);\r\n  };\r\n\r\n  // Chat modal state\r\n  const [showChat, setShowChat] = useState(false);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [chatText, setChatText] = useState('');\r\n  const [chatFile, setChatFile] = useState(null);\r\n  const [chatLoading, setChatLoading] = useState(false);\r\n\r\n  // Fetch chat messages for selected product\r\n  const fetchChatMessages = async (productId) => {\r\n    setChatLoading(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await axios.get(`/api/messages?productId=${productId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setChatMessages(res.data);\r\n    } catch (err) {\r\n      setChatMessages([]);\r\n    }\r\n    setChatLoading(false);\r\n  };\r\n\r\n  const handleOpenChat = async () => {\r\n    if (selectedProduct?._id) await fetchChatMessages(selectedProduct._id);\r\n    setShowChat(true);\r\n  };\r\n  // Chat file upload logic\r\n  const handleSendChat = async () => {\r\n    if (!chatText.trim() && !chatFile) return;\r\n    setChatLoading(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const formData = new FormData();\r\n      formData.append('productId', selectedProduct._id);\r\n      formData.append('text', chatText);\r\n      if (chatFile) formData.append('file', chatFile);\r\n      await axios.post('/api/messages/upload', formData, {\r\n        headers: { Authorization: `Bearer ${token}`, 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      setChatText('');\r\n      setChatFile(null);\r\n      await fetchChatMessages(selectedProduct._id);\r\n    } catch (err) {}\r\n    setChatLoading(false);\r\n  };\r\n\r\n  // Wishlist logic using backend\r\n  const handleAddToWishlist = async (product) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.post('/api/wishlist/add', { productId: product._id }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      alert('Added to wishlist!');\r\n    } catch {\r\n      alert('Failed to add to wishlist.');\r\n    }\r\n  };\r\n  const handleRemoveFromWishlist = async (product) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.post('/api/wishlist/remove', { productId: product._id }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      alert('Removed from wishlist!');\r\n    } catch {\r\n      alert('Failed to remove from wishlist.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      \r\n       \r\n      <section className=\"products\" id=\"products\" style={{ background: '#f6f6f7', padding: '60px 0 40px', minHeight: 600, width: '100vw', position: 'relative', left: '50%', right: '50%', marginLeft: '-50vw', marginRight: '-50vw' }}>\r\n        <div className=\"container\" style={{ maxWidth: '100vw', width: '100vw', margin: '0 auto', padding: '0 2vw' }}>\r\n          <h2 className=\"section-title\" style={{ fontWeight: 700, fontSize: 36, color: '#2c3e50', margin: 0, letterSpacing: 0.5, textAlign: 'center' }}>\r\n            Featured Products\r\n            <div style={{ width: 60, height: 4, background: '#e74c3c', borderRadius: 2, margin: '16px auto 0', display: 'block' }}></div>\r\n          </h2>\r\n          <div className=\"product-filters\" style={{ display: 'flex', justifyContent: 'center', gap: 32, margin: '40px 0 36px', flexWrap: 'wrap' }}>\r\n            <div className=\"filter-group\" style={{ minWidth: 220, fontWeight: 700, fontSize: 16, background: '#fff', borderRadius: 12, boxShadow: '0 2px 12px #eaeaea', padding: 14, display: 'flex', alignItems: 'center', gap: 10 }}>\r\n              <label htmlFor=\"sort-by\" style={{ fontWeight: 700, marginRight: 8, fontSize: 15 }}>Sort by:</label>\r\n              <select id=\"sort-by\" value={sort} onChange={e => setSort(e.target.value)} style={{ padding: 8, borderRadius: 8, border: '1.5px solid #ddd', minWidth: 110, fontSize: 14, fontWeight: 500, boxShadow: '0 2px 8px #f6f6f7' }}>\r\n                {sortOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}\r\n              </select>\r\n            </div>\r\n            <div className=\"filter-group\" style={{ minWidth: 220, fontWeight: 700, fontSize: 16, background: '#fff', borderRadius: 12, boxShadow: '0 2px 12px #eaeaea', padding: 14, display: 'flex', alignItems: 'center', gap: 10 }}>\r\n              <label htmlFor=\"category-filter\" style={{ fontWeight: 700, marginRight: 8, fontSize: 15 }}>Category:</label>\r\n              <select id=\"category-filter\" value={category} onChange={e => setCategory(e.target.value)} style={{ padding: 8, borderRadius: 8, border: '1.5px solid #ddd', minWidth: 110, fontSize: 14, fontWeight: 500, boxShadow: '0 2px 8px #f6f6f7' }}>\r\n                {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"product-grid\" id=\"product-grid\" style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(390px, 1fr))', gap: 36, width: '100vw', padding: '0 2vw' }}>\r\n            {loading && <div>Loading products...</div>}\r\n            {error && <div style={{color: 'red'}}>{error}</div>}\r\n            {!loading && !error && filtered.length === 0 && (\r\n              <div style={{ gridColumn: '1/-1', textAlign: 'center', color: '#888', fontSize: 22, padding: '60px 0' }}>\r\n                No products found.\r\n              </div>\r\n            )}\r\n            {!loading && !error && filtered.map(product => (\r\n              <div className=\"product-card\" key={product._id} style={{ background: '#fff', borderRadius: 18, boxShadow: '0 4px 16px rgba(44,62,80,0.08)', padding: 0, overflow: 'hidden', position: 'relative', display: 'flex', flexDirection: 'column', minHeight: 480 }}>\r\n                <div className=\"product-badge\" style={{ position: 'absolute', top: 14, left: 14, background: '#e74c3c', color: '#fff', fontWeight: 700, fontSize: 13, borderRadius: 7, padding: '3px 12px', zIndex: 2 }}>New</div>\r\n                <div className=\"product-image\">\r\n                  {product.image && (\r\n                    <img src={\r\n                      product.image\r\n                        ? product.image.startsWith('http')\r\n                          ? product.image\r\n                          : product.image.startsWith('/uploads/')\r\n                            ? `http://localhost:5000${product.image}`\r\n                            : `http://localhost:5000/uploads/${product.image}`\r\n                        : '/default-product.png'\r\n                    } alt={product.name} loading=\"lazy\" style={{ width: '100%', height: 170, objectFit: 'cover', borderTopLeftRadius: 18, borderTopRightRadius: 18, background: '#f8f8f8' }} />\r\n                  )}\r\n                </div>\r\n                <div className=\"product-info\" style={{ padding: '20px 20px 16px', flex: 1, display: 'flex', flexDirection: 'column' }}>\r\n                  <span className=\"product-category\" style={{ color: '#2980ef', fontWeight: 700, fontSize: 13, marginBottom: 2 }}>{product.category || 'Engine Parts'}</span>\r\n                  <h3 className=\"product-title\" style={{ fontWeight: 700, fontSize: 18, color: '#223', marginBottom: 6 }}>{product.name}</h3>\r\n                  <p className=\"product-description\" style={{ color: '#666', fontSize: 13, marginBottom: 10, minHeight: 28, maxHeight: 28, overflow: 'hidden', textOverflow: 'ellipsis' }}>{product.description || product.desc}</p>\r\n                  <div className=\"product-meta\" style={{ display: 'flex', alignItems: 'center', gap: 10, marginBottom: 10 }}>\r\n                    <div className=\"product-price\" style={{ fontWeight: 700, fontSize: 16, color: '#e74c3c' }}>ETB {product.price?.toLocaleString()}</div>\r\n                    {product.stock > 5 && (\r\n                      <div className=\"product-stock in-stock\" style={{ background: '#27ae60', color: '#fff', fontWeight: 600, fontSize: 12, borderRadius: 8, padding: '3px 10px' }}>In Stock</div>\r\n                    )}\r\n                    {product.stock > 0 && product.stock <= 5 && (\r\n                      <div className=\"product-stock low-stock\" style={{ background: '#f7c948', color: '#fff', fontWeight: 600, fontSize: 12, borderRadius: 8, padding: '3px 10px' }}>Low Stock ({product.stock})</div>\r\n                    )}\r\n                    {(product.stock === 0 || product.stock === undefined || product.stock === null) && (\r\n                      <div className=\"product-stock out-stock\" style={{ background: '#e74c3c', color: '#fff', fontWeight: 600, fontSize: 12, borderRadius: 8, padding: '3px 10px' }}>Out of Stock</div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"product-actions\" style={{ display: 'flex', gap: 8, marginTop: 'auto' }}>\r\n                    <button className=\"btn btn-outline view-details\" onClick={() => handleDetails(product)} style={{ background: '#fff', color: '#e74c3c', border: '2px solid #e74c3c', borderRadius: 8, padding: '8px 18px', fontWeight: 700, fontSize: 14, cursor: 'pointer', transition: 'background 0.2s', display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                      <i className=\"fas fa-info-circle\" style={{ fontSize: 16 }}></i> Details\r\n                    </button>\r\n                    {/* Only show Add to Cart for shop products */}\r\n                    {product.shopId ? (\r\n                      <button \r\n                        className=\"btn btn-primary add-to-cart\"\r\n                        onClick={e => { e.stopPropagation(); addToCart(product); }}\r\n                        disabled={!product.stock || product.stock === 0}\r\n                        style={{ background: (!product.stock || product.stock === 0) ? '#f6f6f7' : '#e74c3c', color: '#fff', border: 'none', borderRadius: 8, padding: '8px 18px', fontWeight: 700, fontSize: 14, cursor: (!product.stock || product.stock === 0) ? 'not-allowed' : 'pointer', opacity: (!product.stock || product.stock === 0) ? 0.7 : 1, display: 'flex', alignItems: 'center', gap: 6 }}\r\n                      >\r\n                        <i className=\"fas fa-cart-plus\" style={{ fontSize: 16 }}></i> Add to Cart\r\n                      </button>\r\n                    ) : null}\r\n                    {/* Wishlist Button */}\r\n                    <button className=\"btn btn-outline\" style={{ background: '#fff', color: '#3a6cf6', border: '2px solid #3a6cf6', borderRadius: 8, padding: '8px 18px', fontWeight: 700, fontSize: 14, cursor: 'pointer', transition: 'background 0.2s', display: 'flex', alignItems: 'center', gap: 6 }} onClick={() => handleAddToWishlist(product)}>\r\n                      <i className=\"fas fa-heart\" style={{ fontSize: 16 }}></i> Wishlist\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"load-more\" style={{ display: 'flex', justifyContent: 'center', marginTop: 40 }}>\r\n            <button className=\"btn btn-outline\" id=\"load-more-btn\" style={{ background: '#fff', color: '#e74c3c', border: '2px solid #e74c3c', borderRadius: 9, padding: '13px 38px', fontWeight: 700, fontSize: 18, cursor: 'pointer', boxShadow: '0 2px 8px #f6f6f7', marginTop: 8 }}>\r\n              Load More Products\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Product Details Modal */}\r\n      {showDetails && selectedProduct && (\r\n        <div className=\"product-details-modal\" style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(44,62,80,0.18)', zIndex: 9999, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n          <div style={{ background: '#fff', borderRadius: 18, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: 24, minWidth: 320, maxWidth: 420, width: '90vw', position: 'relative' }}>\r\n            <button onClick={closeDetails} style={{ position: 'absolute', top: 12, right: 12, background: 'none', border: 'none', fontSize: 20, color: '#e74c3c', cursor: 'pointer', fontWeight: 700 }}>&times;</button>\r\n            <div style={{ display: 'flex', gap: 18, flexWrap: 'wrap' }}>\r\n              <div style={{ flex: '1 1 120px', minWidth: 120 }}>\r\n                <img src={\r\n                  selectedProduct.image\r\n                    ? selectedProduct.image.startsWith('http')\r\n                      ? selectedProduct.image\r\n                      : selectedProduct.image.startsWith('/uploads/')\r\n                        ? `http://localhost:5000${selectedProduct.image}`\r\n                        : `http://localhost:5000/uploads/${selectedProduct.image}`\r\n                    : '/default-product.png'\r\n                } alt={selectedProduct.name} style={{ width: '100%', height: 120, objectFit: 'cover', borderRadius: 10, background: '#f8f8f8' }} />\r\n              </div>\r\n              <div style={{ flex: '2 1 180px', minWidth: 120 }}>\r\n                <h2 style={{ fontWeight: 700, fontSize: 18, color: '#223', marginBottom: 6 }}>{selectedProduct.name}</h2>\r\n                <div style={{ color: '#2980ef', fontWeight: 700, fontSize: 13, marginBottom: 6 }}>{selectedProduct.category || 'Engine Parts'}</div>\r\n                <div style={{ fontWeight: 700, fontSize: 15, color: '#e74c3c', marginBottom: 8 }}>ETB {selectedProduct.price?.toLocaleString()}</div>\r\n                <div style={{ color: '#666', fontSize: 13, marginBottom: 10 }}>{selectedProduct.description || selectedProduct.desc}</div>\r\n                <div style={{ marginBottom: 10 }}>\r\n                  {selectedProduct.stock > 5 && <span style={{ background: '#27ae60', color: '#fff', fontWeight: 600, fontSize: 11, borderRadius: 8, padding: '3px 10px' }}>In Stock</span>}\r\n                  {selectedProduct.stock > 0 && selectedProduct.stock <= 5 && <span style={{ background: '#f7c948', color: '#fff', fontWeight: 600, fontSize: 11, borderRadius: 8, padding: '3px 10px' }}>Low Stock ({selectedProduct.stock})</span>}\r\n                  {(!selectedProduct.stock || selectedProduct.stock === 0) && <span style={{ background: '#e74c3c', color: '#fff', fontWeight: 600, fontSize: 11, borderRadius: 8, padding: '3px 10px' }}>Out of Stock</span>}\r\n                </div>\r\n                {/* Seller Info */}\r\n                <div style={{ marginBottom: 10, marginTop: 10, padding: '10px', background: '#f6f6f7', borderRadius: 8 }}>\r\n                  <div><b>Seller Name:</b> {selectedProduct.sellerName || selectedProduct.owner?.username || 'N/A'}</div>\r\n                  <div><b>Phone:</b> {selectedProduct.sellerPhone || selectedProduct.owner?.phone || 'N/A'}\r\n                    {selectedProduct.sellerPhone || selectedProduct.owner?.phone ? (\r\n                      <>\r\n                        <button style={{marginLeft:8, fontSize:12, padding:'2px 8px', borderRadius:6, background:'#3a6cf6', color:'#fff', border:'none', cursor:'pointer'}} onClick={() => window.open(`tel:${selectedProduct.sellerPhone || selectedProduct.owner?.phone}`)}>Call Seller</button>\r\n                        <button style={{marginLeft:4, fontSize:12, padding:'2px 8px', borderRadius:6, background:'#f7c948', color:'#222', border:'none', cursor:'pointer'}} onClick={() => {navigator.clipboard.writeText(selectedProduct.sellerPhone || selectedProduct.owner?.phone)}}>Copy Phone</button>\r\n                      </>\r\n                    ) : null}\r\n                  </div>\r\n                  <div><b>Email:</b> {selectedProduct.sellerEmail || selectedProduct.owner?.email || 'N/A'}\r\n                    {selectedProduct.sellerEmail || selectedProduct.owner?.email ? (\r\n                      <button style={{marginLeft:8, fontSize:12, padding:'2px 8px', borderRadius:6, background:'#f7c948', color:'#222', border:'none', cursor:'pointer'}} onClick={() => {navigator.clipboard.writeText(selectedProduct.sellerEmail || selectedProduct.owner?.email)}}>Copy Email</button>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n                {/* Chat Button: only for user-to-user products */}\r\n                {!selectedProduct.shopId && (\r\n                  <button className=\"btn btn-outline\" style={{marginTop:8, marginBottom:8, background:'#3a6cf6', color:'#fff', border:'none', borderRadius:8, padding:'8px 18px', fontWeight:700, fontSize:14, cursor:'pointer'}} onClick={handleOpenChat}>Chat with Seller</button>\r\n                )}\r\n                {/* Only show Add to Cart for shop products in modal */}\r\n                {selectedProduct.shopId ? (\r\n                  <button \r\n                    className=\"btn btn-primary add-to-cart\"\r\n                    onClick={() => { addToCart(selectedProduct); closeDetails(); }}\r\n                    disabled={!selectedProduct.stock || selectedProduct.stock === 0}\r\n                    style={{ background: (!selectedProduct.stock || selectedProduct.stock === 0) ? '#f6f6f7' : '#e74c3c', color: '#fff', border: 'none', borderRadius: 8, padding: '8px 18px', fontWeight: 700, fontSize: 14, cursor: (!selectedProduct.stock || selectedProduct.stock === 0) ? 'not-allowed' : 'pointer', opacity: (!selectedProduct.stock || selectedProduct.stock === 0) ? 0.7 : 1, display: 'flex', alignItems: 'center', gap: 6 }}\r\n                  >\r\n                    <i className=\"fas fa-cart-plus\" style={{ fontSize: 14 }}></i> Add to Cart\r\n                  </button>\r\n                ) : null}\r\n                {/* Wishlist Button in modal */}\r\n                <button className=\"btn btn-outline\" style={{marginTop:8, marginBottom:8, background:'#fff', color:'#3a6cf6', border:'2px solid #3a6cf6', borderRadius:8, padding:'8px 18px', fontWeight:700, fontSize:14, cursor:'pointer'}} onClick={() => handleAddToWishlist(selectedProduct)}>\r\n                  <i className=\"fas fa-heart\" style={{ fontSize: 14 }}></i> Wishlist\r\n                </button>\r\n              </div>\r\n            </div>\r\n            {/* Chat Modal: show for any user who clicks chat */}\r\n            {showChat && (\r\n              <div style={{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'#232946cc',zIndex:99999,display:'flex',alignItems:'center',justifyContent:'center'}}>\r\n                <div style={{background:'#fff',padding:24,borderRadius:12,minWidth:340,maxWidth:400,boxShadow:'0 2px 12px #23294655',color:'#232946',display:'flex',flexDirection:'column',gap:12}}>\r\n                  <h3 style={{marginBottom:8}}>Chat with Seller</h3>\r\n                  <div style={{maxHeight:220,overflowY:'auto',marginBottom:8,border:'1px solid #eee',borderRadius:8,padding:8}}>\r\n                    {chatLoading ? <div>Loading...</div> : chatMessages.length === 0 ? <div style={{color:'#888'}}>No messages yet.</div> : chatMessages.map((msg,i) => (\r\n                      <div key={i} style={{marginBottom:6}}>\r\n                        <b>{msg.from?.username || 'You'}:</b> {msg.text}\r\n                        {msg.fileUrl && (\r\n                          <div style={{marginTop:4}}>\r\n                            {msg.fileUrl.match(/\\.(jpg|jpeg|png|gif)$/i) ? (\r\n                              <img src={msg.fileUrl} alt=\"file\" style={{maxWidth:120, borderRadius:8}} />\r\n                            ) : (\r\n                              <a href={msg.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\">Download File</a>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                        <div style={{fontSize:11,color:'#888'}}>{new Date(msg.createdAt).toLocaleString()}</div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <div style={{display:'flex',gap:8,alignItems:'center'}}>\r\n                    <input type=\"file\" accept=\"image/*,.pdf,.doc,.docx,.txt\" onChange={e => setChatFile(e.target.files[0])} style={{flex:1}} />\r\n                    <input type=\"text\" value={chatText} onChange={e=>setChatText(e.target.value)} placeholder=\"Type your message...\" style={{flex:2,padding:8,borderRadius:8,border:'1px solid #ccc'}} />\r\n                    <button className=\"btn btn-primary\" onClick={handleSendChat} disabled={chatLoading || (!chatText.trim() && !chatFile)} style={{padding:'8px 16px',borderRadius:8}}>Send</button>\r\n                  </div>\r\n                  <button className=\"btn btn-outline\" onClick={()=>setShowChat(false)} style={{marginTop:8}}>Close</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst Cart = ({ onClose, onCheckout, onCartCountChange }) => {\r\n  const [cart, setCart] = useState([]);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const storedCart = JSON.parse(localStorage.getItem('cart')) || [];\r\n    setCart(storedCart);\r\n    if (onCartCountChange) {\r\n      const count = storedCart.reduce((sum, item) => sum + (item.quantity || 1), 0);\r\n      onCartCountChange(count);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Listen for cart changes in other tabs/windows\r\n    const handleStorage = (e) => {\r\n      if (e.key === 'cart') {\r\n        const updated = JSON.parse(e.newValue) || [];\r\n        setCart(updated);\r\n        if (onCartCountChange) {\r\n          const count = updated.reduce((sum, item) => sum + (item.quantity || 1), 0);\r\n          onCartCountChange(count);\r\n        }\r\n      }\r\n    };\r\n    window.addEventListener('storage', handleStorage);\r\n    return () => window.removeEventListener('storage', handleStorage);\r\n  }, [onCartCountChange]);\r\n\r\n  const updateCartAndCount = (updatedCart) => {\r\n    setCart(updatedCart);\r\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n    if (onCartCountChange) {\r\n      const count = updatedCart.reduce((sum, item) => sum + (item.quantity || 1), 0);\r\n      onCartCountChange(count);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = (id) => {\r\n    const updatedCart = cart.filter(item => item._id !== id);\r\n    updateCartAndCount(updatedCart);\r\n  };\r\n\r\n  const updateQuantity = (id, delta) => {\r\n    setCart(prev => {\r\n      const updated = prev.map(item => {\r\n        if (item._id === id) {\r\n          const maxQty = item.stock || 1;\r\n          const newQty = Math.max(1, Math.min((item.quantity || 1) + delta, maxQty));\r\n          return { ...item, quantity: newQty };\r\n        }\r\n        return item;\r\n      });\r\n      localStorage.setItem('cart', JSON.stringify(updated));\r\n      if (onCartCountChange) {\r\n        const count = updated.reduce((sum, item) => sum + (item.quantity || 1), 0);\r\n        onCartCountChange(count);\r\n      }\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  const total = cart.reduce((sum, item) => sum + (item.price * (item.quantity || 1)), 0);\r\n\r\n  const handleCheckout = () => {\r\n    if (onCheckout) {\r\n      onCheckout(cart, total);\r\n    } else {\r\n      history.push('/checkout');\r\n    }\r\n  };\r\n\r\n  // Only render the cart popup if there are items in the cart\r\n  if (!cart || cart.length === 0) return null;\r\n\r\n  return (\r\n    <div className=\"cart-popup-overlay\" style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      width: '100vw',\r\n      height: '100vh',\r\n      background: 'rgba(44, 62, 80, 0.25)',\r\n      zIndex: 9999,\r\n      display: 'flex',\r\n      alignItems: 'stretch',\r\n      justifyContent: 'flex-end',\r\n    }}>\r\n      <div className=\"cart-popup\" style={{\r\n        background: '#fff',\r\n        borderRadius: '0 0 0 0',\r\n        boxShadow: '-4px 0 32px rgba(44,62,80,0.18)',\r\n        minWidth: 380,\r\n        maxWidth: 420,\r\n        width: '100%',\r\n        maxHeight: '100vh',\r\n        height: '100vh',\r\n        overflowY: 'auto',\r\n        padding: 0,\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}>\r\n        {/* Header */}\r\n        <div className=\"cart-header\" style={{\r\n          background: '#42546e',\r\n          color: '#fff',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          padding: '24px 24px 18px 24px',\r\n          borderTopLeftRadius: 0,\r\n          borderTopRightRadius: 0,\r\n        }}>\r\n          <span style={{ fontWeight: 700, fontSize: 26, letterSpacing: 0.5 }}>Your Cart</span>\r\n          <button className=\"cart-close\" onClick={onClose} style={{ background: 'none', border: 'none', fontSize: 28, color: '#fff', cursor: 'pointer', fontWeight: 700, lineHeight: 1 }}>&times;</button>\r\n        </div>\r\n        {/* Cart Items */}\r\n        <div className=\"cart-list\" style={{ flex: 1, padding: '24px 24px 0 24px', overflowY: 'auto' }}>\r\n          {cart.map((item, idx) => (\r\n            <div key={item._id} style={{\r\n              display: 'flex',\r\n              gap: 18,\r\n              alignItems: 'flex-start',\r\n              borderBottom: idx !== cart.length - 1 ? '1px solid #ededed' : 'none',\r\n              paddingBottom: 22,\r\n              marginBottom: 22,\r\n            }}>\r\n              <img src={\r\n                item.image?.startsWith('http')\r\n                  ? item.image\r\n                  : item.image\r\n                    ? `http://localhost:5000/uploads/${item.image}`\r\n                    : '/default-product.png'\r\n              } alt={item.name} style={{ width: 80, height: 80, objectFit: 'cover', borderRadius: 8, boxShadow: '0 2px 8px #e0e0e0', background: '#f8f8f8' }} />\r\n              <div style={{ flex: 1, minWidth: 0 }}>\r\n                <div style={{ fontWeight: 700, fontSize: 19, color: '#222', marginBottom: 2 }}>{item.name}</div>\r\n                <div style={{ color: '#e74c3c', fontWeight: 700, fontSize: 20, marginBottom: 8 }}>ETB {item.price.toLocaleString()}</div>\r\n                <div style={{ color: '#888', fontSize: 15, marginBottom: 10 }}>{item.desc}</div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 8 }}>\r\n                  <button onClick={() => updateQuantity(item._id, -1)} style={{ background: '#f2f4f7', border: 'none', borderRadius: 4, width: 32, height: 32, fontWeight: 700, fontSize: 18, cursor: item.quantity > 1 ? 'pointer' : 'not-allowed', color: '#42546e' }} disabled={item.quantity <= 1}>-</button>\r\n                  <span style={{ fontWeight: 600, fontSize: 17, minWidth: 24, textAlign: 'center' }}>{item.quantity || 1}</span>\r\n                  <button onClick={() => updateQuantity(item._id, 1)} style={{ background: '#f2f4f7', border: 'none', borderRadius: 4, width: 32, height: 32, fontWeight: 700, fontSize: 18, cursor: item.quantity >= (item.stock || 1) ? 'not-allowed' : 'pointer', color: '#42546e' }} disabled={item.quantity >= (item.stock || 1)}>+</button>\r\n                </div>\r\n                <button onClick={() => removeFromCart(item._id)} style={{ background: 'none', border: 'none', color: '#e74c3c', fontWeight: 600, marginTop: 0, cursor: 'pointer', fontSize: 16, display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                  <span style={{ fontSize: 18, display: 'inline-block', marginRight: 2 }}></span> Remove\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {/* Footer */}\r\n        <div className=\"cart-footer\" style={{\r\n          borderTop: '1px solid #ededed',\r\n          background: '#fafbfc',\r\n          marginTop: 'auto',\r\n          padding: '24px',\r\n          position: 'sticky',\r\n          bottom: 0,\r\n          zIndex: 2,\r\n        }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', fontWeight: 700, fontSize: 20, marginBottom: 18 }}>\r\n            <span>Subtotal:</span>\r\n            <span style={{ color: '#222' }}>ETB {total.toLocaleString(undefined, { minimumFractionDigits: 2 })}</span>\r\n          </div>\r\n          <button \r\n            disabled={cart.length === 0}\r\n            onClick={cart.length > 0 ? handleCheckout : undefined}\r\n            style={{ \r\n              background: '#e74c3c', \r\n              color: '#fff', \r\n              border: 'none', \r\n              borderRadius: 8, \r\n              padding: '1rem 0', \r\n              fontWeight: 700, \r\n              fontSize: 18, \r\n              width: '100%', \r\n              cursor: cart.length === 0 ? 'not-allowed' : 'pointer', \r\n              opacity: cart.length === 0 ? 0.85 : 1, \r\n              letterSpacing: 0.2 \r\n            }}\r\n          >\r\n            Proceed to Checkout\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Checkout = () => {\r\n  const [cart] = useState(JSON.parse(localStorage.getItem('cart')) || []);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleCheckout = async () => {\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const user = JSON.parse(localStorage.getItem('user'));\r\n      // Fetch product details for each cart item\r\n      const productDetails = await Promise.all(cart.map(async item => {\r\n        const res = await axios.get(`http://localhost:5000/api/products/${item._id}`);\r\n        return res.data;\r\n      }));\r\n      // Prepare order data for backend\r\n      const seller = productDetails[0]?.owner?._id || productDetails[0]?.owner || '';\r\n      const shopId = productDetails[0]?.shopId || '';\r\n      const buyer = user?._id;\r\n      if (!seller || !shopId || !buyer) {\r\n        setMessage(`Order failed: Missing required field(s). seller: ${seller}, buyer: ${buyer}, shopId: ${shopId}`);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      const orderData = {\r\n        products: cart.map((item, idx) => ({\r\n          product: item._id,\r\n          quantity: item.quantity || 1,\r\n          price: item.price\r\n        })),\r\n        total: cart.reduce((sum, item) => sum + (item.price * (item.quantity || 1)), 0),\r\n        buyer,\r\n        seller,\r\n        shopId\r\n      };\r\n      console.log('Order payload:', orderData);\r\n      const res = await axios.post(\r\n        `http://localhost:5000/api/orders`,\r\n        orderData,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      localStorage.removeItem('cart');\r\n      setMessage('Order placed successfully!');\r\n    } catch (err) {\r\n      setMessage('Order failed: ' + (err.response?.data?.error || err.message));\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  if (cart.length === 0) return <div>Your cart is empty.</div>;\r\n\r\n  const total = cart.reduce((sum, item) => sum + (item.price * (item.quantity || 1)), 0);\r\n\r\n  return (\r\n    <div>\r\n      <h3>Checkout</h3>\r\n      <ul>\r\n        {cart.map(item => (\r\n          <li key={item._id}>\r\n            {item.name} - ${item.price} x {item.quantity || 1}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <div><strong>Total: ${total.toFixed(2)}</strong></div>\r\n      <button onClick={handleCheckout} disabled={loading}>{loading ? 'Placing Order...' : 'Place Order'}</button>\r\n      <div>{message}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import React, { useState } from 'react';\nimport Footer from '../components/Footer';\nimport ProductList from '../components/ProductList';\nimport Cart from '../components/Cart';\nimport Checkout from '../components/Checkout';\nimport SearchBar from '../components/SearchBar';\nimport '../pages/styles/main.css';\n\nconst Home = ({ onAddToCart, cartCount, setCartCount }) => {\n    const [filters, setFilters] = useState({ make: '', model: '', year: '', search: '' });\n    const [searchTrigger, setSearchTrigger] = useState(0);\n    const [showCart, setShowCart] = useState(false);\n\n    const handleSearch = () => {\n        setSearchTrigger(prev => prev + 1);\n    };\n\n    const handleAddToCart = () => {\n        setShowCart(true);\n    };\n\n    const featuredProducts = [\n        {\n            id: 1,\n            name: 'Premium Oil Filter',\n            image: '/uploads/1752314287701-518960914-oil filter.jpg',\n            price: 120,\n            description: 'High-quality oil filter for extended engine life.'\n        },\n        {\n            id: 2,\n            name: 'Noiseless Brake Pads',\n            image: '/uploads/1753118524708-592307236-Sp2092-Brake-Pads-Noiseless-Auto-Spare-Parts-Disc-Breakpad.avif',\n            price: 350,\n            description: 'Noiseless, durable brake pads for safe driving.'\n        },\n        {\n            id: 3,\n            name: 'Air Filter',\n            image: '/uploads/1752319736790-170185065-images.jfif',\n            price: 80,\n            description: 'Efficient air filter for improved performance.'\n        }\n    ];\n\n    return (\n        <>\n            {/* Hero Section */}\n            <section className=\"hero-section\">\n                <div className=\"hero-content\">\n                    <h2 className=\"section-title\">Find Quality Spare Parts for Your Vehicle</h2>\n                    <div className=\"hero-search-bar\">\n                        <SearchBar filters={filters} setFilters={setFilters} onSearch={handleSearch} />\n                    </div>\n                    <p className=\"hero-subtitle\">Browse our extensive catalog of automotive spare parts and accessories. Fast delivery, trusted sellers, and the best prices online.</p>\n                </div>\n            </section>\n\n            {/* Categories Section */}\n            <section className=\"categories-section\">\n                <h2 className=\"section-title\">Shop by Category</h2>\n                <div className=\"section-divider\"></div>\n                <div className=\"categories-grid\">\n                    {/* Engine Parts */}\n                    <div className=\"category-card\">\n                        <div className=\"category-icon\" aria-label=\"engine\"></div>\n                        <div className=\"category-title\">Engine Parts</div>\n                        <div className=\"category-desc\">Filters, pumps, belts and more</div>\n                        <button className=\"btn btn-outline\">Browse</button>\n                    </div>\n                    {/* Brake System */}\n                    <div className=\"category-card\">\n                        <div className=\"category-icon\" aria-label=\"brake\"></div>\n                        <div className=\"category-title\">Brake System</div>\n                        <div className=\"category-desc\">Pads, rotors, calipers</div>\n                        <button className=\"btn btn-outline\">Browse</button>\n                    </div>\n                    {/* Cooling System */}\n                    <div className=\"category-card\">\n                        <div className=\"category-icon\" aria-label=\"cooling\"></div>\n                        <div className=\"category-title\">Cooling System</div>\n                        <div className=\"category-desc\">Radiators, thermostats, hoses</div>\n                        <button className=\"btn btn-outline\">Browse</button>\n                    </div>\n                    {/* Lighting */}\n                    <div className=\"category-card\">\n                        <div className=\"category-icon\" aria-label=\"lighting\"></div>\n                        <div className=\"category-title\">Lighting</div>\n                        <div className=\"category-desc\">Headlights, bulbs, assemblies</div>\n                        <button className=\"btn btn-outline\">Browse</button>\n                    </div>\n                </div>\n            </section>\n\n            {/* Featured Products Section */}\n            <section className=\"featured-products-section\">\n                <h2 className=\"section-title\">Featured Products</h2>\n                <div className=\"featured-products-grid\">\n                    {featuredProducts.map(product => (\n                        <div key={product.id} className=\"featured-product-card\">\n                            <img src={product.image} alt={product.name} className=\"featured-product-image\" />\n                            <h3>{product.name}</h3>\n                            <p>{product.description}</p>\n                            <div className=\"featured-product-price\">${product.price}</div>\n                            <button className=\"add-to-cart-btn\" onClick={handleAddToCart}>Add to Cart</button>\n                        </div>\n                    ))}\n                </div>\n            </section>\n\n            {/* Products Section */}\n            <div className=\"home\" id=\"products-section\">\n                <div style={{ flex: 1 }}>\n                  <ProductList filters={filters} searchTrigger={searchTrigger} onAddToCart={handleAddToCart} onCartCountChange={setCartCount} />\n                </div>\n            </div>\n\n            {/* Benefits Section */}\n            <section className=\"benefits-section\">\n                <h2 className=\"section-title\">Why Choose Us?</h2>\n                <div className=\"benefits-grid\">\n                    <div className=\"benefit-card\"><i className=\"fas fa-shipping-fast\"></i><h3>Fast Delivery</h3><p>Get your parts delivered quickly and reliably.</p></div>\n                    <div className=\"benefit-card\"><i className=\"fas fa-shield-alt\"></i><h3>Trusted Sellers</h3><p>Buy from verified and reputable sellers only.</p></div>\n                    <div className=\"benefit-card\"><i className=\"fas fa-tags\"></i><h3>Best Prices</h3><p>Competitive prices on all products.</p></div>\n                    <div className=\"benefit-card\"><i className=\"fas fa-headset\"></i><h3>Support</h3><p>24/7 customer support for all your needs.</p></div>\n                </div>\n            </section>\n\n            {/* Call to Action Section */}\n            <section className=\"cta-section\">\n                <h2>Ready to find your part?</h2>\n                <p>Sign up now and get access to exclusive deals and fast shipping!</p>\n                <div className=\"cta-buttons\">\n                    <a href=\"#products-section\" className=\"btn btn-primary\">Browse Products</a>\n                    <a href=\"/auth\" className=\"btn btn-secondary\">Register</a>\n                </div>\n            </section>\n            <Footer />\n\n            {/* Cart Sidebar Popup */}\n            {showCart && <Cart show={showCart} onClose={() => setShowCart(false)} />}\n        </>\n    );\n};\n\nexport default Home;","import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst API_BASE = '/api/auth';\n\nconst Auth = ({ onSuccess, onSwitchToRegister }) => {\n  const [formData, setFormData] = useState({ email: '', password: '', remember: false });\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData({ ...formData, [name]: type === 'checkbox' ? checked : value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    try {\n      const res = await axios.post(`${API_BASE}/login`, {\n        email: formData.email,\n        password: formData.password,\n      });\n      // Check user role and current path\n      const userRole = res.data.user?.role || res.data.role;\n      const currentPath = window.location.pathname;\n      if (userRole === 'admin' && currentPath !== '/admin') {\n        setMessage('Admins can only log in at /admin');\n        setLoading(false);\n        return;\n      }\n      if (userRole === 'subadmin' && currentPath !== '/subadmin') {\n        setMessage('Subadmins can only log in at /subadmin');\n        setLoading(false);\n        return;\n      }\n      setMessage('Login successful!');\n      localStorage.setItem('token', res.data.token);\n      localStorage.setItem('userEmail', formData.email);\n      window.location.href = '/';\n      if (onSuccess) onSuccess();\n    } catch (err) {\n      setMessage(\n        err.response?.data?.message ||\n        err.response?.data?.error ||\n        err.message ||\n        'Login failed.'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{\n      width: 1050,\n      maxWidth: '95vw',\n      minWidth: 800,\n      margin: '0 auto',\n      background: '#fff',\n      borderRadius: 24,\n      boxShadow: '0 4px 32px rgba(44,62,80,0.12)',\n      padding: '3.5rem 2.5rem 2.5rem 2.5rem',\n      fontFamily: 'Poppins, Arial, sans-serif',\n      position: 'relative',\n      minHeight: 600,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n    }}>\n      <h2 style={{\n        textAlign: 'left',\n        marginBottom: '2.5rem',\n        color: '#222',\n        fontWeight: 700,\n        fontSize: '2.6rem',\n        letterSpacing: 0.5,\n        alignSelf: 'flex-start',\n        marginLeft: 0,\n        marginTop: 10\n      }}>Login to Your Account</h2>\n      <form onSubmit={handleSubmit} style={{ width: '100%', maxWidth: 900 }}>\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '2rem', display: 'block' }}>Email</label>\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          required\n          style={{\n            width: '100%',\n            padding: '1.5rem',\n            borderRadius: 8,\n            border: '1.5px solid #e0e0e0',\n            fontSize: '1.5rem',\n            outline: 'none',\n            background: '#fff',\n            marginBottom: 48,\n            marginTop: 0,\n            boxSizing: 'border-box',\n          }}\n        />\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '2rem', display: 'block' }}>Password</label>\n        <input\n          type=\"password\"\n          name=\"password\"\n          value={formData.password}\n          onChange={handleChange}\n          required\n          style={{\n            width: '100%',\n            padding: '1.5rem',\n            borderRadius: 8,\n            border: '1.5px solid #e0e0e0',\n            fontSize: '1.5rem',\n            outline: 'none',\n            background: '#fff',\n            marginBottom: 48,\n            marginTop: 0,\n            boxSizing: 'border-box',\n          }}\n        />\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: 48 }}>\n          <input type=\"checkbox\" id=\"remember\" name=\"remember\" checked={formData.remember} onChange={handleChange} style={{ marginRight: 18, width: 28, height: 28 }} />\n          <label htmlFor=\"remember\" style={{ fontWeight: 700, color: '#444', fontSize: '1.6rem', letterSpacing: 0.2 }}>Remember me</label>\n        </div>\n        <button type=\"submit\" style={{\n          background: '#e74c3c',\n          color: '#fff',\n          border: 'none',\n          padding: '1.3rem 0',\n          borderRadius: 10,\n          fontWeight: 700,\n          fontSize: '2rem',\n          marginTop: 0,\n          marginBottom: 48,\n          cursor: loading ? 'not-allowed' : 'pointer',\n          opacity: formData.email && formData.password ? 1 : 0.7,\n          width: 180,\n          alignSelf: 'flex-start',\n          transition: 'background 0.2s',\n          boxShadow: '0 2px 8px #f6f6f7',\n        }} disabled={!formData.email || !formData.password || loading}>\n          Login\n        </button>\n        {message && <div style={{ color: '#e74c3c', marginBottom: 18, textAlign: 'center', fontWeight: 600, fontSize: '1.2rem' }}>{message}</div>}\n        <div style={{ textAlign: 'center', marginTop: 0 }}>\n          <a href=\"#\" style={{ color: '#2196f3', fontWeight: 700, textDecoration: 'none', fontSize: '1.35rem', marginBottom: 8, display: 'inline-block' }}>Forgot password?</a>\n        </div>\n        <div style={{ marginTop: 18, textAlign: 'center', color: '#444', fontSize: '1.35rem' }}>\n          Don't have an account?{' '}\n          <span style={{ color: '#2196f3', fontWeight: 700, cursor: 'pointer' }} onClick={onSwitchToRegister}>Register</span>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Auth;","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE = '/api/auth';\r\n\r\nconst Register = ({ onSuccess, onSwitchToLogin }) => {\r\n  const [registerType, setRegisterType] = useState('buyer'); // 'buyer' or 'shop'\r\n  // Buyer (normal user) form\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    email: '',\r\n    phone: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    city: '',\r\n    terms: false\r\n  });\r\n  // Shop (subadmin) form\r\n  const [shopData, setShopData] = useState({\r\n    shopName: '',\r\n    licenseCertificate: null, // file\r\n    tin: '',\r\n    location: '',\r\n    address: '',\r\n    owner: '',\r\n    email: '',\r\n    phone: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    terms: false\r\n  });\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked, files } = e.target;\r\n    if (registerType === 'buyer') {\r\n      setFormData({ ...formData, [name]: type === 'checkbox' ? checked : value });\r\n    } else {\r\n      if (name === 'licenseCertificate') {\r\n        setShopData({ ...shopData, licenseCertificate: files[0] });\r\n      } else {\r\n        setShopData({ ...shopData, [name]: type === 'checkbox' ? checked : value });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n    if (registerType === 'buyer') {\r\n      if (!formData.terms) {\r\n        setMessage('You must agree to the terms.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      if (formData.password !== formData.confirmPassword) {\r\n        setMessage('Passwords do not match.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      try {\r\n        await axios.post(`${API_BASE}/register`, formData);\r\n        setMessage('Registration successful! You can now log in.');\r\n        if (onSuccess) onSuccess();\r\n      } catch (err) {\r\n        setMessage(\r\n          err.response?.data?.message ||\r\n          err.response?.data?.error ||\r\n          err.message ||\r\n          'Registration failed.'\r\n        );\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      // Shop registration\r\n      if (!shopData.terms) {\r\n        setMessage('You must agree to the terms.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      if (shopData.password !== shopData.confirmPassword) {\r\n        setMessage('Passwords do not match.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      // Basic validation\r\n      if (!shopData.shopName || !shopData.licenseCertificate || !shopData.tin || !shopData.location || !shopData.address || !shopData.owner || !shopData.email || !shopData.phone) {\r\n        setMessage('Please fill in all required fields and upload the license certificate.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      try {\r\n        const formDataObj = new FormData();\r\n        Object.entries(shopData).forEach(([key, value]) => {\r\n          if (key === 'licenseCertificate' && value) {\r\n            formDataObj.append('licenseCertificate', value);\r\n          } else {\r\n            formDataObj.append(key, value);\r\n          }\r\n        });\r\n        await axios.post(`${API_BASE}/register-shop`, formDataObj, { headers: { 'Content-Type': 'multipart/form-data' } });\r\n        setMessage('Shop registration submitted! Your request will be reviewed by the admin.');\r\n        setShopData({\r\n          shopName: '', licenseCertificate: null, tin: '', location: '', address: '', owner: '', email: '', phone: '', password: '', confirmPassword: '', terms: false\r\n        });\r\n      } catch (err) {\r\n        setMessage(\r\n          err.response?.data?.message ||\r\n          err.response?.data?.error ||\r\n          err.message ||\r\n          'Shop registration failed.'\r\n        );\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      width: 1050,\r\n      maxWidth: '95vw',\r\n      minWidth: 800,\r\n      margin: '0 auto',\r\n      background: '#fff',\r\n      borderRadius: 24,\r\n      boxShadow: '0 4px 32px rgba(44,62,80,0.12)',\r\n      padding: '3.5rem 2.5rem 2.5rem 2.5rem',\r\n      fontFamily: 'Poppins, Arial, sans-serif',\r\n      position: 'relative',\r\n      minHeight: 600,\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n    }}>\r\n      <h2 style={{\r\n        textAlign: 'left',\r\n        marginBottom: '2.5rem',\r\n        color: '#222',\r\n        fontWeight: 700,\r\n        fontSize: '2.2rem',\r\n        letterSpacing: 0.5,\r\n        alignSelf: 'flex-start',\r\n        marginLeft: 0,\r\n        marginTop: 10\r\n      }}>Create an Account</h2>\r\n      {/* Register type selector */}\r\n      <div style={{ display: 'flex', gap: 24, marginBottom: 36 }}>\r\n        <button type=\"button\" className={registerType === 'buyer' ? 'btn btn-primary' : 'btn btn-outline'} style={{ minWidth: 180 }} onClick={() => setRegisterType('buyer')}>Register as Buyer</button>\r\n        <button type=\"button\" className={registerType === 'shop' ? 'btn btn-primary' : 'btn btn-outline'} style={{ minWidth: 180 }} onClick={() => setRegisterType('shop')}>Register as Shop</button>\r\n      </div>\r\n      {registerType === 'buyer' ? (\r\n        <form onSubmit={handleSubmit} style={{ width: '100%', maxWidth: 900 }}>\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Full Name</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Email</label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Phone Number</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"phone\"\r\n            value={formData.phone}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Password</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Confirm Password</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"confirmPassword\"\r\n            value={formData.confirmPassword}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>City</label>\r\n          <select\r\n            name=\"city\"\r\n            value={formData.city}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          >\r\n            <option value=\"\">Select City</option>\r\n            <option value=\"Addis Ababa\">Addis Ababa</option>\r\n            <option value=\"Hawassa\">Hawassa</option>\r\n            <option value=\"DireDawa\">DireDawa</option>\r\n            <option value=\"Adamma\">Adama</option>\r\n            <option value=\"Mekelle\">Mekelle</option>\r\n            <option value=\"Other\">Other</option>\r\n          </select>\r\n          <div style={{ marginBottom: 32, display: 'flex', alignItems: 'center' }}>\r\n            <input type=\"checkbox\" id=\"terms\" name=\"terms\" checked={formData.terms} onChange={handleChange} required style={{ marginRight: 12, width: 22, height: 22 }} />\r\n            <label htmlFor=\"terms\" style={{ fontWeight: 700, color: '#222', fontSize: '1.15rem', verticalAlign: 'middle' }}>\r\n              I agree to the Terms of Service and Privacy Policy\r\n            </label>\r\n          </div>\r\n          <button type=\"submit\" style={{\r\n            background: '#e74c3c',\r\n            color: '#fff',\r\n            border: 'none',\r\n            padding: '1.1rem 0',\r\n            borderRadius: 8,\r\n            fontWeight: 700,\r\n            fontSize: '1.25rem',\r\n            marginTop: 0,\r\n            marginBottom: 32,\r\n            cursor: loading ? 'not-allowed' : 'pointer',\r\n            opacity: formData.username && formData.email && formData.phone && formData.password && formData.confirmPassword && formData.city && formData.terms ? 1 : 0.7,\r\n            width: 120,\r\n            alignSelf: 'flex-start',\r\n            transition: 'background 0.2s',\r\n          }} disabled={!(formData.username && formData.email && formData.phone && formData.password && formData.confirmPassword && formData.city && formData.terms) || loading}>\r\n            Register\r\n          </button>\r\n          {message && <div style={{ color: '#e74c3c', marginBottom: 18, textAlign: 'center', fontWeight: 600, fontSize: '1.1rem' }}>{message}</div>}\r\n          <div style={{ marginTop: 18, textAlign: 'center', color: '#444', fontSize: '1.15rem' }}>\r\n            Already have an account?{' '}\r\n            <span style={{ color: '#2196f3', fontWeight: 700, cursor: 'pointer' }} onClick={onSwitchToLogin}>Login</span>\r\n          </div>\r\n        </form>\r\n      ) : (\r\n        <form onSubmit={handleSubmit} style={{ width: '100%', maxWidth: 900 }} encType=\"multipart/form-data\">\r\n          {/* Shop registration form */}\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Shop Name</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"shopName\"\r\n            value={shopData.shopName}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>License Certificate (PDF or Image)</label>\r\n          <input\r\n            type=\"file\"\r\n            name=\"licenseCertificate\"\r\n            accept=\".pdf,image/*\"\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>TIN Number</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"tin\"\r\n            value={shopData.tin}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Location</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"location\"\r\n            value={shopData.location}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Address</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"address\"\r\n            value={shopData.address}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Owner Name</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"owner\"\r\n            value={shopData.owner}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Email</label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={shopData.email}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Phone Number</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"phone\"\r\n            value={shopData.phone}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Password</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={shopData.password}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <label style={{ fontWeight: 700, color: '#333', marginBottom: 12, fontSize: '1.25rem', display: 'block' }}>Confirm Password</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"confirmPassword\"\r\n            value={shopData.confirmPassword}\r\n            onChange={handleChange}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '1.2rem',\r\n              borderRadius: 8,\r\n              border: '1.5px solid #e0e0e0',\r\n              fontSize: '1.15rem',\r\n              outline: 'none',\r\n              background: '#fff',\r\n              marginBottom: 32,\r\n              marginTop: 0,\r\n              boxSizing: 'border-box',\r\n            }}\r\n          />\r\n          <div style={{ marginBottom: 32, display: 'flex', alignItems: 'center' }}>\r\n            <input type=\"checkbox\" id=\"shop-terms\" name=\"terms\" checked={shopData.terms} onChange={handleChange} required style={{ marginRight: 12, width: 22, height: 22 }} />\r\n            <label htmlFor=\"shop-terms\" style={{ fontWeight: 700, color: '#222', fontSize: '1.15rem', verticalAlign: 'middle' }}>\r\n              I agree to the Terms of Service and Privacy Policy\r\n            </label>\r\n          </div>\r\n          <button type=\"submit\" style={{\r\n            background: '#e74c3c',\r\n            color: '#fff',\r\n            border: 'none',\r\n            padding: '1.1rem 0',\r\n            borderRadius: 8,\r\n            fontWeight: 700,\r\n            fontSize: '1.25rem',\r\n            marginTop: 0,\r\n            marginBottom: 32,\r\n            cursor: loading ? 'not-allowed' : 'pointer',\r\n            opacity: shopData.shopName && shopData.licenseCertificate && shopData.tin && shopData.location && shopData.address && shopData.owner && shopData.email && shopData.phone && shopData.password && shopData.confirmPassword && shopData.terms ? 1 : 0.7,\r\n            width: 120,\r\n            alignSelf: 'flex-start',\r\n            transition: 'background 0.2s',\r\n          }} disabled={!(shopData.shopName && shopData.licenseCertificate && shopData.tin && shopData.location && shopData.address && shopData.owner && shopData.email && shopData.phone && shopData.password && shopData.confirmPassword && shopData.terms) || loading}>\r\n            Register\r\n          </button>\r\n          {message && <div style={{ color: '#e74c3c', marginBottom: 18, textAlign: 'center', fontWeight: 600, fontSize: '1.1rem' }}>{message}</div>}\r\n          <div style={{ marginTop: 18, textAlign: 'center', color: '#444', fontSize: '1.15rem' }}>\r\n            Already have an account?{' '}\r\n            <span style={{ color: '#2196f3', fontWeight: 700, cursor: 'pointer' }} onClick={onSwitchToLogin}>Login</span>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import axios from 'axios';\r\n\r\nconst API_BASE = '/api/orders';\r\n\r\nexport const addToCart = async (productId, quantity) => {\r\n  const res = await axios.post(`${API_BASE}/cart/add`, { productId, quantity });\r\n  return res.data;\r\n};\r\n\r\nexport const getCart = async () => {\r\n  const res = await axios.get(`${API_BASE}/cart`);\r\n  return res.data;\r\n};\r\n\r\nexport const removeFromCart = async (productId) => {\r\n  const res = await axios.post(`${API_BASE}/cart/remove`, { productId });\r\n  return res.data;\r\n};\r\n\r\nexport const placeOrder = async () => {\r\n  const res = await axios.post(`${API_BASE}/place-order`);\r\n  return res.data;\r\n};\r\n\r\nexport const payOrder = async (orderId) => {\r\n  const res = await axios.post(`${API_BASE}/pay`, { orderId });\r\n  return res.data;\r\n};\r\n\r\nexport const deliverOrder = async (orderId) => {\r\n  const res = await axios.post(`${API_BASE}/deliver`, { orderId });\r\n  return res.data;\r\n};\r\n","import React, { useState } from 'react';\r\nimport { placeOrder } from '../api/orderApi';\r\n\r\nconst CartPage = () => {\r\n  const cart = JSON.parse(localStorage.getItem('cart')) || [];\r\n  const total = cart.reduce((sum, item) => sum + (item.price * (item.quantity || 1)), 0);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handlePayNow = async () => {\r\n    console.log('DEBUG: Pay Now button clicked');\r\n    alert('DEBUG: Pay Now button clicked');\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('DEBUG: Calling placeOrder with token', token);\r\n      const res = await placeOrder({\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setMessage('Order placed successfully!');\r\n      localStorage.removeItem('cart');\r\n    } catch (err) {\r\n      setMessage('Order failed: ' + (err.response?.data?.error || err.message));\r\n      console.log('DEBUG: Order failed', err);\r\n      alert('DEBUG: Order failed: ' + (err.response?.data?.error || err.message));\r\n    }\r\n  };\r\n\r\n  if (cart.length === 0) return <div style={{padding: '2rem'}}><h2>Your cart is empty.</h2></div>;\r\n\r\n  return (\r\n    <div style={{maxWidth: 600, margin: '2rem auto', background: '#fff', borderRadius: 8, boxShadow: '0 2px 8px #eee', padding: 24}}>\r\n      <h2>Your Cart</h2>\r\n      <ul style={{listStyle: 'none', padding: 0}}>\r\n        {cart.map(item => (\r\n          <li key={item._id} style={{marginBottom: 16, borderBottom: '1px solid #eee', paddingBottom: 8}}>\r\n            <div style={{display: 'flex', alignItems: 'center'}}>\r\n              {item.image && <img src={item.image} alt={item.name} style={{width: 60, height: 60, objectFit: 'cover', borderRadius: 4, marginRight: 16}} />}\r\n              <div style={{flex: 1}}>\r\n                <strong>{item.name}</strong><br/>\r\n                <span>Price: ${item.price} x {item.quantity || 1}</span><br/>\r\n                <span>Total: ${(item.price * (item.quantity || 1)).toFixed(2)}</span>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <div style={{marginTop: 24, fontWeight: 'bold', fontSize: 18}}>\r\n        Cart Total: ${total.toFixed(2)}\r\n      </div>\r\n      <div style={{marginTop: 24}}>\r\n        <h3>Payment Options</h3>\r\n        <button\r\n          style={{padding: '0.5rem 2rem', background: '#27ae60', color: '#fff', border: 'none', borderRadius: 4, fontSize: 16, cursor: 'pointer'}}\r\n          onClick={handlePayNow}\r\n        >\r\n          Pay Now (Demo)\r\n        </button>\r\n        {message && <div style={{marginTop: 16, color: message.startsWith('Order placed') ? 'green' : 'red'}}>{message}</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartPage;\r\n","import React from 'react';\r\n\r\nconst About = () => (\r\n  <div style={{maxWidth: 700, margin: '2rem auto', background: '#fff', borderRadius: 8, boxShadow: '0 2px 8px #eee', padding: 24}}>\r\n    <h2>About Us</h2>\r\n    <p>We are dedicated to providing a wide range of quality automotive spare parts for all your vehicle needs. Our mission is to make it easy for you to find and purchase the right parts, with fast delivery and excellent customer service.</p>\r\n  </div>\r\n);\r\n\r\nexport default About;\r\n","import React from 'react';\r\n\r\nconst Contact = () => (\r\n  <div style={{maxWidth: 700, margin: '2rem auto', background: '#fff', borderRadius: 8, boxShadow: '0 2px 8px #eee', padding: 24}}>\r\n    <h2>Contact Us</h2>\r\n    <p>For inquiries, support, or feedback, please email us at <a href=\"ermias@.com\">er@spareparts.com</a> or call (123) 456-7890.</p>\r\n  </div>\r\n);\r\n\r\nexport default Contact;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst makes = ['Toyota', 'Honda', 'Ford', 'BMW', 'Mercedes'];\r\nconst models = {\r\n  Toyota: ['Corolla', 'Camry', 'RAV4'],\r\n  Honda: ['Civic', 'Accord', 'CR-V'],\r\n  Ford: ['Focus', 'Fusion', 'Escape'],\r\n  BMW: ['3 Series', '5 Series', 'X5'],\r\n  Mercedes: ['C-Class', 'E-Class', 'GLA']\r\n};\r\nconst years = Array.from({ length: 25 }, (_, i) => 2025 - i);\r\nconst categories = ['Engine Parts', 'Brake System', 'Cooling System', 'Lighting', 'Others'];\r\n\r\nconst ProductForm = ({ onProductAdded, user }) => {\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: '',\r\n    category: '',\r\n    stock: '',\r\n    make: '',\r\n    model: '',\r\n    year: ''\r\n  });\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [paymentCode, setPaymentCode] = useState('');\r\n  const [paymentMethod, setPaymentMethod] = useState('');\r\n  const [showPayment, setShowPayment] = useState(false);\r\n  // Track free post count only for user role\r\n  const [freePostsLeft, setFreePostsLeft] = useState(user?.role === 'user' ? 3 : Infinity);\r\n  React.useEffect(() => {\r\n    if (user?.role !== 'user') {\r\n      setFreePostsLeft(Infinity);\r\n      return;\r\n    }\r\n    const fetchPostCount = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setFreePostsLeft(3);\r\n        return;\r\n      }\r\n      try {\r\n        const res = await axios.get('http://localhost:5000/api/auth/me', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setFreePostsLeft(3 - (res.data.postCount || 0));\r\n      } catch {\r\n        setFreePostsLeft(3);\r\n      }\r\n    };\r\n    fetchPostCount();\r\n  }, [user]);\r\n\r\n  // Update freePostsLeft after each successful post\r\n  const updateFreePosts = async () => {\r\n    if (user?.role !== 'user') return;\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/auth/me', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setFreePostsLeft(3 - (res.data.postCount || 0));\r\n    } catch {}\r\n  };\r\n\r\n  const handleChange = e => setForm({ ...form, [e.target.name]: e.target.value });\r\n  const handleMakeChange = e => {\r\n    setForm({ ...form, make: e.target.value, model: '' });\r\n  };\r\n  const handleImageChange = e => {\r\n    setImageFile(e.target.files[0]);\r\n  };\r\n  const handlePayment = async () => {\r\n    if (!paymentCode.trim()) {\r\n      setMessage('Please enter your payment confirmation code.');\r\n      return;\r\n    }\r\n    setShowPayment(false);\r\n    // Proceed to post with paid: true\r\n    await handleSubmitPaid();\r\n  };\r\n  const handleSubmitPaid = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setMessage('You must be logged in to add products.');\r\n      return;\r\n    }\r\n    try {\r\n      const formData = new FormData();\r\n      Object.entries(form).forEach(([key, value]) => formData.append(key, value));\r\n      if (imageFile) formData.append('image', imageFile);\r\n      formData.append('paid', 'true');\r\n      formData.append('paymentMethod', paymentMethod);\r\n      formData.append('paymentCode', paymentCode);\r\n      await axios.post('http://localhost:5000/api/products', formData, {\r\n        headers: { Authorization: `Bearer ${token}`, 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      setMessage('Product added!');\r\n      setForm({ name: '', description: '', price: '', category: '', stock: '', make: '', model: '', year: '' });\r\n      setImageFile(null);\r\n      setPaymentCode('');\r\n      setFreePostsLeft(freePostsLeft);\r\n      if (onProductAdded) onProductAdded();\r\n    } catch (err) {\r\n      setMessage(err.response?.data?.error || 'Error adding product');\r\n    }\r\n  };\r\n  const getToken = () => {\r\n    // Try user prop first, then localStorage\r\n    if (user?.token) return user.token;\r\n    const userObj = localStorage.getItem('user');\r\n    if (userObj) {\r\n      try {\r\n        const parsed = JSON.parse(userObj);\r\n        if (parsed.token) return parsed.token;\r\n      } catch {}\r\n    }\r\n    return localStorage.getItem('token');\r\n  };\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const token = getToken();\r\n    if (!token) {\r\n      setMessage('You must be logged in to add products. Please log in again.');\r\n      return;\r\n    }\r\n    try {\r\n      const formData = new FormData();\r\n      Object.entries(form).forEach(([key, value]) => formData.append(key, value));\r\n      if (imageFile) formData.append('image', imageFile);\r\n      const res = await axios.post('http://localhost:5000/api/products', formData, {\r\n        headers: { Authorization: `Bearer ${token}`, 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      setMessage('Product added!');\r\n      setForm({ name: '', description: '', price: '', category: '', stock: '', make: '', model: '', year: '' });\r\n      setImageFile(null);\r\n      updateFreePosts();\r\n      if (onProductAdded) onProductAdded();\r\n    } catch (err) {\r\n      if (err.response?.data?.message === 'Invalid token.') {\r\n        setMessage('Session expired or invalid. Please log in again.');\r\n      } else {\r\n        setMessage(err.response?.data?.error || 'Error adding product');\r\n      }\r\n    }\r\n  };\r\n  const handleAddProduct = (e) => {\r\n    if (user?.role === 'user' && freePostsLeft <= 0) {\r\n      e.preventDefault();\r\n      setMessage('You have used all free posts. Please pay to post more items.');\r\n      setShowPayment(true); // Open payment modal immediately\r\n      return;\r\n    }\r\n    handleSubmit(e);\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%', maxWidth: 500, minWidth: 280, margin: '0 auto', background: '#fff', borderRadius: 16, boxShadow: '0 4px 24px rgba(44,62,80,0.10)', padding: '2rem 1.2rem 1.2rem 1.2rem', fontFamily: 'Poppins, Arial, sans-serif', position: 'relative', minHeight: 400, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'flex-start', maxHeight: '70vh', overflowY: 'auto' }}>\r\n      <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',width:'100%',maxWidth:400,marginBottom:18}}>\r\n        <h2 style={{ textAlign: 'left', color: '#222', fontWeight: 700, fontSize: '1.5rem', letterSpacing: 0.5, margin: 0 }}>Add New Product</h2>\r\n        {user?.role === 'user' && <div style={{fontWeight:600, color:'#3a6cf6', fontSize:16}}>Free posts left: {freePostsLeft > 0 ? freePostsLeft : 0} / 3</div>}\r\n      </div>\r\n      {user?.role === 'user' && freePostsLeft <= 0 && <div style={{color:'#e74c3c', marginBottom:18, fontWeight:600, fontSize:16}}>You have used all free posts. Please pay to post more items.</div>}\r\n      <form onSubmit={handleAddProduct} encType=\"multipart/form-data\" style={{ width: '100%', maxWidth: 400 }}>\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Name</label>\r\n        <input name=\"name\" placeholder=\"Name\" value={form.name} onChange={handleChange} required style={{ width: '100%', padding: '1rem', borderRadius: 8, border: '1.5px solid #e0e0e0', fontSize: '1rem', outline: 'none', background: '#fff', marginBottom: 24, marginTop: 0, boxSizing: 'border-box' }} />\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Description</label>\r\n        <input name=\"description\" placeholder=\"Description\" value={form.description} onChange={handleChange} style={{ width: '100%', padding: '1rem', borderRadius: 8, border: '1.5px solid #e0e0e0', fontSize: '1rem', outline: 'none', background: '#fff', marginBottom: 24, marginTop: 0, boxSizing: 'border-box' }} />\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Price</label>\r\n        <input name=\"price\" type=\"number\" placeholder=\"Price\" value={form.price} onChange={handleChange} required style={{ width: '100%', padding: '1rem', borderRadius: 8, border: '1.5px solid #e0e0e0', fontSize: '1rem', outline: 'none', background: '#fff', marginBottom: 24, marginTop: 0, boxSizing: 'border-box' }} />\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Category</label>\r\n        <select name=\"category\" value={form.category} onChange={handleChange} required style={{ width: '100%', padding: '1rem', borderRadius: 8, border: '1.5px solid #e0e0e0', fontSize: '1rem', outline: 'none', background: '#fff', marginBottom: 24, marginTop: 0, boxSizing: 'border-box' }}>\r\n          <option value=\"\">Select Category</option>\r\n          {categories.map(cat => (\r\n            <option key={cat} value={cat}>{cat}</option>\r\n          ))}\r\n        </select>\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Stock</label>\r\n        <input name=\"stock\" type=\"number\" placeholder=\"Stock\" value={form.stock} onChange={handleChange} style={{ width: '100%', padding: '1rem', borderRadius: 8, border: '1.5px solid #e0e0e0', fontSize: '1rem', outline: 'none', background: '#fff', marginBottom: 24, marginTop: 0, boxSizing: 'border-box' }} />\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Make</label>\r\n        <select name=\"make\" value={form.make} onChange={handleMakeChange} required style={{ width: '100%', padding: '1rem', borderRadius: 8, border: '1.5px solid #e0e0e0', fontSize: '1rem', outline: 'none', background: '#fff', marginBottom: 24, marginTop: 0, boxSizing: 'border-box' }}>\r\n          <option value=\"\">Select Make</option>\r\n          {makes.map(make => (\r\n            <option key={make} value={make}>{make}</option>\r\n          ))}\r\n        </select>\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Model</label>\r\n        <select name=\"model\" value={form.model} onChange={handleChange} required disabled={!form.make} style={{ width: '100%', padding: '1rem', borderRadius: 8, border: '1.5px solid #e0e0e0', fontSize: '1rem', outline: 'none', background: '#fff', marginBottom: 24, marginTop: 0, boxSizing: 'border-box' }}>\r\n          <option value=\"\">Select Model</option>\r\n          {form.make && models[form.make].map(model => (\r\n            <option key={model} value={model}>{model}</option>\r\n          ))}\r\n        </select>\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Year</label>\r\n        <select name=\"year\" value={form.year} onChange={handleChange} required style={{ width: '100%', padding: '1rem', borderRadius: 8, border: '1.5px solid #e0e0e0', fontSize: '1rem', outline: 'none', background: '#fff', marginBottom: 24, marginTop: 0, boxSizing: 'border-box' }}>\r\n          <option value=\"\">Select Year</option>\r\n          {years.map(year => (\r\n            <option key={year} value={year}>{year}</option>\r\n          ))}\r\n        </select>\r\n        <label style={{ fontWeight: 700, color: '#333', marginBottom: 10, fontSize: '1rem', display: 'block' }}>Image</label>\r\n        <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} style={{ marginBottom: 24 }} />\r\n        <button type=\"submit\" style={{ background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 8, fontWeight: 700, fontSize: '1.1rem', marginTop: 0, marginBottom: 24, cursor: 'pointer', width: 180, alignSelf: 'flex-start', transition: 'background 0.2s' }}>Add Product</button>\r\n        {message && <div style={{ color: '#e74c3c', marginBottom: 18, textAlign: 'center', fontWeight: 600, fontSize: '1rem' }}>{message}</div>}\r\n      </form>\r\n      {showPayment && (\r\n  <div style={{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(44,62,80,0.18)',zIndex:2200,display:'flex',alignItems:'center',justifyContent:'center'}}>\r\n    <div style={{background:'#fff',padding:24,borderRadius:12,minWidth:340,maxWidth:400,boxShadow:'0 2px 12px #23294655',color:'#232946',display:'flex',flexDirection:'column',gap:12}}>\r\n      <h3 style={{marginBottom:8}}>Payment Required</h3>\r\n      <div style={{marginBottom:8}}>You have used all free posts. Please pay 10 birr via Telebirr or CBE to post more items.</div>\r\n      <select value={paymentMethod} onChange={e=>setPaymentMethod(e.target.value)} style={{marginBottom:8,padding:8,borderRadius:8,border:'1px solid #ccc'}}>\r\n        <option value=\"\">Select Payment Method</option>\r\n        <option value=\"Telebirr\">Telebirr</option>\r\n        <option value=\"CBE\">CBE</option>\r\n      </select>\r\n      <input type=\"text\" value={paymentCode} onChange={e=>setPaymentCode(e.target.value)} placeholder=\"Enter payment confirmation code\" style={{marginBottom:8,padding:8,borderRadius:8,border:'1px solid #ccc'}} />\r\n      <button className=\"btn btn-primary\" onClick={handlePayment} style={{padding:'8px 16px',borderRadius:8}}>Submit Payment & Post</button>\r\n      <button className=\"btn btn-outline\" onClick={()=>setShowPayment(false)} style={{marginTop:8}}>Cancel</button>\r\n    </div>\r\n  </div>\r\n)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductForm;\r\n","import React, { useState, useRef } from 'react';\r\nimport ProductForm from '../components/ProductForm';\r\n\r\n// Modal with functional vertical slider bar\r\nfunction StaticModal({ children, onClose }) {\r\n  const contentRef = useRef(null);\r\n  const [dragging, setDragging] = useState(false);\r\n  const [startY, setStartY] = useState(0);\r\n  const [startScroll, setStartScroll] = useState(0);\r\n\r\n  const handleDragStart = (e) => {\r\n    setDragging(true);\r\n    setStartY(e.clientY);\r\n    setStartScroll(contentRef.current.scrollTop);\r\n    document.body.style.userSelect = 'none';\r\n  };\r\n\r\n  const handleDrag = (e) => {\r\n    if (!dragging) return;\r\n    const deltaY = e.clientY - startY;\r\n    contentRef.current.scrollTop = startScroll + deltaY * 2; // Adjust scroll speed as needed\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    setDragging(false);\r\n    document.body.style.userSelect = '';\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (dragging) {\r\n      window.addEventListener('mousemove', handleDrag);\r\n      window.addEventListener('mouseup', handleDragEnd);\r\n    } else {\r\n      window.removeEventListener('mousemove', handleDrag);\r\n      window.removeEventListener('mouseup', handleDragEnd);\r\n    }\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleDrag);\r\n      window.removeEventListener('mouseup', handleDragEnd);\r\n    };\r\n  }, [dragging]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        background: '#fff', padding: '2.5rem 2rem 2rem', borderRadius: 12, minWidth: 370, maxWidth: '95vw', position: 'fixed', boxShadow: '0 8px 32px rgba(44,62,80,0.18)',\r\n        animation: 'modalSlideIn .35s cubic-bezier(.4,2,.6,1)', left: '50%', top: '15%', transform: 'translate(-50%, 0)', zIndex: 2100\r\n      }}\r\n    >\r\n      <div\r\n        className=\"modal-vertical-bar\"\r\n        style={{ position: 'absolute', top: 18, right: 0, width: 8, height: 'calc(100% - 36px)', background: 'linear-gradient(180deg, #e74c3c 0%, #2980ef 100%)', borderRadius: 4, cursor: 'ns-resize', zIndex: 2200 }}\r\n        title=\"Slide bar\"\r\n        onMouseDown={handleDragStart}\r\n      />\r\n      <button onClick={onClose} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700 }}>&times;</button>\r\n      <div ref={contentRef} style={{ maxHeight: '60vh', overflowY: 'auto', paddingRight: 12 }}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Post = () => {\r\n  const [showModal, setShowModal] = useState(true);\r\n  const handleClose = () => {\r\n    setShowModal(false);\r\n    window.location.href = '/';\r\n  };\r\n  if (!showModal) return null;\r\n  return (\r\n    <div style={{\r\n      position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.5)',\r\n      display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 2000\r\n    }}>\r\n      <StaticModal onClose={handleClose}>\r\n        <h2 style={{ fontWeight: 700, fontSize: '1.5rem', marginBottom: 24, color: '#222', textAlign: 'center' }}>\r\n          Add New Product\r\n        </h2>\r\n        <div style={{ margin: '0 auto', maxWidth: 370 }}>\r\n          <ProductForm />\r\n        </div>\r\n      </StaticModal>\r\n      <style>{`\r\n        @keyframes modalSlideIn {\r\n          from { transform: translateY(100vh); opacity: 0; }\r\n          to { transform: translateY(0); opacity: 1; }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Bar, Pie } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ArcElement\r\n} from 'chart.js';\r\nimport '../styles/admin.css';\r\nimport '../pages/styles/main.css';\r\nimport { FaHome, FaBoxOpen, FaUsers, FaChartBar, FaFileAlt, FaRegBell, FaCog, FaRegCommentDots, FaRegListAlt } from 'react-icons/fa';\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend, ArcElement);\r\n\r\nconst API_BASE = `http://${window.location.hostname}:5000/api`;\r\nconst ADMIN_USER = 'admin';\r\nconst ADMIN_PASS = 'admin123'; // Change to your secure password\r\n\r\nconst AdminPage = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [editing, setEditing] = useState(null);\r\n  const [form, setForm] = useState({ name: '', price: '', category: '', image: '', description: '' });\r\n  const [userForm, setUserForm] = useState({ username: '', email: '', password: '', role: 'subadmin' });\r\n  const [message, setMessage] = useState('');\r\n  const [auth, setAuth] = useState(false);\r\n  const [login, setLogin] = useState({ username: '', password: '' });\r\n  const [loginError, setLoginError] = useState('');\r\n  const [token, setToken] = useState('');\r\n  const [productSearch, setProductSearch] = useState(\"\");\r\n  const [userSearch, setUserSearch] = useState(\"\");\r\n  const [darkMode, setDarkMode] = useState(false);\r\n  const [editingUser, setEditingUser] = useState(null);\r\n  const [editUserForm, setEditUserForm] = useState({ username: '', email: '', role: 'subadmin', password: '' });\r\n  // For product image upload\r\n  const [imageFile, setImageFile] = useState(null);\r\n  // Password change modal state\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [passwordForm, setPasswordForm] = useState({ current: '', new: '', confirm: '' });\r\n  const [passwordMsg, setPasswordMsg] = useState('');\r\n\r\n  // --- Analytics and Activity Log State ---\r\n  const [analytics, setAnalytics] = useState({ productCount: 0, userCount: 0, totalSales: 0, totalRevenue: 0 });\r\n  const [activityLog, setActivityLog] = useState([]);\r\n\r\n  // --- Notifications State ---\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [showNotifDropdown, setShowNotifDropdown] = useState(false);\r\n  const [notifLoading, setNotifLoading] = useState(false);\r\n  const [notifError, setNotifError] = useState('');\r\n\r\n  // --- User Dropdown State ---\r\n  const [showUserDropdown, setShowUserDropdown] = useState(false);\r\n  const [showHeaderUserDropdown, setShowHeaderUserDropdown] = useState(false); // NEW: header avatar dropdown\r\n  const [adminProfile, setAdminProfile] = useState(null);\r\n\r\n  // --- Fix: Dropdown click-away hooks must always be called, never conditionally ---\r\n  useEffect(() => {\r\n    if (!showHeaderUserDropdown) return;\r\n    const close = () => setShowHeaderUserDropdown(false);\r\n    window.addEventListener('click', close);\r\n    return () => window.removeEventListener('click', close);\r\n  }, [showHeaderUserDropdown]);\r\n\r\n  useEffect(() => {\r\n    if (!showUserDropdown) return;\r\n    function handleClickAway(e) {\r\n      const avatar = document.getElementById('admin-header-avatar');\r\n      const dropdown = document.getElementById('admin-header-avatar-dropdown');\r\n      if (avatar && dropdown && !avatar.contains(e.target) && !dropdown.contains(e.target)) {\r\n        setShowUserDropdown(false);\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClickAway);\r\n    return () => document.removeEventListener('mousedown', handleClickAway);\r\n  }, [showUserDropdown]);\r\n\r\n  // Pagination state for products\r\n  const [productPage, setProductPage] = useState(1);\r\n  const productsPerPage = 10;\r\n\r\n  // --- Real-Time & Custom Analytics Data (mocked for demo) ---\r\n  const [activeUsers, setActiveUsers] = useState(12);\r\n  const [salesTicker, setSalesTicker] = useState([\r\n    { id: 1, msg: 'Order #1001: ETB 2,500' },\r\n    { id: 2, msg: 'Order #1002: ETB 1,200' },\r\n    { id: 3, msg: 'Order #1003: ETB 3,800' },\r\n  ]);\r\n  const [tickerIndex, setTickerIndex] = useState(0);\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setActiveUsers(u => u + (Math.random() > 0.5 ? 1 : -1));\r\n      setTickerIndex(i => (i + 1) % salesTicker.length);\r\n    }, 2500);\r\n    return () => clearInterval(interval);\r\n  }, [salesTicker.length]);\r\n  // Product/category heatmap (mocked)\r\n  const heatmapData = products.reduce((acc, p) => {\r\n    const cat = p.category || 'Uncategorized';\r\n    acc[cat] = (acc[cat] || 0) + (Number(p.sales) || 0);\r\n    return acc;\r\n  }, {});\r\n  const heatmapLabels = Object.keys(heatmapData);\r\n  const heatmapValues = Object.values(heatmapData);\r\n  // Recent logins (mocked)\r\n  const recentLogins = [\r\n    { user: 'admin', role: 'admin', time: '2025-07-14 09:12' },\r\n    { user: 'subadmin1', role: 'subadmin', time: '2025-07-14 08:55' },\r\n    { user: 'user123', role: 'user', time: '2025-07-14 08:40' },\r\n  ];\r\n  // Live server status (mocked)\r\n  const liveStatus = [\r\n    { label: 'API', status: 'online' },\r\n    { label: 'DB', status: 'online' },\r\n    { label: 'Worker', status: 'idle' },\r\n    { label: 'Cache', status: 'online' },\r\n  ];\r\n  // Toast notification state\r\n  const [toast, setToast] = useState(null);\r\n  const showToast = (msg, type = 'success') => {\r\n    setToast({ msg, type });\r\n    setTimeout(() => setToast(null), 2500);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth) {\r\n      fetchProducts();\r\n      fetchUsers();\r\n      fetchAnalytics();\r\n      fetchActivityLog();\r\n      fetchShopRequests();\r\n      fetchOrders();\r\n    }\r\n  }, [auth]);\r\n\r\n  // Restore token and auth from localStorage on mount\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem('token');\r\n    if (storedToken) {\r\n      setToken(storedToken);\r\n      setAuth(true);\r\n    }\r\n  }, []);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/products`, token ? { headers: { Authorization: `Bearer ${token}` } } : {});\r\n      setProducts(res.data);\r\n    } catch (err) {\r\n      setMessage('Failed to fetch products');\r\n    }\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/auth/users`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setUsers(res.data);\r\n      // Debug output\r\n      // console.log('Fetched users:', res.data);\r\n    } catch (err) {\r\n      setMessage('Failed to fetch users');\r\n      // Debug output\r\n      // console.error('Fetch users error:', err.response ? err.response.data : err);\r\n    }\r\n  };\r\n\r\n  const fetchAnalytics = async () => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/admin/analytics`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setAnalytics(res.data);\r\n    } catch (err) {\r\n      setMessage('Failed to fetch analytics');\r\n    }\r\n  };\r\n  const fetchActivityLog = async () => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/admin/activity-log`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setActivityLog(res.data.map(log => ({\r\n        ...log,\r\n        time: log.timestamp ? new Date(log.timestamp).toLocaleString() : '',\r\n        action: log.action || ''\r\n      })));\r\n    } catch (err) {\r\n      setMessage('Failed to fetch activity log');\r\n    }\r\n  };\r\n\r\n  // Fetch notifications\r\n  const fetchNotifications = async () => {\r\n    setNotifLoading(true);\r\n    setNotifError('');\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/admin/notifications`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setNotifications(res.data);\r\n    } catch (err) {\r\n      setNotifError('Failed to load notifications');\r\n    }\r\n    setNotifLoading(false);\r\n  };\r\n\r\n  // Fetch admin profile for dropdown\r\n  const fetchAdminProfile = async () => {\r\n    if (!token) return; // Don't fetch if no token\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/auth/me`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setAdminProfile(res.data);\r\n    } catch (err) {\r\n      // If unauthorized or bad request, force logout\r\n      if (err.response && (err.response.status === 401 || err.response.status === 400)) {\r\n        setAuth(false);\r\n        setToken('');\r\n        localStorage.removeItem('token');\r\n        window.location.reload();\r\n      }\r\n    }\r\n  };\r\n\r\n  // --- Shop Requests State ---\r\n  const [shopRequests, setShopRequests] = useState([]);\r\n  const [shopRequestsLoading, setShopRequestsLoading] = useState(false);\r\n  const [shopRequestsError, setShopRequestsError] = useState('');\r\n  const [shopRequestActionMsg, setShopRequestActionMsg] = useState('');\r\n  // NEW: State for viewing requester details\r\n  const [viewingRequest, setViewingRequest] = useState(null);\r\n\r\n  // Fetch shop registration requests\r\n  const fetchShopRequests = async () => {\r\n    setShopRequestsLoading(true);\r\n    setShopRequestsError('');\r\n    // Debug: print token and payload\r\n    try {\r\n      // console.log('fetchShopRequests: token', token);\r\n      if (!token) {\r\n        alert('Admin token missing. Please log in again.');\r\n        window.location.reload();\r\n        return;\r\n      }\r\n      try {\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        // console.log('fetchShopRequests: token payload', payload);\r\n      } catch (e) {\r\n        // console.log('fetchShopRequests: token decode error', e);\r\n      }\r\n      const res = await axios.get(`${API_BASE}/admin/shop-requests`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setShopRequests(res.data);\r\n    } catch (err) {\r\n      setShopRequestsError('Failed to load shop requests.');\r\n      // Debug: print error details\r\n      if (err.response) {\r\n        // console.log('fetchShopRequests: error response', err.response.status, err.response.data);\r\n      } else {\r\n        // console.log('fetchShopRequests: error', err);\r\n      }\r\n    }\r\n    setShopRequestsLoading(false);\r\n  };\r\n\r\n  // Handle approve/reject/request-info actions\r\n  const handleShopRequestAction = async (id, action, extra = {}) => {\r\n    setShopRequestActionMsg('');\r\n    try {\r\n      const res = await axios.patch(\r\n        `${API_BASE}/admin/shop-requests/${id}`,\r\n        { action, ...extra },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setShopRequestActionMsg(res.data.message || 'Action successful.');\r\n      fetchShopRequests();\r\n      if (action === 'approve') {\r\n        fetchUsers(); // Refresh users list after approval\r\n      }\r\n    } catch (err) {\r\n      setShopRequestActionMsg('Error: ' + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n\r\n  // --- Orders State and Fetch ---\r\n  const [orders, setOrders] = useState([]);\r\n  const [ordersLoading, setOrdersLoading] = useState(false);\r\n  const [ordersError, setOrdersError] = useState('');\r\n  const [viewingOrder, setViewingOrder] = useState(null);\r\n\r\n  const fetchOrders = async () => {\r\n    setOrdersLoading(true);\r\n    setOrdersError('');\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/orders`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setOrders(res.data);\r\n    } catch (err) {\r\n      setOrdersError('Failed to fetch orders');\r\n    }\r\n    setOrdersLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth) {\r\n      fetchProducts();\r\n      fetchUsers();\r\n      fetchAnalytics();\r\n      fetchActivityLog();\r\n      fetchShopRequests();\r\n      fetchOrders();\r\n    }\r\n  }, [auth]);\r\n\r\n  // CSV export helpers\r\n  function exportProductsCSV() {\r\n    const headers = ['Name', 'Price', 'Category', 'Image', 'Description'];\r\n    const rows = products.map(p => [p.name, p.price, p.category, p.image, p.description]);\r\n    let csv = headers.join(',') + '\\n';\r\n    csv += rows.map(r => r.map(x => '\"' + String(x).replace(/\"/g, '\"\"') + '\"').join(',')).join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'products.csv';\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  }\r\n  function exportUsersCSV() {\r\n    const headers = ['Username', 'Email', 'Role'];\r\n    const rows = users.map(u => [u.username, u.email, u.role]);\r\n    let csv = headers.join(',') + '\\n';\r\n    csv += rows.map(r => r.map(x => '\"' + String(x).replace(/\"/g, '\"\"') + '\"').join(',')).join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'users.csv';\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  }\r\n\r\n  // Stock alert for low-stock products\r\n  const lowStockProducts = products.filter(p => Number(p.stock) > 0 && Number(p.stock) <= 5);\r\n\r\n  // Sales summary and analytics (from backend)\r\n  const salesSummary = {\r\n    totalOrders: analytics.totalSales || 0,\r\n    totalRevenue: analytics.totalRevenue || 0,\r\n    topProduct: products[0]?.name || 'N/A',\r\n    productCount: analytics.productCount || 0,\r\n    userCount: analytics.userCount || 0\r\n  };\r\n\r\n  // Login input change handler\r\n  const handleLoginChange = e => {\r\n    const { name, value } = e.target;\r\n    setLogin(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Product form handlers\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setForm(f => ({ ...f, [name]: value }));\r\n  };\r\n  const handleImageChange = e => {\r\n    setImageFile(e.target.files[0]);\r\n  };\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      let imageUrl = form.image;\r\n      if (imageFile) {\r\n        const data = new FormData();\r\n        data.append('image', imageFile);\r\n        const uploadRes = await axios.post(`${API_BASE.replace('/api','')}/upload`, data, { headers: { Authorization: `Bearer ${token}` } });\r\n        imageUrl = uploadRes.data.url || uploadRes.data.path || uploadRes.data.filename || uploadRes.data.image;\r\n      }\r\n      if (editing) {\r\n        await axios.put(`${API_BASE}/products/${editing._id}`, { ...form, image: imageUrl }, { headers: { Authorization: `Bearer ${token}` } });\r\n        setMessage('Product updated!');\r\n      } else {\r\n        // Assign a uniqueId to every new product and link to seller and subadmin/shop manager\r\n        let sellerId = null;\r\n        let managerId = null;\r\n        // If the current user is a seller, use their uniqueId\r\n        if (adminProfile && adminProfile.role === 'seller' && adminProfile.uniqueId) {\r\n          sellerId = adminProfile.uniqueId;\r\n        }\r\n        // If the current user is a subadmin, use their uniqueId as managerId\r\n        if (adminProfile && adminProfile.role === 'subadmin' && adminProfile.uniqueId) {\r\n          managerId = adminProfile.uniqueId;\r\n        }\r\n        // If the current user is a seller and has a managerId, use it\r\n        if (adminProfile && adminProfile.role === 'seller' && adminProfile.managerId) {\r\n          managerId = adminProfile.managerId;\r\n        }\r\n        const productData = {\r\n          ...form,\r\n          image: imageUrl,\r\n          uniqueId: 'product-' + Date.now() + '-' + Math.floor(Math.random() * 10000),\r\n          sellerId,\r\n          managerId\r\n        };\r\n        await axios.post(`${API_BASE}/products`, productData, { headers: { Authorization: `Bearer ${token}` } });\r\n        setMessage('Product added!');\r\n      }\r\n      setForm({ name: '', price: '', category: '', image: '', description: '' });\r\n      setImageFile(null);\r\n      setEditing(null);\r\n      fetchProducts();\r\n    } catch (err) {\r\n      setMessage('Error saving product: ' + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n  const handleEdit = product => {\r\n    setEditing(product);\r\n    setForm({\r\n      name: product.name || '',\r\n      price: product.price || '',\r\n      category: product.category || '',\r\n      image: product.image || '',\r\n      description: product.description || ''\r\n    });\r\n  };\r\n  const handleDelete = async id => {\r\n    if (!window.confirm('Delete this product?')) return;\r\n    try {\r\n      await axios.delete(`${API_BASE}/products/${id}`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setMessage('Product deleted!');\r\n      fetchProducts();\r\n    } catch (err) {\r\n      setMessage('Error deleting product: ' + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n  // User form handlers\r\n  const handleUserChange = e => {\r\n    const { name, value } = e.target;\r\n    setUserForm(f => ({ ...f, [name]: value }));\r\n  };\r\n  const handleUserSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      let submitData = { ...userForm };\r\n      // Assign a unique id to every subadmin (shop manager) if role is subadmin\r\n      if (userForm.role === 'subadmin') {\r\n        submitData.uniqueId = 'subadmin-' + Date.now() + '-' + Math.floor(Math.random() * 10000);\r\n        await axios.post(`${API_BASE}/auth/register`, submitData, { headers: { Authorization: `Bearer ${token}` } });\r\n        setMessage('Sub-admin created!');\r\n      } else if (userForm.role === 'seller') {\r\n        // Only allow subadmin or admin to create sellers\r\n        if (!(adminProfile && (adminProfile.role === 'subadmin' || adminProfile.role === 'admin'))) {\r\n          setMessage('Only subadmin (shop manager) or admin can create sellers.');\r\n          return;\r\n        }\r\n        submitData.uniqueId = 'seller-' + Date.now() + '-' + Math.floor(Math.random() * 10000);\r\n        if (adminProfile && adminProfile.role === 'subadmin' && adminProfile.uniqueId) {\r\n          submitData.managerId = adminProfile.uniqueId;\r\n        }\r\n        delete submitData.owner;\r\n        await axios.post(`${API_BASE}/auth/subadmin/sellers`, submitData, { headers: { Authorization: `Bearer ${token}` } });\r\n        setMessage('Seller created!');\r\n      } else {\r\n        // fallback for any other roles\r\n        await axios.post(`${API_BASE}/auth/register`, userForm, { headers: { Authorization: `Bearer ${token}` } });\r\n        setMessage('User created!');\r\n      }\r\n      setUserForm({ username: '', email: '', password: '', role: 'subadmin' });\r\n      fetchUsers();\r\n    } catch (err) {\r\n      setMessage('Error creating user: ' + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n  const handleUserDelete = async id => {\r\n    if (!window.confirm('Delete this user?')) return;\r\n    try {\r\n      await axios.delete(`${API_BASE}/auth/users/${id}`, { headers: { Authorization: `Bearer ${token}` } });\r\n      setMessage('User deleted!');\r\n      fetchUsers();\r\n    } catch (err) {\r\n      setMessage('Error deleting user: ' + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n\r\n  // --- Chart Data Preparation ---\r\n  const ordersByMonth = analytics.ordersByMonth || Array(12).fill(0);\r\n  const revenueByMonth = analytics.revenueByMonth || Array(12).fill(0);\r\n  const usersByRole = users.reduce((acc, u) => { acc[u.role] = (acc[u.role] || 0) + 1; return acc; }, {});\r\n  const topProducts = analytics.topProducts || [];\r\n\r\n  // --- Chart.js Data ---\r\n  const ordersByMonthData = {\r\n    labels: Array.from({length: 12}, (_, i) => {\r\n      const d = new Date();\r\n      d.setMonth(d.getMonth() - (11 - i));\r\n      return d.toLocaleString('default', { month: 'short', year: '2-digit' });\r\n    }),\r\n    datasets: [{\r\n      label: 'Orders',\r\n      data: ordersByMonth,\r\n      backgroundColor: '#3a6cf6',\r\n    }]\r\n  };\r\n  const revenueByMonthData = {\r\n    labels: ordersByMonthData.labels,\r\n    datasets: [{\r\n      label: 'Revenue (ETB)',\r\n      data: revenueByMonth,\r\n      backgroundColor: '#27ae60',\r\n    }]\r\n  };\r\n  const usersByRoleData = {\r\n    labels: Object.keys(usersByRole),\r\n    datasets: [{\r\n      data: Object.values(usersByRole),\r\n      backgroundColor: ['#3a6cf6', '#27ae60', '#f7c948', '#e74c3c', '#888'],\r\n    }]\r\n  };\r\n  const topProductsData = {\r\n    labels: topProducts.map(p => p.name),\r\n    datasets: [{\r\n      label: 'Quantity Sold',\r\n      data: topProducts.map(p => p.qty),\r\n      backgroundColor: '#f7c948',\r\n    }]\r\n  };\r\n\r\n  // --- More Analytics Data Preparation ---\r\n  // Product Stock Distribution\r\n  const stockStats = products.reduce((acc, p) => {\r\n    if (Number(p.stock) === 0) acc.outOfStock++;\r\n    else if (Number(p.stock) <= 5) acc.lowStock++;\r\n    else acc.inStock++;\r\n    return acc;\r\n  }, { inStock: 0, lowStock: 0, outOfStock: 0 });\r\n  const stockDistData = {\r\n    labels: ['In Stock', 'Low Stock (5)', 'Out of Stock'],\r\n    datasets: [{\r\n      data: [stockStats.inStock, stockStats.lowStock, stockStats.outOfStock],\r\n      backgroundColor: ['#27ae60', '#f7c948', '#e74c3c'],\r\n    }]\r\n  };\r\n  // New Users by Month (mocked if not in analytics)\r\n  const newUsersByMonth = analytics.newUsersByMonth || Array(12).fill(0);\r\n  const newUsersByMonthData = {\r\n    labels: Array.from({length: 12}, (_, i) => {\r\n      const d = new Date();\r\n      d.setMonth(d.getMonth() - (11 - i));\r\n      return d.toLocaleString('default', { month: 'short', year: '2-digit' });\r\n    }),\r\n    datasets: [{\r\n      label: 'New Users',\r\n      data: newUsersByMonth,\r\n      backgroundColor: '#3a6cf6',\r\n    }]\r\n  };\r\n  // Revenue per Category\r\n  const revenuePerCategory = products.reduce((acc, p) => {\r\n    const cat = p.category || 'Uncategorized';\r\n    acc[cat] = (acc[cat] || 0) + (Number(p.revenue) || 0);\r\n    return acc;\r\n  }, {});\r\n  const revenuePerCategoryData = {\r\n    labels: Object.keys(revenuePerCategory),\r\n    datasets: [{\r\n      label: 'Revenue (ETB)',\r\n      data: Object.values(revenuePerCategory),\r\n      backgroundColor: '#00b894',\r\n    }]\r\n  };\r\n  // System Health (mocked)\r\n  const systemHealth = {\r\n    db: 'Online',\r\n    api: 'Healthy',\r\n    disk: 'OK',\r\n    cpu: 'Normal',\r\n    memory: 'Normal',\r\n    uptime: '99.99%'\r\n  };\r\n  // Announcements (mocked)\r\n  const announcements = [\r\n    { id: 1, message: 'System maintenance scheduled for Sunday 2AM.' },\r\n    { id: 2, message: 'New analytics features released!' }\r\n  ];\r\n\r\n  // --- Sidebar Navigation State ---\r\n  const [sidebarSection, setSidebarSection] = useState('dashboard');\r\n  // --- Enhanced Sidebar Links with Icons ---\r\n  const sidebarLinks = [\r\n    { key: 'dashboard', label: 'Dashboard', icon: <FaHome /> },\r\n    { key: 'products', label: 'Products', icon: <FaBoxOpen /> },\r\n    { key: 'orders', label: 'Orders', icon: <FaRegListAlt /> },\r\n    { key: 'users', label: 'Users', icon: <FaUsers /> },\r\n    { key: 'analytics', label: 'Analytics', icon: <FaChartBar /> },\r\n    { key: 'reports', label: 'Reports', icon: <FaFileAlt /> },\r\n    { key: 'activity', label: 'Activity Log', icon: <FaRegListAlt /> },\r\n    { key: 'notifications', label: 'Notifications', icon: <FaRegBell /> },\r\n    { key: 'shopRequests', label: 'Shop Requests', icon: <FaRegCommentDots /> },\r\n    { key: 'support', label: 'Support', icon: <FaRegCommentDots /> },\r\n    { key: 'settings', label: 'Settings', icon: <FaCog /> },\r\n  ];\r\n\r\n  // --- All hooks and function definitions above this line ---\r\n\r\n  // --- Login handler ---\r\n  const [loginRole, setLoginRole] = useState('admin'); // Add role selection for login\r\nconst handleLogin = async e => {\r\n  e.preventDefault();\r\n  try {\r\n    let endpoint = `${API_BASE}/auth/login`;\r\n    if (loginRole === 'seller') {\r\n      endpoint = `${API_BASE}/auth/subadmin/login`;\r\n    }\r\n    const res = await axios.post(endpoint, { email: login.username, password: login.password });\r\n    setToken(res.data.token);\r\n    localStorage.setItem('token', res.data.token);\r\n    // Decode token to get role and user info\r\n    let payload = {};\r\n    try {\r\n      payload = JSON.parse(atob(res.data.token.split('.')[1]));\r\n    } catch {}\r\n    if (payload.role !== 'admin') {\r\n      setAuth(false);\r\n      setToken('');\r\n      localStorage.removeItem('token');\r\n      setLoginError('Access denied: Only admin can access this dashboard.');\r\n      setTimeout(() => window.location.reload(), 1200);\r\n      return;\r\n    }\r\n    setAuth(true);\r\n    setLoginError('');\r\n  } catch (err) {\r\n    setLoginError('Login failed: ' + (err.response?.data?.message || err.message));\r\n  }\r\n};\r\n\r\n  // If not authenticated, show login form\r\n  if (!auth) {\r\n    return (\r\n      <div className=\"admin-login-wrapper\">\r\n        <form className=\"admin-login-form\" onSubmit={handleLogin}>\r\n          <h2>Admin Login</h2>\r\n          <input name=\"username\" value={login.username} onChange={handleLoginChange} placeholder=\"Username or Email\" required />\r\n          <input name=\"password\" type=\"password\" value={login.password} onChange={handleLoginChange} placeholder=\"Password\" required />\r\n          <select name=\"role\" value={loginRole} onChange={e => setLoginRole(e.target.value)} style={{marginBottom: 12}}>\r\n            <option value=\"admin\">Admin</option>\r\n            <option value=\"subadmin\">Subadmin</option>\r\n            <option value=\"seller\">Seller</option>\r\n          </select>\r\n          <button type=\"submit\">Login</button>\r\n          {loginError && <div className=\"login-error\">{loginError}</div>}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Handler stubs to prevent runtime errors ---\r\nconst handleNotifClick = () => {\r\n  setShowNotifDropdown(v => !v);\r\n  if (!showNotifDropdown) fetchNotifications();\r\n};\r\nconst handleUserClick = () => {\r\n  setShowUserDropdown(v => !v);\r\n  if (!adminProfile) fetchAdminProfile();\r\n};\r\nconst handleLogout = () => {\r\n  setAuth(false);\r\n  setToken('');\r\n  localStorage.removeItem('token');\r\n  window.location.reload();\r\n};\r\n // --- User edit handlers (stubs, expand as needed) ---\r\nconst handleEditUserChange = e => {\r\n  const { name, value } = e.target;\r\n  setEditUserForm(f => ({ ...f, [name]: value }));\r\n};\r\nconst handleEditUserSubmit = e => {\r\n  e.preventDefault && e.preventDefault();\r\n  // Implement user update logic here\r\n  setEditingUser(null);\r\n};\r\nconst handleCancelEditUser = () => {\r\n  setEditingUser(null);\r\n};\r\nconst handleEditUser = user => {\r\n  setEditingUser(user._id);\r\n  setEditUserForm({ username: user.username, email: user.email, role: user.role, password: '' });\r\n};\r\n  // --- Pagination helpers ---\r\nconst paginatedProducts = products\r\n  .filter(p => p.name.toLowerCase().includes(productSearch.toLowerCase()))\r\n  .slice((productPage - 1) * productsPerPage, productPage * productsPerPage);\r\nconst totalProductPages = Math.max(1, Math.ceil(products.filter(p => p.name.toLowerCase().includes(productSearch.toLowerCase())).length / productsPerPage));\r\nconst filteredUsers = users.filter(u => u.username.toLowerCase().includes(userSearch.toLowerCase()));\r\n  // DEBUG: Render check\r\n  // console.log('AdminPage render', { auth, token, login, loginError });\r\n\r\n  // Fallback: decode username/email/role from JWT if adminProfile is not loaded\r\n  function getProfileFallback(token) {\r\n    if (!token) return { username: 'Admin', email: '', role: 'admin' };\r\n    try {\r\n      const payload = JSON.parse(atob(token.split('.')[1]));\r\n      return {\r\n        username: payload.username || payload.name || 'Admin',\r\n        email: payload.email || '',\r\n        role: payload.role || 'admin',\r\n      };\r\n    } catch {\r\n      return { username: 'Admin', email: '', role: 'admin' };\r\n    }\r\n  }\r\n\r\n  // Helper functions to get user names by uniqueId or _id\r\nfunction getUserNameByUniqueId(uniqueId) {\r\n  const user = users.find(u => u.uniqueId === uniqueId);\r\n  return user ? user.username : '-';\r\n}\r\nfunction getShopNameById(shopId) {\r\n  // Try to find a subadmin/shop by uniqueId or _id\r\n  const user = users.find(u => (u.uniqueId === shopId || u._id === shopId) && u.role === 'subadmin');\r\n  return user ? user.username : '-';\r\n}\r\nfunction getSellerNameById(sellerId) {\r\n  // Try to find a seller by uniqueId or _id\r\n  const user = users.find(u => (u.uniqueId === sellerId || u._id === sellerId) && u.role === 'seller');\r\n  return user ? user.username : '-';\r\n}\r\n// New: Get shop (subadmin) name for a product, even if posted by seller\r\nfunction getShopNameForProduct(product) {\r\n  if (product.sellerId) {\r\n    const seller = users.find(u => (u.uniqueId === product.sellerId || u._id === product.sellerId) && u.role === 'seller');\r\n    if (seller) {\r\n      if (seller.managerId) {\r\n        const subadmin = users.find(u => (u.uniqueId === seller.managerId || u._id === seller.managerId) && u.role === 'subadmin');\r\n        if (subadmin) return subadmin.username;\r\n        // Show all debug info\r\n        const subadminIds = users.filter(u => u.role === 'subadmin').map(u => `${u.username}(${u.uniqueId || ''}|${u._id || ''})`).join(', ');\r\n        return `No match: seller.managerId=${seller.managerId}, subadmins=[${subadminIds}]`;\r\n      }\r\n      return `No managerId for seller (sellerId=${product.sellerId})`;\r\n    }\r\n    return `No seller found (sellerId=${product.sellerId})`;\r\n  }\r\n  // Otherwise, use managerId or shopId directly\r\n  return getShopNameById(product.managerId || product.shopId);\r\n}\r\n\r\n  return (\r\n    <div className=\"admin-dashboard\">\r\n      {/* --- Admin Header --- */}\r\n      <div className=\"admin-dashboard-header\">\r\n        <div className=\"header-left\">\r\n          <span className=\"dashboard-logo\">Admin</span>\r\n          <span className=\"future-title\">E-Commerce Management</span>\r\n          {/* Home link removed as requested */}\r\n        </div>\r\n        <div className=\"header-actions\" style={{display: 'flex', alignItems: 'center', gap: 18}}>\r\n          {/* Date/Time */}\r\n          <span style={{color: '#e0e6ff', fontSize: 15, marginRight: 10}}>{new Date().toLocaleString()}</span>\r\n          {/* Dark mode toggle */}\r\n          <button onClick={() => setDarkMode(dm => !dm)} style={{background: 'none', border: 'none', color: '#fff', fontSize: 18, cursor: 'pointer'}} title=\"Toggle Dark Mode\">{darkMode ? '' : ''}</button>\r\n          {/* Notification bell with badge */}\r\n          <span className=\"notification-bell\" title=\"Notifications\" onClick={handleNotifClick} style={{position: 'relative'}}>\r\n            <FaRegBell />\r\n            {notifications.filter(n => !n.read).length > 0 && (\r\n              <span style={{position: 'absolute', top: -4, right: -4, background: '#e74c3c', color: '#fff', borderRadius: '50%', fontSize: 11, width: 18, height: 18, display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 700}}>\r\n                {notifications.filter(n => !n.read).length}\r\n              </span>\r\n            )}\r\n          </span>\r\n          {/* Admin info dropdown */}\r\n          <div\r\n            id=\"admin-header-avatar\"\r\n            className=\"user-avatar\"\r\n            title=\"Profile\"\r\n            onClick={e => {\r\n              e.stopPropagation();\r\n              handleUserClick();\r\n            }}\r\n            style={{position: 'relative', cursor: 'pointer'}}\r\n          >\r\n            {adminProfile?.username ? adminProfile.username[0].toUpperCase() : 'A'}\r\n            {showUserDropdown && (\r\n              <div\r\n                id=\"admin-header-avatar-dropdown\"\r\n                style={{position: 'absolute', right: 0, top: 50, background: '#263159', color: '#fff', borderRadius: 10, boxShadow: '0 2px 12px #23294655', minWidth: 180, zIndex: 100, padding: 16}}\r\n                onClick={e => e.stopPropagation()}\r\n              >\r\n                {adminProfile ? (\r\n                  <>\r\n                    <div style={{fontWeight: 700, fontSize: 17, marginBottom: 4}}>{adminProfile.username}</div>\r\n                    <div style={{fontSize: 13, color: '#bbb', marginBottom: 4}}>{adminProfile.email}</div>\r\n                    <div style={{fontSize: 13, color: '#bbb', marginBottom: 8}}>{adminProfile.role}</div>\r\n                  </>\r\n                ) : (\r\n                  (() => { const fallback = getProfileFallback(token); return (\r\n                    <>\r\n                      <div style={{fontWeight: 700, fontSize: 17, marginBottom: 4}}>{fallback.username}</div>\r\n                      <div style={{fontSize: 13, color: '#bbb', marginBottom: 4}}>{fallback.email}</div>\r\n                      <div style={{fontSize: 13, color: '#bbb', marginBottom: 8}}>{fallback.role}</div>\r\n                    </>\r\n                  ); })()\r\n                )}\r\n                <button className=\"btn btn-outline\" style={{width: '100%'}} onClick={handleLogout}>Logout</button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* --- Futuristic Sidebar Navigation --- */}\r\n      <div style={{display: 'flex', minHeight: '100vh'}}>\r\n        <div className=\"future-sidebar\" style={{width: 260, height: '100vh', background: '#232946', display: 'flex', flexDirection: 'column', boxShadow: '2px 0 12px #23294622', position: 'relative'}}>\r\n          {/* Collapsible user profile section */}\r\n          {/* Duplicate removed: was rendering a second dropdown/profile section */}\r\n          <nav style={{flex: 1, padding: '2rem 1.5rem 0 1.5rem'}}>\r\n            {sidebarLinks.map(item => (\r\n              <div\r\n                key={item.key}\r\n                className={sidebarSection === item.key ? 'active' : ''}\r\n                style={{\r\n                  marginBottom: 18,\r\n                  fontWeight: sidebarSection === item.key ? 600 : 400,\r\n                  color: sidebarSection === item.key ? '#3a6cf6' : '#e0e6ff',\r\n                  background: sidebarSection === item.key ? '#263159' : 'none',\r\n                  borderRadius: 6,\r\n                  padding: '8px 16px',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.15s',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: 12,\r\n                  position: 'relative',\r\n                }}\r\n                onClick={() => setSidebarSection(item.key)}\r\n                title={item.label}\r\n                onMouseEnter={e => e.currentTarget.style.background = '#3a6cf6'}\r\n                onMouseLeave={e => e.currentTarget.style.background = sidebarSection === item.key ? '#263159' : 'none'}\r\n              >\r\n                <span style={{fontSize: 20}}>{item.icon}</span>\r\n                <span>{item.label}</span>\r\n              </div>\r\n            ))}\r\n          </nav>\r\n        </div>\r\n        <div style={{flex: 1, padding: '2.5rem 3rem', background: '#f4f7fa', minHeight: '100vh', boxSizing: 'border-box', overflowY: 'auto'}}>\r\n          {/* --- Main dashboard content goes here, conditionally rendered by sidebarSection --- */}\r\n          {(sidebarSection === 'analytics' || sidebarSection === 'dashboard') && (\r\n            <div style={{width: '100%', maxWidth: '100%', margin: '0 auto', boxSizing: 'border-box', display: 'flex', flexDirection: 'column', gap: 24}}>\r\n              {/* Sales summary and analytics (from backend) */}\r\n              <div className=\"future-dashboard-cards\" style={{display: 'flex', flexWrap: 'wrap', gap: 24, marginBottom: 32, width: '100%'}}>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                  <div style={{fontSize: 14, color: '#888'}}>Total Orders</div>\r\n                  <div style={{fontWeight: 700, fontSize: 28, color: '#0984e3'}}>{salesSummary.totalOrders}</div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                  <div style={{fontSize: 14, color: '#888'}}>Total Revenue</div>\r\n                  <div style={{fontWeight: 700, fontSize: 28, color: '#27ae60'}}>ETB {salesSummary.totalRevenue.toLocaleString()}</div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                  <div style={{fontSize: 14, color: '#888'}}>Products</div>\r\n                  <div style={{fontWeight: 700, fontSize: 28, color: '#f7c948'}}>{salesSummary.productCount}</div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                  <div style={{fontSize: 14, color: '#888'}}>Users</div>\r\n                  <div style={{fontWeight: 700, fontSize: 28, color: '#888'}}>{salesSummary.userCount}</div>\r\n                </div>\r\n              </div>\r\n              {/* --- Advanced Analytics Charts --- */}\r\n              <div className=\"future-dashboard-row\" style={{display: 'flex', flexWrap: 'wrap', gap: 24, marginBottom: 32, width: '100%'}}>\r\n                <div className=\"future-chart-container\" style={{flex: 2, padding: '1.5rem'}}>\r\n                  <div style={{fontWeight: 600, marginBottom: 12}}>Orders by Month</div>\r\n                  <Bar data={ordersByMonthData} options={{responsive: true, plugins: {legend: {display: false}}, scales: {y: {beginAtZero: true}}}} height={180} />\r\n                </div>\r\n                <div className=\"future-chart-container\" style={{flex: 2, padding: '1.5rem'}}>\r\n                  <div style={{fontWeight: 600, marginBottom: 12}}>Revenue by Month</div>\r\n                  <Bar data={revenueByMonthData} options={{responsive: true, plugins: {legend: {display: false}}, scales: {y: {beginAtZero: true}}}} height={180} />\r\n                </div>\r\n                <div className=\"future-chart-container\" style={{flex: 1, padding: '1.5rem'}}>\r\n                  <div style={{fontWeight: 600, marginBottom: 12}}>Users by Role</div>\r\n                  <Pie data={usersByRoleData} options={{responsive: true, plugins: {legend: {position: 'bottom'}}}} height={180} />\r\n                </div>\r\n              </div>\r\n              <div className=\"future-chart-container\" style={{padding: '1.5rem', marginBottom: 32, width: '100%', boxSizing: 'border-box'}}>\r\n                <div style={{fontWeight: 600, marginBottom: 12}}>Top Selling Products</div>\r\n                <Bar data={topProductsData} options={{responsive: true, plugins: {legend: {display: false}}, scales: {y: {beginAtZero: true}}}} height={180} />\r\n              </div>\r\n              {/* --- Real-Time & Custom Analytics Widgets --- */}\r\n              <div className=\"future-dashboard-row\" style={{display: 'flex', flexWrap: 'wrap', gap: 24, marginBottom: 32, alignItems: 'stretch', width: '100%'}}>\r\n                <div className=\"future-card future-glow\" style={{flex: 1, padding: '1.5rem', minWidth: 220, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center'}} title=\"Real-Time Active Users\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Active Users</div>\r\n                  <div style={{fontSize: 38, fontWeight: 900, color: '#3a6cf6', transition: 'all 0.5s'}}>{activeUsers}</div>\r\n                  <div style={{fontSize: 13, color: '#888'}}>in the last 5 min</div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 2, padding: '1.5rem', minWidth: 220, display: 'flex', flexDirection: 'column', justifyContent: 'center'}} title=\"Live Sales Ticker\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Live Sales</div>\r\n                  <div style={{fontSize: 18, color: '#27ae60', minHeight: 32, transition: 'all 0.5s'}}>\r\n                    {salesTicker[tickerIndex]?.msg}\r\n                  </div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 3, padding: '1.5rem', minWidth: 220}} title=\"Product/Category Heatmap\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Product/Category Heatmap</div>\r\n                  <div style={{display: 'flex', gap: 8, flexWrap: 'wrap'}}>\r\n                    {heatmapLabels.map((cat, i) => {\r\n                      const rawOpacity = 0.8 + 0.2 * (heatmapValues[i] / Math.max(...heatmapValues || [1]));\r\n                      const safeOpacity = isNaN(rawOpacity) ? 1 : Math.max(0, Math.min(1, rawOpacity));\r\n                      return (\r\n                        <div\r\n                          key={cat}\r\n                          style={{\r\n                            background: '#3a6cf6',\r\n                            color: '#fff',\r\n                            borderRadius: 8,\r\n                            padding: '8px 16px',\r\n                            marginBottom: 6,\r\n                            fontWeight: 600,\r\n                            opacity: safeOpacity\r\n                          }}\r\n                        >\r\n                          {cat}: {heatmapValues[i]}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 2, padding: '1.5rem', minWidth: 220}} title=\"Recent Logins\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Recent Logins</div>\r\n                  <ul style={{listStyle: 'none', padding: 0, margin: 0, fontSize: 15}}>\r\n                    {recentLogins.map(l => <li key={l.user}><b>{l.user}</b> <span style={{color: '#888'}}>({l.role})</span> <span style={{float: 'right', color: '#3a6cf6'}}>{l.time}</span></li>)}\r\n                  </ul>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', minWidth: 220}} title=\"Live Server Status\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Live Server Status</div>\r\n                  <ul style={{listStyle: 'none', padding: 0, margin: 0, fontSize: 15}}>\r\n                    {liveStatus.map(s => <li key={s.label}><b>{s.label}:</b> <span style={{color: s.status === 'online' ? '#27ae60' : '#f7c948', fontWeight: 700, animation: s.status === 'online' ? 'glowPulse 1.5s infinite alternate' : undefined}}>{s.status}</span></li>)}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {sidebarSection === 'products' && (\r\n            <div>\r\n              <h2>Manage Products</h2>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search products...\"\r\n                value={productSearch}\r\n                onChange={e => setProductSearch(e.target.value)}\r\n                style={{marginBottom: 16, width: '100%', padding: '10px', borderRadius: 8, border: '1px solid #3a6cf6'}}\r\n              />\r\n              <button onClick={exportProductsCSV} className=\"btn btn-outline\" style={{marginBottom: 16, float: 'right'}}>Export CSV</button>\r\n              <form onSubmit={handleSubmit} encType=\"multipart/form-data\" style={{display: 'flex', flexWrap: 'wrap', gap: 12, marginBottom: 18, background: '#232946', borderRadius: 12, padding: 16}}>\r\n                <input name=\"name\" value={form.name} onChange={handleChange} placeholder=\"Name\" required style={{flex: 1}} />\r\n                <input name=\"price\" value={form.price} onChange={handleChange} placeholder=\"Price\" required style={{flex: 1}} />\r\n                <input name=\"category\" value={form.category} onChange={handleChange} placeholder=\"Category\" style={{flex: 1}} />\r\n                <input name=\"image\" value={form.image} onChange={handleChange} placeholder=\"Image URL or filename\" style={{flex: 2}} />\r\n                <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} style={{flex: 2}} />\r\n                <input name=\"description\" value={form.description} onChange={handleChange} placeholder=\"Description\" style={{flex: 2}} />\r\n                <button type=\"submit\" style={{flex: 1}}>{editing ? 'Update' : 'Add'} Product</button>\r\n                {editing && <button type=\"button\" onClick={() => { setEditing(null); setForm({ name: '', price: '', category: '', image: '', description: '' }); setImageFile(null); }} style={{flex: 1, background: '#e74c3c'}}>Cancel</button>}\r\n              </form>\r\n              {lowStockProducts.length > 0 && (\r\n                <div className=\"low-stock-alert\">\r\n                  <span> Low Stock Alert: </span>\r\n                  {lowStockProducts.map(p => `${p.name} (${p.stock})`).join(', ')}\r\n                </div>\r\n              )}\r\n              <div style={{overflowX: 'auto'}}>\r\n                <table className=\"future-table\" style={{minWidth: 1000}}>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Price</th>\r\n                      <th>Category</th>\r\n                      <th>Image</th>\r\n                      <th>Description</th>\r\n                      <th>Shop (Subadmin)</th>\r\n                      <th>Seller</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {paginatedProducts.map(product => (\r\n                      <tr key={product._id} style={{background: editing && editing._id === product._id ? '#353b48' : undefined}}>\r\n                        <td>{product.name}</td>\r\n                        <td>${product.price}</td>\r\n                        <td>{product.category}</td>\r\n                        <td>{product.image ? <img src={product.image} alt=\"\" style={{ width: 40, height: 40, objectFit: 'cover', borderRadius: 6, boxShadow: '0 1px 4px #2222' }} /> : ''}</td>\r\n                        <td>{product.description}</td>\r\n                        <td>{product.shopId && product.shopId.shopName ? product.shopId.shopName : '-'}</td>\r\n                        <td>{product.owner && product.owner.username ? product.owner.username : '-'}</td>\r\n                        <td>\r\n                          <button className=\"btn btn-secondary\" onClick={() => handleEdit(product)} style={{marginRight: 6}}>Edit</button>\r\n                          <button className=\"btn btn-outline\" onClick={() => handleDelete(product._id)} style={{ color: '#e74c3c' }}>Delete</button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {/* Pagination controls */}\r\n              <div style={{ display: 'flex', justifyContent: 'center', marginBottom: 32, gap: 12 }}>\r\n                <button onClick={() => setProductPage(p => Math.max(1, p - 1))} disabled={productPage === 1}>&lt; Prev</button>\r\n                <span>Page {productPage} of {totalProductPages}</span>\r\n                <button onClick={() => setProductPage(p => Math.min(totalProductPages, p + 1))} disabled={productPage === totalProductPages}>Next &gt;</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {sidebarSection === 'users' && (\r\n            <div>\r\n              <h2 style={{color:'#00b894',marginBottom:8}}>Subadmin - Users</h2>\r\n              <h3>Manage Users (Create Sellers)</h3>\r\n              {/* Debug output for users and error message */}\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search users...\"\r\n                value={userSearch}\r\n                onChange={e => setUserSearch(e.target.value)}\r\n                style={{marginBottom: 16, width: '100%', padding: '10px', borderRadius: 8, border: '1px solid #3a6cf6'}}\r\n              />\r\n              <button onClick={exportUsersCSV} className=\"btn btn-outline\" style={{marginBottom: 16, float: 'right'}}>Export CSV</button>\r\n              <form onSubmit={handleUserSubmit} style={{display: 'flex', flexWrap: 'wrap', gap: 12, marginBottom: 18, background: '#232946', borderRadius: 12, padding: 16}}>\r\n                <input name=\"username\" value={userForm.username} onChange={handleUserChange} placeholder=\"Username\" required style={{flex: 1}} />\r\n                <input name=\"email\" value={userForm.email} onChange={handleUserChange} placeholder=\"Email\" required style={{flex: 1}} />\r\n                <input name=\"password\" type=\"password\" value={userForm.password} onChange={handleUserChange} placeholder=\"Password\" required style={{flex: 1}} />\r\n                <select name=\"role\" value={userForm.role} onChange={handleUserChange} style={{flex: 1}}>\r\n                  <option value=\"seller\">Seller</option>\r\n                  <option value=\"subadmin\">Sub-Admin</option>\r\n                </select>\r\n                <button type=\"submit\" style={{flex: 1}}>Create User</button>\r\n              </form>\r\n              <div style={{overflowX: 'auto'}}>\r\n                <table className=\"future-table\" style={{minWidth: 700}}>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Username</th><th>Email</th><th>Role</th><th>Created By</th><th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filteredUsers.map(user => (\r\n                      editingUser === user._id ? (\r\n                        <tr key={user._id} style={{ background: '#353b48' }}>\r\n                          <td><input name=\"username\" value={editUserForm.username} onChange={handleEditUserChange} /></td>\r\n                          <td><input name=\"email\" value={editUserForm.email} onChange={handleEditUserChange} /></td>\r\n                          <td>\r\n                            <select name=\"role\" value={editUserForm.role} onChange={handleEditUserChange}>\r\n                              <option value=\"seller\">Seller</option>\r\n                              <option value=\"subadmin\">Sub-Admin</option>\r\n                            </select>\r\n                          </td>\r\n                          <td>-</td>\r\n                          <td>\r\n                            <input name=\"password\" type=\"password\" value={editUserForm.password} onChange={handleEditUserChange} placeholder=\"New password (optional)\" />\r\n                            <button onClick={handleEditUserSubmit}>Save</button>\r\n                            <button onClick={handleCancelEditUser}>Cancel</button>\r\n                          </td>\r\n                        </tr>\r\n                      ) : (\r\n                        <tr key={user._id}>\r\n                          <td>{user.username}</td>\r\n                          <td>{user.email}</td>\r\n                          <td>{user.role}</td>\r\n                          <td>{user.role === 'seller' && user.shopId && user.shopId.shopName ? user.shopId.shopName : user.role === 'subadmin' && user.owner && user.owner.username ? user.owner.username : user.role === 'admin' ? 'Super Admin' : '-'}</td>\r\n                          <td>\r\n                            <button onClick={() => handleEditUser(user)} style={{marginRight: 6}}>Edit</button>\r\n                            <button onClick={() => handleUserDelete(user._id)} style={{ background: '#e74c3c', color: '#fff', marginRight: 6 }}>Delete</button>\r\n                          </td>\r\n                        </tr>\r\n                      )\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {sidebarSection === 'analytics' && (\r\n            <div>\r\n              {/* Sales summary and analytics (from backend) */}\r\n              <div className=\"future-dashboard-cards\" style={{display: 'flex', flexWrap: 'wrap', gap: 24, marginBottom: 32}}>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                  <div style={{fontSize: 14, color: '#888'}}>Total Orders</div>\r\n                  <div style={{fontWeight: 700, fontSize: 28, color: '#0984e3'}}>{salesSummary.totalOrders}</div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                  <div style={{fontSize: 14, color: '#888'}}>Total Revenue</div>\r\n                  <div style={{fontWeight: 700, fontSize: 28, color: '#27ae60'}}>ETB {salesSummary.totalRevenue.toLocaleString()}</div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                  <div style={{fontSize: 14, color: '#888'}}>Products</div>\r\n                  <div style={{fontWeight: 700, fontSize: 28, color: '#f7c948'}}>{salesSummary.productCount}</div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                  <div style={{fontSize: 14, color: '#888'}}>Users</div>\r\n                  <div style={{fontWeight: 700, fontSize: 28, color: '#888'}}>{salesSummary.userCount}</div>\r\n                </div>\r\n              </div>\r\n              {/* --- Advanced Analytics Charts --- */}\r\n              <div className=\"future-dashboard-row\" style={{display: 'flex', flexWrap: 'wrap', gap: 24, marginBottom: 32, width: '100%'}}>\r\n                <div className=\"future-chart-container\" style={{flex: 2, padding: '1.5rem'}}>\r\n                  <div style={{fontWeight: 600, marginBottom: 12}}>Orders by Month</div>\r\n                  <Bar data={ordersByMonthData} options={{responsive: true, plugins: {legend: {display: false}}, scales: {y: {beginAtZero: true}}}} height={180} />\r\n                </div>\r\n                <div className=\"future-chart-container\" style={{flex: 2, padding: '1.5rem'}}>\r\n                  <div style={{fontWeight: 600, marginBottom: 12}}>Revenue by Month</div>\r\n                  <Bar data={revenueByMonthData} options={{responsive: true, plugins: {legend: {display: false}}, scales: {y: {beginAtZero: true}}}} height={180} />\r\n                </div>\r\n                <div className=\"future-chart-container\" style={{flex: 1, padding: '1.5rem'}}>\r\n                  <div style={{fontWeight: 600, marginBottom: 12}}>Users by Role</div>\r\n                  <Pie data={usersByRoleData} options={{responsive: true, plugins: {legend: {position: 'bottom'}}}} height={180} />\r\n                </div>\r\n              </div>\r\n              <div className=\"future-chart-container\" style={{padding: '1.5rem', marginBottom: 32, width: '100%', boxSizing: 'border-box'}}>\r\n                <div style={{fontWeight: 600, marginBottom: 12}}>Top Selling Products</div>\r\n                <Bar data={topProductsData} options={{responsive: true, plugins: {legend: {display: false}}, scales: {y: {beginAtZero: true}}}} height={180} />\r\n              </div>\r\n              {/* --- Real-Time & Custom Analytics Widgets --- */}\r\n              <div className=\"future-dashboard-row\" style={{display: 'flex', flexWrap: 'wrap', gap: 24, marginBottom: 32, alignItems: 'stretch', width: '100%'}}>\r\n                <div className=\"future-card future-glow\" style={{flex: 1, padding: '1.5rem', minWidth: 220, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center'}} title=\"Real-Time Active Users\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Active Users</div>\r\n                  <div style={{fontSize: 38, fontWeight: 900, color: '#3a6cf6', transition: 'all 0.5s'}}>{activeUsers}</div>\r\n                  <div style={{fontSize: 13, color: '#888'}}>in the last 5 min</div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 2, padding: '1.5rem', minWidth: 220, display: 'flex', flexDirection: 'column', justifyContent: 'center'}} title=\"Live Sales Ticker\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Live Sales</div>\r\n                  <div style={{fontSize: 18, color: '#27ae60', minHeight: 32, transition: 'all 0.5s'}}>\r\n                    {salesTicker[tickerIndex]?.msg}\r\n                  </div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 3, padding: '1.5rem', minWidth: 220}} title=\"Product/Category Heatmap\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Product/Category Heatmap</div>\r\n                  <div style={{display: 'flex', gap: 8, flexWrap: 'wrap'}}>\r\n                    {heatmapLabels.map((cat, i) => {\r\n                      const rawOpacity = 0.8 + 0.2 * (heatmapValues[i] / Math.max(...heatmapValues || [1]));\r\n                      const safeOpacity = isNaN(rawOpacity) ? 1 : Math.max(0, Math.min(1, rawOpacity));\r\n                      return (\r\n                        <div\r\n                          key={cat}\r\n                          style={{\r\n                            background: '#3a6cf6',\r\n                            color: '#fff',\r\n                            borderRadius: 8,\r\n                            padding: '8px 16px',\r\n                            marginBottom: 6,\r\n                            fontWeight: 600,\r\n                            opacity: safeOpacity\r\n                          }}\r\n                        >\r\n                          {cat}: {heatmapValues[i]}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 2, padding: '1.5rem', minWidth: 220}} title=\"Recent Logins\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Recent Logins</div>\r\n                  <ul style={{listStyle: 'none', padding: 0, margin: 0, fontSize: 15}}>\r\n                    {recentLogins.map(l => <li key={l.user}><b>{l.user}</b> <span style={{color: '#888'}}>({l.role})</span> <span style={{float: 'right', color: '#3a6cf6'}}>{l.time}</span></li>)}\r\n                  </ul>\r\n                </div>\r\n                <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', minWidth: 220}} title=\"Live Server Status\">\r\n                  <div style={{fontWeight: 600, marginBottom: 8}}>Live Server Status</div>\r\n                  <ul style={{listStyle: 'none', padding: 0, margin: 0, fontSize: 15}}>\r\n                    {liveStatus.map(s => <li key={s.label}><b>{s.label}:</b> <span style={{color: s.status === 'online' ? '#27ae60' : '#f7c948', fontWeight: 700, animation: s.status === 'online' ? 'glowPulse 1.5s infinite alternate' : undefined}}>{s.status}</span></li>)}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {sidebarSection === 'shopRequests' && (\r\n            <div>\r\n              <h2>Shop Registration Requests</h2>\r\n              {shopRequestsLoading ? (\r\n                <div>Loading shop requests...</div>\r\n              ) : shopRequestsError ? (\r\n                <div style={{color: 'red'}}>{shopRequestsError}</div>\r\n              ) : shopRequests.length === 0 ? (\r\n                <div>No shop requests found.</div>\r\n              ) : (\r\n                <table className=\"future-table\" style={{minWidth: 700}}>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Shop Name</th><th>Owner</th><th>Status</th><th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {shopRequests.map(req => (\r\n                      <tr key={req._id}>\r\n                        <td>{req.shopName || req.name}</td>\r\n                        <td>{req.ownerName || req.owner || '-'}</td>\r\n                        <td>{req.status}</td>\r\n                        <td>\r\n                          <button onClick={() => handleShopRequestAction(req._id, 'approve')}>Approve</button>\r\n                          <button onClick={() => handleShopRequestAction(req._id, 'reject')}>Reject</button>\r\n                          <button onClick={() => setViewingRequest(req)}>View</button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n              {shopRequestActionMsg && <div style={{marginTop: 12, color: '#27ae60'}}>{shopRequestActionMsg}</div>}\r\n            </div>\r\n          )}\r\n          {/* Shop Request Detail Modal */}\r\n          {viewingRequest && (\r\n            <div className=\"modal-overlay\" style={{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.4)',zIndex:200,display:'flex',alignItems:'center',justifyContent:'center'}}>\r\n              <div className=\"modal-content\" style={{background:'#fff',padding:32,borderRadius:12,minWidth:350,maxWidth:500,boxShadow:'0 4px 24px #23294655',position:'relative'}}>\r\n                <h3>Shop Request Details</h3>\r\n                <table style={{width:'100%',marginBottom:16}}>\r\n                  <tbody>\r\n                    {Object.entries(viewingRequest).map(([key, value]) => (\r\n                      <tr key={key}>\r\n                        <td style={{fontWeight:600,padding:'4px 8px',textTransform:'capitalize'}}>{key}</td>\r\n                        <td style={{padding:'4px 8px'}}>{String(value)}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n                <button onClick={() => setViewingRequest(null)} style={{marginTop:8}}>Close</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPage;","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport ProductForm from '../components/ProductForm';\r\nimport { Bar, Pie } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ArcElement\r\n} from 'chart.js';\r\nimport { FaBell, FaHome, FaBoxOpen, FaUsers, FaRegListAlt, FaFileAlt, FaChartBar, FaRegCommentDots, FaCog } from 'react-icons/fa';\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend, ArcElement);\r\n\r\nconst API_BASE = `http://${window.location.hostname}:5000/api`;\r\n\r\n// --- Seller Privileges Default ---\r\nconst defaultPrivileges = {\r\n  canAddProducts: true,\r\n  canEditProducts: true,\r\n  canDeleteProducts: true,\r\n  canViewOrders: true,\r\n  canManageProfile: true\r\n};\r\n\r\nconst SubAdminDashboard = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [editProduct, setEditProduct] = useState(null);\r\n  const [section, setSection] = useState('dashboard');\r\n  const [users, setUsers] = useState([]); // Users state\r\n  const [loadingUsers, setLoadingUsers] = useState(false);\r\n  const [userEdit, setUserEdit] = useState(null);\r\n  const [userEditForm, setUserEditForm] = useState({ username: '', email: '', role: '' });\r\n  const [userMessage, setUserMessage] = useState('');\r\n  const [managedProducts, setManagedProducts] = useState([]);\r\n  // Subadmin login state\r\n  const [login, setLogin] = useState({ email: '', password: '' });\r\n  const [loginError, setLoginError] = useState('');\r\n  const [loggingIn, setLoggingIn] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false); // Show password state\r\n\r\n  // --- Notifications State ---\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [showNotifDropdown, setShowNotifDropdown] = useState(false);\r\n  const [notifLoading, setNotifLoading] = useState(false);\r\n  const [notifError, setNotifError] = useState('');\r\n\r\n  // --- Activity Log State ---\r\n  const [activityLog, setActivityLog] = useState([]);\r\n\r\n  // --- Password Change Modal State ---\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [passwordForm, setPasswordForm] = useState({ current: '', new: '', confirm: '' });\r\n  const [passwordMsg, setPasswordMsg] = useState('');\r\n\r\n  // --- Profile Modal State ---\r\n  const [showProfileModal, setShowProfileModal] = useState(false);\r\n\r\n  // --- Real analytics and orders state ---\r\n  const [analytics, setAnalytics] = useState({ totalOrders: 0, totalRevenue: 0, bestSeller: null });\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  // --- Seller Management State (move to top level) ---\r\n  const [sellerSearch, setSellerSearch] = useState('');\r\n  const [sellerPage, setSellerPage] = useState(1);\r\n  const sellersPerPage = 8;\r\n  const [sellerProductCounts, setSellerProductCounts] = useState({});\r\n  const [viewSellerProducts, setViewSellerProducts] = useState(null);\r\n  const [resetSellerId, setResetSellerId] = useState(null);\r\n  const [resetSellerMsg, setResetSellerMsg] = useState('');\r\n  const [confirmDeleteId, setConfirmDeleteId] = useState(null);\r\n  const [confirmEditId, setConfirmEditId] = useState(null);\r\n\r\n  // Forgot password state\r\n  const [showForgot, setShowForgot] = useState(false);\r\n  const [forgotEmail, setForgotEmail] = useState('');\r\n  const [forgotMsg, setForgotMsg] = useState('');\r\n\r\n  // --- Toast State ---\r\n  const [toast, setToast] = useState({ show: false, message: '', type: 'success' });\r\n  const showToast = (message, type = 'success') => {\r\n    setToast({ show: true, message, type });\r\n    setTimeout(() => setToast({ show: false, message: '', type: 'success' }), 2500);\r\n  };\r\n\r\n  // Collapsible sidebar state\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [sidebarSection, setSidebarSection] = useState('dashboard');\r\n  const sidebarLinks = [\r\n    { key: 'dashboard', label: 'Dashboard', icon: <FaHome /> },\r\n    { key: 'products', label: 'Products', icon: <FaBoxOpen /> },\r\n    { key: 'sellers', label: 'Sellers', icon: <FaUsers /> },\r\n    { key: 'orders', label: 'Orders', icon: <FaRegListAlt /> },\r\n    { key: 'reports', label: 'Reports', icon: <FaFileAlt /> },\r\n    { key: 'ratings', label: 'Ratings', icon: <FaChartBar /> },\r\n    { key: 'comments', label: 'Comments', icon: <FaRegCommentDots /> },\r\n    { key: 'settings', label: 'Settings', icon: <FaCog /> },\r\n    { key: 'products-managed', label: 'Products Managed', icon: <FaBoxOpen /> },\r\n  ];\r\n\r\n  // Hide 'sellers' section for seller role\r\n  const filteredSidebarLinks = user?.role === 'seller'\r\n    ? sidebarLinks.filter(link => link.key !== 'sellers')\r\n    : sidebarLinks;\r\n\r\n  // --- Responsive sidebar collapse on small screens ---\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      if (window.innerWidth < 900 && !sidebarCollapsed) setSidebarCollapsed(true);\r\n      if (window.innerWidth >= 900 && sidebarCollapsed) setSidebarCollapsed(false);\r\n    };\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [sidebarCollapsed]);\r\n\r\n  // --- Shop-based data isolation helpers ---\r\n  // Helper to generate unique sellerId (e.g., se1, se2, ...)\r\n  function generateSellerId(existingSellers = []) {\r\n    // Find max seN in current shop\r\n    const ids = existingSellers.map(s => s.sellerId).filter(Boolean);\r\n    let max = 0;\r\n    ids.forEach(id => {\r\n      const match = /^se(\\d+)$/.exec(id);\r\n      if (match) max = Math.max(max, parseInt(match[1], 10));\r\n    });\r\n    return `se${max + 1}`;\r\n  }\r\n  function generateManagerId(shopId, existingManagers = []) {\r\n    // Find max smN for this shop\r\n    const ids = existingManagers.map(m => m.managerId).filter(Boolean);\r\n    let max = 0;\r\n    ids.forEach(id => {\r\n      const match = /^sm(\\d+)$/.exec(id);\r\n      if (match) max = Math.max(max, parseInt(match[1], 10));\r\n    });\r\n    return `sm${max + 1}`;\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Robustly parse user from localStorage\r\n    let userData = localStorage.getItem('user');\r\n    let parsed = null;\r\n    if (userData && userData !== 'undefined') {\r\n      try {\r\n        parsed = JSON.parse(userData);\r\n      } catch (e) {\r\n        parsed = null;\r\n      }\r\n    }\r\n    setUser(parsed);\r\n    if (parsed && parsed.role === 'subadmin') {\r\n      const token = parsed.token;\r\n      // Fetch only products for this subadmin's shop\r\n      axios.get(`${API_BASE}/products?shopId=${parsed.shopId}`,\r\n        { headers: { Authorization: `Bearer ${token}` } })\r\n        .then(res => setProducts(res.data.filter(p => p.shopId === parsed.shopId)))\r\n        .catch(() => setProducts([]));\r\n    }\r\n  }, [showEditModal, loginError, loggingIn]); // Add loginError and loggingIn to dependencies\r\n\r\n  // Remove redirect to /login, show login form instead\r\n  // ...existing code...\r\n\r\n  // Fetch sellers for user management section\r\n  useEffect(() => {\r\n    if (section === 'sellers' && user && user.token) {\r\n      setLoadingUsers(true);\r\n      axios.get(`${API_BASE}/auth/subadmin/sellers?shopId=${user.shopId}`,\r\n        { headers: { Authorization: `Bearer ${user.token}` } })\r\n        .then(res => {\r\n          setUsers(res.data.filter(u => u.shopId === user.shopId));\r\n          setLoadingUsers(false);\r\n        })\r\n        .catch(() => {\r\n          setUsers([]);\r\n          setLoadingUsers(false);\r\n        });\r\n    }\r\n  }, [section, user]);\r\n\r\n  // Fetch real analytics and orders for subadmin\r\n  useEffect(() => {\r\n    if (user && user.token) {\r\n      axios.get(`${API_BASE}/admin/subadmin/analytics`, { headers: { Authorization: `Bearer ${user.token}` } })\r\n        .then(res => setAnalytics(res.data))\r\n        .catch(() => setAnalytics({ totalOrders: 0, totalRevenue: 0, bestSeller: null }));\r\n      axios.get(`${API_BASE}/admin/subadmin/orders`, { headers: { Authorization: `Bearer ${user.token}` } })\r\n        .then(res => setOrders(res.data))\r\n        .catch(() => setOrders([]));\r\n    }\r\n  }, [user]);\r\n\r\n  // Fetch product counts for sellers\r\n  useEffect(() => {\r\n    if (users.length > 0 && user && user.token) {\r\n      Promise.all(users.map(u =>\r\n        axios.get(`${API_BASE}/products?seller=${u._id}&shopId=${user.shopId}`,\r\n          { headers: { Authorization: `Bearer ${user.token}` } })\r\n          .then(res => ({ id: u._id, count: res.data.length }))\r\n          .catch(() => ({ id: u._id, count: 0 }))\r\n      )).then(results => {\r\n        const counts = {};\r\n        results.forEach(r => { counts[r.id] = r.count; });\r\n        setSellerProductCounts(counts);\r\n      });\r\n    }\r\n  }, [users, user]);\r\n\r\n  const handleEdit = (product) => {\r\n    setEditProduct(product ? { ...product, shopId: user.shopId, managerId: user._id } : { shopId: user.shopId, managerId: user._id });\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const handleDelete = async (productId) => {\r\n    if (!window.confirm('Are you sure you want to delete this product?')) return;\r\n    try {\r\n      const userData = localStorage.getItem('user');\r\n      const token = userData ? JSON.parse(userData).token : '';\r\n      await axios.delete(`${API_BASE}/products/${productId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setProducts(prev => prev.filter(p => p._id !== productId));\r\n    } catch (err) {\r\n      alert('Failed to delete product.');\r\n    }\r\n  };\r\n\r\n  const handleProductUpdated = (updatedProduct) => {\r\n    setProducts(prev => prev.map(p => p._id === updatedProduct._id ? updatedProduct : p));\r\n    setShowEditModal(false);\r\n    setEditProduct(null);\r\n  };\r\n\r\n  // User management handlers\r\n  const handleUserEdit = (u) => {\r\n    setUserEdit(u);\r\n    setUserEditForm({ username: u.username, email: u.email, role: u.role });\r\n    setUserMessage('');\r\n  };\r\n  const handleUserEditChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    if (name.startsWith('privileges.')) {\r\n      const privKey = name.split('.')[1];\r\n      setUserEditForm(f => ({ ...f, privileges: { ...f.privileges, [privKey]: type === 'checkbox' ? checked : value } }));\r\n    } else {\r\n      setUserEditForm(f => ({ ...f, [name]: value }));\r\n    }\r\n  };\r\n  const handleUserEditSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!userEdit) return;\r\n    try {\r\n      await axios.put(`${API_BASE}/auth/subadmin/sellers/${userEdit._id}`, userEditForm, { headers: { Authorization: `Bearer ${user.token}` } });\r\n      setUserMessage('User updated!');\r\n      setUsers(users.map(u => u._id === userEdit._id ? { ...u, ...userEditForm } : u));\r\n      setUserEdit(null);\r\n    } catch (err) {\r\n      setUserMessage('Error updating user.');\r\n    }\r\n  };\r\n  const handleUserDelete = async (id) => {\r\n    if (!window.confirm('Delete this user?')) return;\r\n    try {\r\n      await axios.delete(`${API_BASE}/auth/subadmin/sellers/${id}`, { headers: { Authorization: `Bearer ${user.token}` } });\r\n      setUsers(users.filter(u => u._id !== id));\r\n    } catch (err) {\r\n      setUserMessage('Error deleting user.');\r\n    }\r\n  };\r\n\r\n  // Add seller creation\r\n  const [newSeller, setNewSeller] = useState({ username: '', email: '', password: '', privileges: { ...defaultPrivileges } });\r\n  const [sellerMsg, setSellerMsg] = useState('');\r\n  const handleNewSellerChange = e => {\r\n    const { name, value, type, checked } = e.target;\r\n    if (name.startsWith('privileges.')) {\r\n      const privKey = name.split('.')[1];\r\n      setNewSeller(f => ({ ...f, privileges: { ...f.privileges, [privKey]: type === 'checkbox' ? checked : value } }));\r\n    } else {\r\n      setNewSeller(f => ({ ...f, [name]: value }));\r\n    }\r\n  };\r\n  const handleCreateSeller = async e => {\r\n    e.preventDefault();\r\n    setSellerMsg('');\r\n    try {\r\n      // Assign shopId and unique sellerId\r\n      const shopId = user?.shopId;\r\n      const sellerId = generateSellerId(users.filter(u => u.shopId === shopId));\r\n      const payload = { ...newSeller, shopId, sellerId };\r\n      await axios.post(`${API_BASE}/auth/subadmin/sellers`, payload, { headers: { Authorization: `Bearer ${user.token}` } });\r\n      setSellerMsg('Seller created!');\r\n      setNewSeller({ username: '', email: '', password: '', privileges: { ...defaultPrivileges } });\r\n      setLoadingUsers(true);\r\n      const res = await axios.get(`${API_BASE}/auth/subadmin/sellers`, { headers: { Authorization: `Bearer ${user.token}` } });\r\n      setUsers(res.data);\r\n      setLoadingUsers(false);\r\n    } catch (err) {\r\n      const msg = err.response?.data?.message || err.message || 'Error creating seller.';\r\n      setSellerMsg(msg);\r\n    }\r\n  };\r\n\r\n  // Login handlers\r\n  const handleLoginChange = e => {\r\n    const { name, value } = e.target;\r\n    setLogin(l => ({ ...l, [name]: value }));\r\n  };\r\n  const handleLogin = async e => {\r\n    e.preventDefault();\r\n    setLoggingIn(true);\r\n    setLoginError('');\r\n    try {\r\n      const res = await axios.post(`${API_BASE}/auth/login`, login);\r\n      const userObj = {\r\n        token: res.data.token,\r\n        role: res.data.role,\r\n        shopId: res.data.shopId ? res.data.shopId.toString() : null\r\n      };\r\n      localStorage.setItem('user', JSON.stringify(userObj));\r\n      setUser(userObj);\r\n      setLogin({ email: '', password: '' });\r\n    } catch (err) {\r\n      setLoginError('Invalid sub-admin credentials');\r\n    }\r\n    setLoggingIn(false);\r\n  };\r\n\r\n  // Add logout handler for subadmin\r\n  const handleSubadminLogout = () => {\r\n    localStorage.removeItem('user');\r\n    window.location.href = '/subadmin';\r\n  };\r\n\r\n  // Custom logout logic for subadmin\r\n  const handleLogout = async () => {\r\n    // Optionally call backend to invalidate token (if endpoint exists)\r\n    try {\r\n      await axios.post(`${API_BASE}/auth/logout`, {}, { headers: { Authorization: `Bearer ${user?.token}` } });\r\n    } catch (e) {\r\n      // Ignore errors, proceed with local cleanup\r\n    }\r\n    localStorage.removeItem('user');\r\n    setUser(null); // Best practice: clear user state\r\n    // Optionally show a goodbye message (toast or alert)\r\n    // alert('You have been logged out. See you next time!');\r\n  };\r\n\r\n  // Custom profile logic for subadmin\r\n  const handleProfileClick = () => setShowProfileModal(true);\r\n\r\n  // Fetch notifications (placeholder)\r\n  const fetchNotifications = async () => {\r\n    setNotifLoading(true);\r\n    setNotifError('');\r\n    try {\r\n      // Replace with your backend endpoint for subadmin notifications\r\n      setNotifications([\r\n        { id: 1, message: 'Low stock on product X', read: false, createdAt: new Date().toISOString() },\r\n        { id: 2, message: 'New order received', read: false, createdAt: new Date().toISOString() }\r\n      ]);\r\n    } catch (err) {\r\n      setNotifError('Failed to load notifications');\r\n    }\r\n    setNotifLoading(false);\r\n  };\r\n  const handleNotifClick = () => {\r\n    setShowNotifDropdown(v => !v);\r\n    if (!notifications.length) fetchNotifications();\r\n  };\r\n  const markNotificationRead = id => {\r\n    setNotifications(n => n.map(notif => notif.id === id ? { ...notif, read: true } : notif));\r\n  };\r\n\r\n  // Fetch activity log (placeholder)\r\n  const fetchActivityLog = async () => {\r\n    // Replace with your backend endpoint for subadmin activity log\r\n    setActivityLog([\r\n      { time: new Date().toLocaleString(), action: 'Edited product X' },\r\n      { time: new Date().toLocaleString(), action: 'Created seller Y' }\r\n    ]);\r\n  };\r\n  useEffect(() => { fetchActivityLog(); }, []);\r\n\r\n  // Password change handlers\r\n  const handlePasswordChangeInput = e => {\r\n    const { name, value } = e.target;\r\n    setPasswordForm(f => ({ ...f, [name]: value }));\r\n  };\r\n  const handlePasswordChangeSubmit = async e => {\r\n    e.preventDefault();\r\n    setPasswordMsg('');\r\n    if (passwordForm.new !== passwordForm.confirm) {\r\n      setPasswordMsg('New passwords do not match.');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(`${API_BASE}/auth/change-password`, {\r\n        currentPassword: passwordForm.current,\r\n        newPassword: passwordForm.new\r\n      }, { headers: { Authorization: `Bearer ${user?.token}` } });\r\n      setPasswordMsg('Password changed successfully!');\r\n      setPasswordForm({ current: '', new: '', confirm: '' });\r\n      setTimeout(() => setShowPasswordModal(false), 1200);\r\n    } catch (err) {\r\n      setPasswordMsg('Error: ' + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n\r\n  // Forgot password handler\r\n  const handleForgotSubmit = async e => {\r\n    e.preventDefault();\r\n    setForgotMsg('');\r\n    try {\r\n      await axios.post(`${API_BASE}/auth/forgot-password`, { email: forgotEmail });\r\n      setForgotMsg('Password reset link sent! Check your email.');\r\n      setForgotEmail('');\r\n    } catch (err) {\r\n      setForgotMsg('Error: ' + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n\r\n  // Export helpers\r\n  function exportProductsCSV() {\r\n    const headers = ['Name', 'Price', 'Stock'];\r\n    const rows = products.map(p => [p.name, p.price, p.stock]);\r\n    let csv = headers.join(',') + '\\n';\r\n    csv += rows.map(r => r.map(x => '\"' + String(x).replace(/\"/g, '\"\"') + '\"').join(',')).join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'my_products.csv';\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  }\r\n  function exportSellersCSV() {\r\n    const headers = ['Username', 'Email'];\r\n    const rows = users.map(u => [u.username, u.email]);\r\n    let csv = headers.join(',') + '\\n';\r\n    csv += rows.map(r => r.map(x => '\"' + String(x).replace(/\"/g, '\"\"') + '\"').join(',')).join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'my_sellers.csv';\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  }\r\n\r\n  // Handler for deleting a product in Products Managed section\r\n  const handleDeleteProduct = async (productId) => {\r\n    if (!user || !user.token) return;\r\n    try {\r\n      await axios.delete(`${API_BASE}/products/${productId}`, {\r\n        headers: { Authorization: `Bearer ${user.token}` }\r\n      });\r\n      setManagedProducts(managedProducts.filter(p => p._id !== productId));\r\n      setEditProduct(null);\r\n      showToast('Product deleted!', 'success');\r\n    } catch (err) {\r\n      const errorMsg = err.response?.data?.error || 'Error deleting product';\r\n      showToast(errorMsg, 'error');\r\n    }\r\n  };\r\n\r\n  // Helper: get seller privileges (for current user)\r\n  const sellerPrivileges = user?.role === 'user' ? user?.privileges || {} : {};\r\n\r\n  // Helper: get subadmin privilege mask for seller creation\r\n  const subadminPrivileges = user?.role === 'subadmin' ? user?.privileges || {} : {};\r\n\r\n  // --- Advanced Filtering State ---\r\n  const [productSearch, setProductSearch] = useState('');\r\n  const [stockFilter, setStockFilter] = useState('all'); // all, low, out, in\r\n  const [sortBy, setSortBy] = useState('name'); // name, price, stock\r\n  const [sortDir, setSortDir] = useState('asc');\r\n\r\n  // --- Filtering and Sorting Logic ---\r\n  const filteredProducts = products\r\n    .filter(p => p.name.toLowerCase().includes(productSearch.toLowerCase()))\r\n    .filter(p => {\r\n      if (stockFilter === 'low') return p.stock <= 5 && p.stock > 0;\r\n      if (stockFilter === 'out') return p.stock === 0;\r\n      if (stockFilter === 'in') return p.stock > 5;\r\n      return true;\r\n    })\r\n    .sort((a, b) => {\r\n      let valA = a[sortBy], valB = b[sortBy];\r\n      if (typeof valA === 'string') valA = valA.toLowerCase();\r\n      if (typeof valB === 'string') valB = valB.toLowerCase();\r\n      if (valA < valB) return sortDir === 'asc' ? -1 : 1;\r\n      if (valA > valB) return sortDir === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n\r\n  // --- Inline Inventory History State ---\r\n  const [expandedHistory, setExpandedHistory] = useState({}); // { [productId]: true/false }\r\n\r\n  const toggleHistory = async (product) => {\r\n    setExpandedHistory(prev => ({\r\n      ...prev,\r\n      [product._id]: !prev[product._id]\r\n    }));\r\n    // Optionally fetch latest product data if not already loaded\r\n    if (!product.stockHistory) {\r\n      try {\r\n        const userData = localStorage.getItem('user');\r\n        const token = userData ? JSON.parse(userData).token : '';\r\n        const res = await axios.get(`${API_BASE}/products/${product._id}`,\r\n          { headers: { Authorization: `Bearer ${token}` } });\r\n        setProducts(prev => prev.map(p => p._id === product._id ? res.data : p));\r\n      } catch (err) {\r\n        // Optionally show error\r\n      }\r\n    }\r\n  };\r\n\r\n  // Fetch products managed by subadmin\r\n  useEffect(() => {\r\n    if (section === 'products-managed' && user && user.token) {\r\n      axios.get(`${API_BASE}/auth/subadmin/products-managed`, {\r\n        headers: { Authorization: `Bearer ${user.token}` }\r\n      })\r\n        .then(res => {\r\n          if (Array.isArray(res.data) && res.data.length > 0) {\r\n            setManagedProducts(res.data);\r\n          } else {\r\n            // Fallback: fetch products by shopId if managedProducts is empty\r\n            axios.get(`${API_BASE}/products?shopId=${user.shopId}`, {\r\n              headers: { Authorization: `Bearer ${user.token}` }\r\n            })\r\n              .then(res2 => setManagedProducts(res2.data))\r\n              .catch(() => setManagedProducts([]));\r\n          }\r\n        })\r\n        .catch(() => {\r\n          // Fallback: fetch products by shopId if managedProducts API fails\r\n          axios.get(`${API_BASE}/products?shopId=${user.shopId}`, {\r\n            headers: { Authorization: `Bearer ${user.token}` }\r\n          })\r\n            .then(res2 => setManagedProducts(res2.data))\r\n            .catch(() => setManagedProducts([]));\r\n        });\r\n    }\r\n  }, [section, user, showEditModal]);\r\n\r\n  // Section content renderers\r\n  const renderSection = () => {\r\n    switch (section) {\r\n      case 'dashboard':\r\n        return (\r\n          <>\r\n            {/* Summary Cards with real analytics */}\r\n            <div className=\"future-dashboard-cards\" style={{display: 'flex', gap: 24, marginBottom: 32}}>\r\n              <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                <div style={{fontSize: 14, color: '#888'}}>Products Managed</div>\r\n                <div style={{fontWeight: 700, fontSize: 28, color: '#00b894'}}>{products.length}</div>\r\n              </div>\r\n              <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                <div style={{fontSize: 14, color: '#888'}}>Total Orders</div>\r\n                <div style={{fontWeight: 700, fontSize: 28, color: '#0984e3'}}>{analytics.totalOrders}</div>\r\n              </div>\r\n              <div className=\"future-card\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                <div style={{fontSize: 14, color: '#888'}}>Total Revenue</div>\r\n                <div style={{fontWeight: 700, fontSize: 28, color: '#27ae60'}}>ETB {analytics.totalRevenue?.toLocaleString?.() ?? 0}</div>\r\n              </div>\r\n              <div className=\"future-card future-glow\" style={{flex: 1, padding: '1.5rem', display: 'flex', flexDirection: 'column', alignItems: 'flex-start'}}>\r\n                <div style={{fontSize: 14, color: '#888'}}>Best Seller</div>\r\n                <div className=\"future-best-seller\" style={{fontSize: 22}}>{analytics.bestSeller || 'N/A'}</div>\r\n              </div>\r\n            </div>\r\n            {/* Chart & Timeline Row */}\r\n            <div className=\"future-dashboard-row\" style={{display: 'flex', gap: 24, marginBottom: 32, flexWrap: 'wrap'}}>\r\n              {/* Revenue by Month Bar Chart */}\r\n              <div className=\"future-chart-container\" style={{flex: 2, padding: '1.5rem', minWidth: 320}}>\r\n                <div style={{fontWeight: 600, marginBottom: 12}}>Revenue by Month</div>\r\n                {analytics.revenueByMonth && Array.isArray(analytics.revenueByMonth) && analytics.revenueByMonth.length === 12 ? (\r\n                  <Bar\r\n                    data={{\r\n                      labels: Array.from({length: 12}, (_, i) => {\r\n                        const d = new Date();\r\n                        d.setMonth(d.getMonth() - (11 - i));\r\n                        return d.toLocaleString('default', { month: 'short', year: '2-digit' });\r\n                      }),\r\n                      datasets: [{\r\n                        label: 'Revenue (ETB)',\r\n                        data: analytics.revenueByMonth,\r\n                        backgroundColor: '#3a6cf6',\r\n                      }]\r\n                    }}\r\n                    options={{\r\n                      responsive: true,\r\n                      plugins: { legend: { display: false }, title: { display: false } },\r\n                      scales: { y: { beginAtZero: true } }\r\n                    }}\r\n                    height={180}\r\n                  />\r\n                ) : (\r\n                  <div style={{height: 180, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#bbb', fontSize: 18, border: '1px dashed #eee', borderRadius: 8}}>\r\n                    No data available\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {/* Orders by Status Pie Chart */}\r\n              <div className=\"future-chart-container\" style={{flex: 1, padding: '1.5rem'}}>\r\n                <div style={{fontWeight: 600, marginBottom: 12}}>Orders by Status</div>\r\n                {analytics.statusCounts && Object.keys(analytics.statusCounts).length > 0 ? (\r\n                  <Pie\r\n                    data={{\r\n                      labels: Object.keys(analytics.statusCounts),\r\n                      datasets: [{\r\n                        data: Object.values(analytics.statusCounts),\r\n                        backgroundColor: ['#3a6cf6', '#27ae60', '#f7c948', '#e74c3c', '#888'],\r\n                      }]\r\n                    }}\r\n                    options={{\r\n                      responsive: true,\r\n                      plugins: { legend: { position: 'bottom' } }\r\n                    }}\r\n                    height={180}\r\n                  />\r\n                ) : (\r\n                  <div style={{height: 180, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#bbb', fontSize: 18, border: '1px dashed #eee', borderRadius: 8}}>\r\n                    No data available\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            {/* Top Products & Timeline Row */}\r\n            <div style={{display: 'flex', gap: 24, marginBottom: 32, flexWrap: 'wrap'}}>\r\n              {/* Top Products Bar Chart */}\r\n              <div className=\"future-chart-container\" style={{flex: 2, padding: '1.5rem', minWidth: 320}}>\r\n                <div style={{fontWeight: 600, marginBottom: 12}}>Top Selling Products</div>\r\n                {analytics.topProducts && analytics.topProducts.length > 0 ? (\r\n                  <Bar\r\n                    data={{\r\n                      labels: analytics.topProducts.map(p => p.name),\r\n                      datasets: [{\r\n                        label: 'Quantity Sold',\r\n                        data: analytics.topProducts.map(p => p.qty),\r\n                        backgroundColor: '#00b894',\r\n                      }]\r\n                    }}\r\n                    options={{\r\n                      responsive: true,\r\n                      plugins: { legend: { display: false }, title: { display: false } },\r\n                      scales: { y: { beginAtZero: true } }\r\n                    }}\r\n                    height={180}\r\n                  />\r\n                ) : (\r\n                  <div style={{height: 180, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#bbb', fontSize: 18, border: '1px dashed #eee', borderRadius: 8}}>\r\n                    No data available\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {/* Timeline/Notifications */}\r\n              <div style={{flex: 1, background: '#fff', borderRadius: 12, padding: '1.5rem', boxShadow: '0 2px 8px rgba(44,62,80,0.06)', minWidth: 260}}>\r\n                <div style={{fontWeight: 600, marginBottom: 12}}>Horizontal Timeline</div>\r\n                <div style={{color: '#888', fontSize: 15, marginBottom: 8}}>No recent activity.</div>\r\n                <div style={{color: '#888', fontSize: 15}}>More features coming soon.</div>\r\n                <button className=\"button\" style={{marginTop: 16, background: '#00b894', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600}}>Read More</button>\r\n              </div>\r\n            </div>\r\n            {/* Top Products Bar Chart */}\r\n            <div className=\"future-chart-container\" style={{padding: '1.5rem', marginBottom: 32}}>\r\n              <div style={{fontWeight: 600, marginBottom: 12}}>Top Selling Products</div>\r\n              {analytics.topProducts && analytics.topProducts.length > 0 ? (\r\n                <Bar\r\n                  data={{\r\n                    labels: analytics.topProducts.map(p => p.name),\r\n                    datasets: [{\r\n                      label: 'Quantity Sold',\r\n                      data: analytics.topProducts.map(p => p.qty),\r\n                      backgroundColor: '#00b894',\r\n                    }]\r\n                  }}\r\n                  options={{\r\n                    responsive: true,\r\n                    plugins: { legend: { display: false }, title: { display: false } },\r\n                    scales: { y: { beginAtZero: true } }\r\n                  }}\r\n                  height={180}\r\n                />\r\n              ) : (\r\n                <div style={{height: 180, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#bbb', fontSize: 18, border: '1px dashed #eee', borderRadius: 8}}>\r\n                  No data available\r\n                </div>\r\n              )}\r\n            </div>\r\n            {/* Timeline/Notifications */}\r\n            <div style={{flex: 1, background: '#fff', borderRadius: 12, padding: '1.5rem', boxShadow: '0 2px 8px rgba(44,62,80,0.06)'}}>\r\n              <div style={{fontWeight: 600, marginBottom: 12}}>Horizontal Timeline</div>\r\n              <div style={{color: '#888', fontSize: 15, marginBottom: 8}}>No recent activity.</div>\r\n              <div style={{color: '#888', fontSize: 15}}>More features coming soon.</div>\r\n              <button className=\"button\" style={{marginTop: 16, background: '#00b894', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600}}>Read More</button>\r\n            </div>\r\n          </>\r\n        );\r\n      case 'products':\r\n        // Privilege checks for seller\r\n        const canAdd = user?.role === 'user' ? sellerPrivileges.canAddProducts : true;\r\n        const canEdit = user?.role === 'user' ? sellerPrivileges.canEditProducts : true;\r\n        const canDelete = user?.role === 'user' ? sellerPrivileges.canDeleteProducts : true;\r\n        return (\r\n          <div style={{background: '#fff', borderRadius: 12, padding: '1.5rem', boxShadow: '0 2px 8px rgba(44,62,80,0.06)', marginBottom: 32}}>\r\n            <div style={{fontWeight: 600, marginBottom: 12}}>My Products</div>\r\n            {/* --- Advanced Filters --- */}\r\n            <div style={{display: 'flex', gap: 12, marginBottom: 12, alignItems: 'center'}}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search products...\"\r\n                value={productSearch}\r\n                onChange={e => setProductSearch(e.target.value)}\r\n                style={{width: 180}}\r\n              />\r\n              <select value={stockFilter} onChange={e => setStockFilter(e.target.value)}>\r\n                <option value=\"all\">All Stock</option>\r\n                <option value=\"low\">Low Stock (5)</option>\r\n                <option value=\"out\">Out of Stock</option>\r\n                <option value=\"in\">In Stock (&gt;5)</option>\r\n              </select>\r\n              <select value={sortBy} onChange={e => setSortBy(e.target.value)}>\r\n                <option value=\"name\">Sort by Name</option>\r\n                <option value=\"price\">Sort by Price</option>\r\n                <option value=\"stock\">Sort by Stock</option>\r\n              </select>\r\n              <select value={sortDir} onChange={e => setSortDir(e.target.value)}>\r\n                <option value=\"asc\">Asc</option>\r\n                <option value=\"desc\">Desc</option>\r\n              </select>\r\n            </div>\r\n            {/* Debug Info: Show user and products for troubleshooting */}\r\n            <div style={{background:'#ffe',padding:'10px',marginBottom:'10px'}}>\r\n              <strong>Debug Info:</strong><br/>\r\n              User shopId: {user?.shopId ? user.shopId : 'N/A'}<br/>\r\n              Products: <pre>{JSON.stringify(products, null, 2)}</pre>\r\n            </div>\r\n            {products.length === 0 ? (\r\n              <div style={{color: '#888', textAlign: 'center', padding: 32}}>No products found.</div>\r\n            ) : (\r\n            <table style={{width: '100%', borderCollapse: 'collapse', marginTop: 8}}>\r\n              <thead>\r\n                <tr style={{background: '#f4f4f4'}}>\r\n                  <th style={{padding: 8, border: '1px solid #eee'}}>Name</th>\r\n                  <th style={{padding: 8, border: '1px solid #eee'}}>Stock</th>\r\n                  <th style={{padding: 8, border: '1px solid #eee'}}>Price</th>\r\n                  <th style={{padding: 8, border: '1px solid #eee'}}>Actions</th>\r\n                  <th style={{padding: 8, border: '1px solid #eee'}}>Inventory</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredProducts.map(p => [\r\n                  <tr key={p._id} style={p.stock === 0 ? {background: '#ffeaea'} : p.stock <= 5 ? {background: '#fffbe6'} : {}}>\r\n                    <td style={{padding: 8, border: '1px solid #eee'}}>{p.name}</td>\r\n                    <td style={{padding: 8, border: '1px solid #eee'}}>\r\n                      {p.stock}\r\n                      {p.stock === 0 && <span style={{color: '#e74c3c', fontWeight: 700, marginLeft: 6}} title=\"Out of stock\"></span>}\r\n                      {p.stock > 0 && p.stock <= 5 && <span style={{color: '#f7b731', fontWeight: 700, marginLeft: 6}} title=\"Low stock\">!</span>}\r\n                    </td>\r\n                    <td style={{padding: 8, border: '1px solid #eee'}}>ETB {p.price}</td>\r\n                    <td style={{padding: 8, border: '1px solid #eee'}}>\r\n                      <button className=\"button\" style={{marginRight: 8}} onClick={() => handleEdit(p)} disabled={!canEdit} title={canEdit ? 'Edit product' : 'No privilege'}>Edit</button>\r\n                      <button className=\"button\" onClick={() => handleDelete(p._id)} disabled={!canDelete} title={canDelete ? 'Delete product' : 'No privilege'}>Delete</button>\r\n                    </td>\r\n                    <td style={{padding: 8, border: '1px solid #eee'}}>\r\n                      <button className=\"button\" style={{background: '#eee', color: '#0984e3', fontWeight: 600, border: 'none', borderRadius: 6, padding: '4px 10px', fontSize: 14}} onClick={() => toggleHistory(p)}>\r\n                        {expandedHistory[p._id] ? 'Hide History' : 'Show History'}\r\n                      </button>\r\n                    </td>\r\n                  </tr>,\r\n                  expandedHistory[p._id] && (\r\n                    <tr key={p._id + '-history'}>\r\n                      <td colSpan={5} style={{background: '#f9f9f9', padding: 0, border: '1px solid #eee'}}>\r\n                        {p.stockHistory && p.stockHistory.length > 0 ? (\r\n                          <table style={{width: '100%', borderCollapse: 'collapse', margin: 0}}>\r\n                            <thead>\r\n                              <tr style={{background: '#f4f4f4'}}>\r\n                                <th style={{padding: 6, border: '1px solid #eee'}}>Date</th>\r\n                                <th style={{padding: 6, border: '1px solid #eee'}}>Change</th>\r\n                                <th style={{padding: 6, border: '1px solid #eee'}}>Reason</th>\r\n                                <th style={{padding: 6, border: '1px solid #eee'}}>User</th>\r\n                              </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                              {p.stockHistory.slice().reverse().map((h, idx) => (\r\n                                <tr key={idx}>\r\n                                  <td style={{padding: 6, border: '1px solid #eee'}}>{h.date ? new Date(h.date).toLocaleString() : ''}</td>\r\n                                  <td style={{padding: 6, border: '1px solid #eee'}}>{h.change > 0 ? '+' : ''}{h.change}</td>\r\n                                  <td style={{padding: 6, border: '1px solid #eee'}}>{h.reason || '-'}</td>\r\n                                  <td style={{padding: 6, border: '1px solid #eee'}}>{h.user || '-'}</td>\r\n                                </tr>\r\n                              ))}\r\n                            </tbody>\r\n                          </table>\r\n                        ) : (\r\n                          <div style={{color: '#888', padding: 12}}>No inventory history found for this product.</div>\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  )\r\n                ])}\r\n              </tbody>\r\n            </table>\r\n            )}\r\n            {canAdd && <button className=\"button\" style={{marginTop: 16}} onClick={() => { setEditProduct({}); setShowEditModal(true); }}>+ Add Product</button>}\r\n            {/* Product Edit/Add Modal */}\r\n            {showEditModal && (\r\n              <div className=\"modal-overlay\" onClick={() => { setShowEditModal(false); setEditProduct(null); }}>\r\n                <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 480, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                  <button className=\"modal-close\" onClick={() => { setShowEditModal(false); setEditProduct(null); }} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                  <div style={{marginBottom: '1rem', fontWeight: 600}}>{editProduct && editProduct._id ? `Edit Product: ${editProduct.name}` : 'Add Product'}</div>\r\n                  <ProductForm\r\n                    product={editProduct}\r\n                    onClose={() => { setShowEditModal(false); setEditProduct(null); }}\r\n                    onProductUpdated={handleProductUpdated}\r\n                    shopId={user?.shopId}\r\n                    managerId={user?._id}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* Edit Product Modal */}\r\n            {showEditModal && typeof showEditModal !== 'string' && editProduct && !editProduct.delete && !editProduct.view && (\r\n              <div className=\"modal-overlay\" onClick={() => { setShowEditModal(false); setEditProduct(null); }}>\r\n                <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 500, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                  <button className=\"modal-close\" onClick={() => { setShowEditModal(false); setEditProduct(null); }} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                  <ProductForm user={user} product={editProduct} onProductAdded={handleProductUpdated} />\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* Delete Product Modal */}\r\n            {editProduct && editProduct.delete && (\r\n              <div className=\"modal-overlay\" onClick={() => { setEditProduct(null); }}>\r\n                <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 400, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                  <button className=\"modal-close\" onClick={() => setEditProduct(null)} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                  <h3>Delete Product</h3>\r\n                  <p>Are you sure you want to delete <b>{editProduct.name}</b>?</p>\r\n                  <button onClick={() => { handleDeleteProduct(editProduct._id); setEditProduct(null); }} style={{ background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, marginRight: 12 }}>Delete</button>\r\n                  <button onClick={() => setEditProduct(null)} style={{ background: '#636e72', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600 }}>Cancel</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* View Modal */}\r\n            {editProduct && editProduct.view && (\r\n              <div className=\"modal-overlay\" onClick={() => { setEditProduct(null); }}>\r\n                <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 400, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                  <button className=\"modal-close\" onClick={() => setEditProduct(null)} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                  <h3>Product Details</h3>\r\n                  <p><b>Name:</b> {editProduct.name}</p>\r\n                  <p><b>Category:</b> {editProduct.category}</p>\r\n                  <p><b>Price:</b> ${editProduct.price}</p>\r\n                  <p><b>Stock:</b> {editProduct.stock}</p>\r\n                  <button onClick={() => setEditProduct(null)} style={{ background: '#636e72', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600 }}>Close</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      case 'sellers':\r\n        // --- Seller Management Features ---\r\n        // State for search/filter, pagination, product count, view/manage, reset password, status, confirmation dialogs\r\n        // ...all state and useEffect hooks are now at top level...\r\n\r\n        // Filtered sellers\r\n        const filteredSellers = users.filter(u =>\r\n          u.username.toLowerCase().includes(sellerSearch.toLowerCase()) ||\r\n          u.email.toLowerCase().includes(sellerSearch.toLowerCase())\r\n        );\r\n        // Pagination\r\n        const totalPages = Math.ceil(filteredSellers.length / sellersPerPage);\r\n        const pagedSellers = filteredSellers.slice((sellerPage - 1) * sellersPerPage, sellerPage * sellersPerPage);\r\n\r\n        // Reset seller password handler\r\n        const handleResetSellerPassword = async (id) => {\r\n          setResetSellerMsg('');\r\n          try {\r\n            await axios.post(`${API_BASE}/auth/subadmin/sellers/${id}/reset-password`, {}, { headers: { Authorization: `Bearer ${user.token}` } });\r\n            setResetSellerMsg('Password reset! New password sent to seller email.');\r\n            setResetSellerId(null);\r\n          } catch (err) {\r\n            setResetSellerMsg('Error resetting password.');\r\n          }\r\n        };\r\n\r\n        // View/manage seller products handler\r\n        const handleViewSellerProducts = async (seller) => {\r\n          setViewSellerProducts(seller);\r\n        };\r\n\r\n        // Seller status display\r\n        const getSellerStatus = (u) => u.active ? 'Active' : 'Inactive';\r\n\r\n        return (\r\n          <div className=\"future-card\" style={{padding: '1.5rem', marginBottom: 32}}>\r\n            <div style={{fontWeight: 600, marginBottom: 12}}>My Sellers</div>\r\n            <form onSubmit={handleCreateSeller} style={{marginBottom: 18, display: 'flex', gap: 8, alignItems: 'center'}}>\r\n              <input name=\"username\" value={newSeller.username} onChange={handleNewSellerChange} placeholder=\"Username\" required style={{width: 120}} />\r\n              <input name=\"email\" value={newSeller.email} onChange={handleNewSellerChange} placeholder=\"Email\" required style={{width: 180}} />\r\n              <input name=\"password\" type=\"password\" value={newSeller.password} onChange={handleNewSellerChange} placeholder=\"Password\" required style={{width: 120}} />\r\n              <div style={{display: 'flex', flexDirection: 'row', flexWrap: 'wrap', gap: 16, alignItems: 'center', minWidth: 320}}>\r\n                <label title=\"Allow seller to add new products\">\r\n                  <input type=\"checkbox\" name=\"privileges.canAddProducts\" checked={newSeller.privileges.canAddProducts} onChange={handleNewSellerChange} disabled={user?.role === 'subadmin' && !subadminPrivileges.canAddProducts} /> Add Products\r\n                </label>\r\n                <label title=\"Allow seller to edit their products\">\r\n                  <input type=\"checkbox\" name=\"privileges.canEditProducts\" checked={newSeller.privileges.canEditProducts} onChange={handleNewSellerChange} disabled={user?.role === 'subadmin' && !subadminPrivileges.canEditProducts} /> Edit Products\r\n                </label>\r\n                <label title=\"Allow seller to delete their products\">\r\n                  <input type=\"checkbox\" name=\"privileges.canDeleteProducts\" checked={newSeller.privileges.canDeleteProducts} onChange={handleNewSellerChange} disabled={user?.role === 'subadmin' && !subadminPrivileges.canDeleteProducts} /> Delete Products\r\n                </label>\r\n                <label title=\"Allow seller to view orders for their products\">\r\n                  <input type=\"checkbox\" name=\"privileges.canViewOrders\" checked={newSeller.privileges.canViewOrders} onChange={handleNewSellerChange} disabled={user?.role === 'subadmin' && !subadminPrivileges.canViewOrders} /> View Orders\r\n                </label>\r\n                <label title=\"Allow seller to manage their profile (change password)\">\r\n                  <input type=\"checkbox\" name=\"privileges.canManageProfile\" checked={newSeller.privileges.canManageProfile} onChange={handleNewSellerChange} disabled={user?.role === 'subadmin' && !subadminPrivileges.canManageProfile} /> Manage Profile\r\n                </label>\r\n              </div>\r\n              <button type=\"submit\" className=\"btn btn-primary\">Create Seller</button>\r\n            </form>\r\n            {sellerMsg && <div style={{color: '#00b894', marginBottom: 10}}>{sellerMsg}</div>}\r\n            {/* Search/filter sellers */}\r\n            <input\r\n              type=\"text\"\r\n              value={sellerSearch}\r\n              onChange={e => { setSellerSearch(e.target.value); setSellerPage(1); }}\r\n              placeholder=\"Search by username or email\"\r\n              style={{marginBottom: 12, width: 220}}\r\n            />\r\n            {/* Pagination controls */}\r\n            <div style={{marginBottom: 10}}>\r\n              <button disabled={sellerPage === 1} onClick={() => setSellerPage(sellerPage - 1)} style={{marginRight: 8}}>Prev</button>\r\n              <span>Page {sellerPage} of {totalPages}</span>\r\n              <button disabled={sellerPage === totalPages} onClick={() => setSellerPage(sellerPage + 1)} style={{marginLeft: 8}}>Next</button>\r\n            </div>\r\n            {loadingUsers ? (\r\n              <div>Loading sellers...</div>\r\n            ) : (\r\n              <table className=\"future-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Username</th>\r\n                    <th>Email</th>\r\n                    <th>Status</th>\r\n                    <th>Products</th>\r\n                    <th>Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {pagedSellers.map(u => (\r\n                    <tr key={u._id}>\r\n                      <td>{u.username}</td>\r\n                      <td>{u.email}</td>\r\n                      <td>{getSellerStatus(u)}</td>\r\n                      <td>{sellerProductCounts[u._id] ?? '-'}</td>\r\n                      <td>\r\n                        <button className=\"btn btn-secondary\" style={{marginRight: 8}} onClick={() => setConfirmEditId(u._id)}>Edit</button>\r\n                        <button className=\"btn btn-outline\" style={{color: 'red', marginRight: 8}} onClick={() => setConfirmDeleteId(u._id)}>Delete</button>\r\n                        <button className=\"btn btn-info\" style={{marginRight: 8}} onClick={() => handleViewSellerProducts(u)}>View Products</button>\r\n                        <button className=\"btn btn-warning\" onClick={() => setResetSellerId(u._id)}>Reset Password</button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n            {/* Confirmation dialogs */}\r\n            {confirmDeleteId && (\r\n              <div className=\"future-modal-overlay\" onClick={() => setConfirmDeleteId(null)}>\r\n                <div className=\"future-modal-content\" onClick={e => e.stopPropagation()}>\r\n                  <button className=\"future-modal-close\" onClick={() => setConfirmDeleteId(null)}>&times;</button>\r\n                  <div style={{marginBottom: '1rem', fontWeight: 600}}>Confirm Delete</div>\r\n                  <div>Are you sure you want to delete this seller?</div>\r\n                  <div style={{display: 'flex', gap: 12, marginTop: 12}}>\r\n                    <button className=\"btn btn-danger\" onClick={() => { handleUserDelete(confirmDeleteId); setConfirmDeleteId(null); }}>Delete</button>\r\n                    <button className=\"btn\" onClick={() => setConfirmDeleteId(null)}>Cancel</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {confirmEditId && (\r\n              <div className=\"future-modal-overlay\" onClick={() => setConfirmEditId(null)}>\r\n                <div className=\"future-modal-content\" onClick={e => e.stopPropagation()}>\r\n                  <button className=\"future-modal-close\" onClick={() => setConfirmEditId(null)}>&times;</button>\r\n                  <div style={{marginBottom: '1rem', fontWeight: 600}}>Edit Seller</div>\r\n                  <form onSubmit={handleUserEditSubmit}>\r\n                    <input name=\"username\" value={userEditForm.username} onChange={handleUserEditChange} placeholder=\"Username\" required style={{marginBottom: 12, width: '100%'}} />\r\n                    <input name=\"email\" value={userEditForm.email} onChange={handleUserEditChange} placeholder=\"Email\" required style={{marginBottom: 12, width: '100%'}} />\r\n                    <div style={{display: 'flex', flexDirection: 'row', flexWrap: 'wrap', gap: 16, alignItems: 'center', minWidth: 320, marginBottom: 12}}>\r\n                      <label title=\"Allow seller to add new products\"><input type=\"checkbox\" name=\"privileges.canAddProducts\" checked={userEditForm.privileges?.canAddProducts ?? true} onChange={handleUserEditChange} /> Add Products</label>\r\n                      <label title=\"Allow seller to edit their products\"><input type=\"checkbox\" name=\"privileges.canEditProducts\" checked={userEditForm.privileges?.canEditProducts ?? true} onChange={handleUserEditChange} /> Edit Products</label>\r\n                      <label title=\"Allow seller to delete their products\"><input type=\"checkbox\" name=\"privileges.canDeleteProducts\" checked={userEditForm.privileges?.canDeleteProducts ?? true} onChange={handleUserEditChange} /> Delete Products</label>\r\n                      <label title=\"Allow seller to view orders for their products\"><input type=\"checkbox\" name=\"privileges.canViewOrders\" checked={userEditForm.privileges?.canViewOrders ?? true} onChange={handleUserEditChange} /> View Orders</label>\r\n                      <label title=\"Allow seller to manage their profile (change password)\"><input type=\"checkbox\" name=\"privileges.canManageProfile\" checked={userEditForm.privileges?.canManageProfile ?? true} onChange={handleUserEditChange} /> Manage Profile</label>\r\n                    </div>\r\n                    <div style={{display: 'flex', gap: 12}}>\r\n                      <button type=\"submit\" className=\"btn btn-primary\">Save</button>\r\n                      <button type=\"button\" className=\"btn\" onClick={() => setConfirmEditId(null)}>Cancel</button>\r\n                    </div>\r\n                  </form>\r\n                  {userMessage && <div style={{color: '#e74c3c', marginTop: 10}}>{userMessage}</div>}\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* Reset password dialog */}\r\n            {resetSellerId && (\r\n              <div className=\"future-modal-overlay\" onClick={() => setResetSellerId(null)}>\r\n                <div className=\"future-modal-content\" onClick={e => e.stopPropagation()}>\r\n                  <button className=\"future-modal-close\" onClick={() => setResetSellerId(null)}>&times;</button>\r\n                  <div style={{marginBottom: '1rem', fontWeight: 600}}>Reset Seller Password</div>\r\n                  <div>Are you sure you want to reset this seller's password?</div>\r\n                  <div style={{display: 'flex', gap: 12, marginTop: 12}}>\r\n                    <button className=\"btn btn-warning\" onClick={() => handleResetSellerPassword(resetSellerId)}>Reset Password</button>\r\n                    <button className=\"btn\" onClick={() => setResetSellerId(null)}>Cancel</button>\r\n                  </div>\r\n                  {resetSellerMsg && <div style={{color: '#00b894', marginTop: 10}}>{resetSellerMsg}</div>}\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* View/manage seller products modal */}\r\n            {viewSellerProducts && (\r\n              <div className=\"future-modal-overlay\" onClick={() => setViewSellerProducts(null)}>\r\n                <div className=\"future-modal-content\" onClick={e => e.stopPropagation()}>\r\n                  <button className=\"future-modal-close\" onClick={() => setViewSellerProducts(null)}>&times;</button>\r\n                  <div style={{marginBottom: '1rem', fontWeight: 600}}>Products for {viewSellerProducts.username}</div>\r\n                  {/* Could show a list of products for this seller, or link to product management */}\r\n                  <div>Feature coming soon: manage seller's products here.</div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      case 'reports':\r\n        // Calculate revenue for subadmin's products\r\n        const totalRevenue = products.reduce((sum, p) => sum + (Number(p.revenue) || 0), 0);\r\n        return (\r\n          <div style={{background: '#fff', borderRadius: 12, padding: '1.5rem', boxShadow: '0 2px 8px rgba(44,62,80,0.06)', marginBottom: 32}}>\r\n            <div style={{fontWeight: 600, marginBottom: 12}}>My Product Reports</div>\r\n            <div style={{marginBottom: 10}}>Total Revenue: <span style={{color: '#00b894', fontWeight: 700}}>ETB {totalRevenue.toLocaleString()}</span></div>\r\n            <table style={{width: '100%', borderCollapse: 'collapse', marginTop: 8}}>\r\n              <thead>\r\n                <tr style={{background: '#f4f4f4'}}>\r\n                  <th style={{padding: 8, border: '1px solid #eee'}}>Product</th>\r\n                  <th style={{padding: 8, border: '1px solid #eee'}}>Revenue</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {products.map(p => (\r\n                  <tr key={p._id}>\r\n                    <td style={{padding: 8, border: '1px solid #eee'}}>{p.name}</td>\r\n                    <td style={{padding: 8, border: '1px solid #eee'}}>ETB {Number(p.revenue || 0).toLocaleString()}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        );\r\n      case 'orders':\r\n        // Privilege check for seller\r\n        const canViewOrders = user?.role === 'user' ? sellerPrivileges.canViewOrders : true;\r\n        if (!canViewOrders) return <div style={{color: '#888', textAlign: 'center', padding: 32}}>You do not have privilege to view orders.</div>;\r\n        return (\r\n          <div style={{background: '#fff', borderRadius: 12, padding: '1.5rem', boxShadow: '0 2px 8px rgba(44,62,80,0.06)', marginBottom: 32}}>\r\n            <div style={{fontWeight: 600, marginBottom: 12}}>Orders</div>\r\n            {orders.length === 0 ? (\r\n              <div style={{color: '#888'}}>No orders found.</div>\r\n            ) : (\r\n              <table style={{width: '100%', borderCollapse: 'collapse', marginTop: 8}}>\r\n                <thead>\r\n                  <tr style={{background: '#f4f4f4'}}>\r\n                    <th style={{padding: 8, border: '1px solid #eee'}}>Order ID</th>\r\n                    <th style={{padding: 8, border: '1px solid #eee'}}>Buyer</th>\r\n                    <th style={{padding: 8, border: '1px solid #eee'}}>Total</th>\r\n                    <th style={{padding: 8, border: '1px solid #eee'}}>Status</th>\r\n                    <th style={{padding: 8, border: '1px solid #eee'}}>Created</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {orders.map(order => (\r\n                    <tr key={order._id}>\r\n                      <td style={{padding: 8, border: '1px solid #eee'}}>{order._id}</td>\r\n                      <td style={{padding: 8, border: '1px solid #eee'}}>{order.buyer?.username || order.buyer?.email || 'N/A'}</td>\r\n                      <td style={{padding: 8, border: '1px solid #eee'}}>ETB {order.total?.toLocaleString?.() ?? 0}</td>\r\n                      <td style={{padding: 8, border: '1px solid #eee'}}>{order.status}</td>\r\n                      <td style={{padding: 8, border: '1px solid #eee'}}>{order.createdAt ? new Date(order.createdAt).toLocaleString() : ''}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        );\r\n      case 'ratings':\r\n        return (\r\n          <div style={{background: '#fff', borderRadius: 12, padding: '1.5rem', boxShadow: '0 2px 8px rgba(44,62,80,0.06)', marginBottom: 32}}>\r\n            <div style={{fontWeight: 600, marginBottom: 12}}>Ratings</div>\r\n            <div style={{color: '#888'}}>Ratings and reviews coming soon.</div>\r\n          </div>\r\n        );\r\n      case 'comments':\r\n        return (\r\n          <div style={{background: '#fff', borderRadius: 12, padding: '1.5rem', boxShadow: '0 2px 8px rgba(44,62,80,0.06)', marginBottom: 32}}>\r\n            <div style={{fontWeight: 600, marginBottom: 12}}>Comments</div>\r\n            <div style={{color: '#888'}}>Comments and feedback coming soon.</div>\r\n          </div>\r\n        );\r\n      case 'products-managed':\r\n        if (section === 'products-managed') {\r\n          return (\r\n            <div style={{background: '#fff', borderRadius: 12, padding: '2rem', boxShadow: '0 2px 8px rgba(44,62,80,0.06)'}}>\r\n              <h2 style={{fontWeight: 700, fontSize: 22, marginBottom: 18}}>Products Managed</h2>\r\n              <button onClick={() => setShowEditModal('add')} style={{marginBottom: 18, background: '#00b894', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600}}>Add Product</button>\r\n              {managedProducts.length === 0 ? (\r\n                <div style={{color: '#888'}}>No products managed yet.</div>\r\n              ) : (\r\n                <table style={{width: '100%', borderCollapse: 'collapse'}}>\r\n                  <thead>\r\n                    <tr style={{background: '#f8faff'}}>\r\n                      <th style={{padding: '10px 8px', textAlign: 'left'}}>Name</th>\r\n                      <th style={{padding: '10px 8px', textAlign: 'left'}}>Category</th>\r\n                      <th style={{padding: '10px 8px', textAlign: 'left'}}>Price</th>\r\n                      <th style={{padding: '10px 8px', textAlign: 'left'}}>Stock</th>\r\n                      <th style={{padding: '10px 8px', textAlign: 'left'}}>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {managedProducts.map(product => (\r\n                      <tr key={product._id} style={{borderBottom: '1px solid #eee'}}>\r\n                        <td style={{padding: '8px'}}>{product.name}</td>\r\n                        <td style={{padding: '8px'}}>{product.category}</td>\r\n                        <td style={{padding: '8px'}}>${product.price}</td>\r\n                        <td style={{padding: '8px'}}>{product.stock}</td>\r\n                        <td style={{padding: '8px'}}>\r\n                          <button onClick={() => setEditProduct(product)} style={{marginRight: 8, background: '#0984e3', color: '#fff', border: 'none', borderRadius: 4, padding: '4px 10px'}}>Edit</button>\r\n                          <button onClick={() => setEditProduct({ ...product, delete: true })} style={{marginRight: 8, background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 4, padding: '4px 10px'}}>Delete</button>\r\n                          <button onClick={() => setEditProduct({ ...product, view: true })} style={{background: '#636e72', color: '#fff', border: 'none', borderRadius: 4, padding: '4px 10px'}}>View</button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n              {/* Add/Edit Modal */}\r\n              {showEditModal === 'add' && (\r\n                <div className=\"modal-overlay\" onClick={() => setShowEditModal(false)}>\r\n                  <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 500, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                    <button className=\"modal-close\" onClick={() => setShowEditModal(false)} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                    <ProductForm user={user} onProductAdded={() => { setShowEditModal(false); setSection('products-managed'); }} />\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {/* Edit Modal */}\r\n              {showEditModal && typeof showEditModal !== 'string' && editProduct && !editProduct.delete && !editProduct.view && (\r\n                <div className=\"modal-overlay\" onClick={() => { setShowEditModal(false); setEditProduct(null); }}>\r\n                  <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 500, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                    <button className=\"modal-close\" onClick={() => { setShowEditModal(false); setEditProduct(null); }} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                    <ProductForm user={user} product={editProduct} onProductAdded={handleProductUpdated} />\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {/* Delete Modal */}\r\n              {editProduct && editProduct.delete && (\r\n                <div className=\"modal-overlay\" onClick={() => { setEditProduct(null); }}>\r\n                  <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 400, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                    <button className=\"modal-close\" onClick={() => setEditProduct(null)} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                    <h3>Delete Product</h3>\r\n                    <p>Are you sure you want to delete <b>{editProduct.name}</b>?</p>\r\n                    <button onClick={() => { handleDeleteProduct(editProduct._id); setEditProduct(null); }} style={{ background: '#e74c3c', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600, marginRight: 12 }}>Delete</button>\r\n                    <button onClick={() => setEditProduct(null)} style={{ background: '#636e72', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600 }}>Cancel</button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {/* View Modal */}\r\n              {editProduct && editProduct.view && (\r\n                <div className=\"modal-overlay\" onClick={() => { setEditProduct(null); }}>\r\n                  <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 400, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                    <button className=\"modal-close\" onClick={() => setEditProduct(null)} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                    <h3>Product Details</h3>\r\n                    <p><b>Name:</b> {editProduct.name}</p>\r\n                    <p><b>Category:</b> {editProduct.category}</p>\r\n                    <p><b>Price:</b> ${editProduct.price}</p>\r\n                    <p><b>Stock:</b> {editProduct.stock}</p>\r\n                    <button onClick={() => setEditProduct(null)} style={{ background: '#636e72', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600 }}>Close</button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        }\r\n        break;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // Always show login if not subadmin or seller\r\n  if (!user || (user.role !== 'subadmin' && user.role !== 'seller')) {\r\n    return (\r\n      <div style={{maxWidth: 400, margin: '60px auto', background: '#fff', borderRadius: 12, boxShadow: '0 2px 8px rgba(44,62,80,0.06)', padding: '2rem'}}>\r\n        <h2 style={{marginBottom: 24, textAlign: 'center'}}>Subadmin / Seller Login</h2>\r\n        <form onSubmit={handleLogin}>\r\n          <div style={{marginBottom: 16}}>\r\n            <label>Email</label>\r\n            <input type=\"email\" name=\"email\" value={login.email} onChange={handleLoginChange} required style={{width: '100%', padding: 8, borderRadius: 6, border: '1px solid #eee'}} />\r\n          </div>\r\n          <div style={{marginBottom: 16}}>\r\n            <label>Password</label>\r\n            <input type={showPassword ? 'text' : 'password'} name=\"password\" value={login.password} onChange={handleLoginChange} required style={{width: '100%', padding: 8, borderRadius: 6, border: '1px solid #eee'}} />\r\n          </div>\r\n          <div style={{marginBottom: 16}}>\r\n            <label>Role</label>\r\n            <select name=\"role\" value={login.role || ''} onChange={handleLoginChange} required style={{width: '100%', padding: 8, borderRadius: 6, border: '1px solid #eee'}}>\r\n              <option value=\"\">Select role</option>\r\n              <option value=\"subadmin\">Subadmin</option>\r\n              <option value=\"seller\">Seller</option>\r\n            </select>\r\n          </div>\r\n          {loginError && <div style={{color: 'red', marginBottom: 12}}>{loginError}</div>}\r\n          <button type=\"submit\" className=\"button\" style={{width: '100%', background: '#00b894', color: '#fff', border: 'none', borderRadius: 6, padding: '10px 0', fontWeight: 600}} disabled={loggingIn}>{loggingIn ? 'Logging in...' : 'Login'}</button>\r\n        </form>\r\n        <div style={{marginTop: 16, textAlign: 'center'}}>\r\n          <button type=\"button\" style={{background: 'none', border: 'none', color: '#0984e3', cursor: 'pointer'}} onClick={() => setShowForgot(true)}>Forgot password?</button>\r\n        </div>\r\n        {showForgot && (\r\n          <form onSubmit={handleForgotSubmit} style={{marginTop: 16}}>\r\n            <input type=\"email\" value={forgotEmail} onChange={e => setForgotEmail(e.target.value)} placeholder=\"Enter your email\" required style={{width: '100%', padding: 8, borderRadius: 6, border: '1px solid #eee', marginBottom: 8}} />\r\n            <button type=\"submit\" className=\"button\" style={{width: '100%', background: '#0984e3', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 0', fontWeight: 600}}>Send Reset Link</button>\r\n            {forgotMsg && <div style={{color: '#00b894', marginTop: 8}}>{forgotMsg}</div>}\r\n          </form>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <div style={{minHeight: '100vh', background: '#f4f7fa', padding: 0, margin: 0}}>\r\n        {/* <SubAdminHeader user={user} onLogout={handleSubadminLogout} /> */}\r\n        <div style={{display: 'flex', minHeight: '100vh'}}>\r\n          {/* --- Sidebar --- */}\r\n          <div\r\n            className=\"future-sidebar\"\r\n            style={{\r\n              width: sidebarCollapsed ? 68 : 240,\r\n              background: '#232946',\r\n              color: '#e0e6ff',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              boxShadow: '2px 0 12px #23294622',\r\n              transition: 'width 0.2s',\r\n              position: 'relative',\r\n              zIndex: 10,\r\n            }}\r\n          >\r\n            {/* Collapse/Expand Button */}\r\n            <button\r\n              onClick={() => setSidebarCollapsed(c => !c)}\r\n              style={{\r\n                position: 'absolute',\r\n                top: 18,\r\n                right: sidebarCollapsed ? -18 : -22,\r\n                background: '#3a6cf6',\r\n                color: '#fff',\r\n                border: 'none',\r\n                borderRadius: '50%',\r\n                width: 36,\r\n                height: 36,\r\n                cursor: 'pointer',\r\n                boxShadow: '0 2px 8px #23294644',\r\n                zIndex: 20,\r\n                transition: 'right 0.2s',\r\n              }}\r\n              title={sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}\r\n            >\r\n              {sidebarCollapsed ? '' : ''}\r\n            </button>\r\n            {/* User Profile Section */}\r\n            <div\r\n              style={{\r\n                padding: sidebarCollapsed ? '1.2rem 0.5rem' : '2rem 1.5rem',\r\n                borderBottom: '1px solid #2d3652',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: sidebarCollapsed ? 0 : 12,\r\n                cursor: 'pointer',\r\n                justifyContent: sidebarCollapsed ? 'center' : 'flex-start',\r\n              }}\r\n              title=\"Show Profile\"\r\n              onClick={handleProfileClick}\r\n            >\r\n              <div style={{width: 40, height: 40, borderRadius: '50%', background: '#3a6cf6', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 700, fontSize: 22, color: '#fff'}}>\r\n                {user?.username ? user.username[0].toUpperCase() : 'S'}\r\n              </div>\r\n              {!sidebarCollapsed && <span style={{fontWeight: 700, fontSize: 20, letterSpacing: 1}}>{user?.username || 'Subadmin'}</span>}\r\n            </div>\r\n            {/* Sidebar Navigation */}\r\n            <nav style={{flex: 1, padding: sidebarCollapsed ? '1rem 0.5rem' : '2rem 1.5rem 0 1.5rem'}}>\r\n              {filteredSidebarLinks.map(item => (\r\n                <div\r\n                  key={item.key}\r\n                  className={section === item.key ? 'active' : ''}\r\n                  style={{\r\n                    marginBottom: 18,\r\n                    fontWeight: section === item.key ? 600 : 400,\r\n                    color: section === item.key ? '#3a6cf6' : '#e0e6ff',\r\n                    background: section === item.key ? '#263159' : 'none',\r\n                    borderRadius: 6,\r\n                    padding: sidebarCollapsed ? '10px 0' : '8px 16px',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.15s',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: sidebarCollapsed ? 0 : 12,\r\n                    position: 'relative',\r\n                    justifyContent: sidebarCollapsed ? 'center' : 'flex-start',\r\n                  }}\r\n                  onClick={() => setSection(item.key)}\r\n                  title={item.label}\r\n                  onMouseEnter={e => {\r\n                    if (sidebarCollapsed) e.currentTarget.style.background = '#3a6cf6';\r\n                  }}\r\n                  onMouseLeave={e => {\r\n                    if (sidebarCollapsed) e.currentTarget.style.background = section === item.key ? '#263159' : 'none';\r\n                  }}\r\n                >\r\n                  <span style={{fontSize: 20}}>{item.icon}</span>\r\n                  {!sidebarCollapsed && <span>{item.label}</span>}\r\n                  {/* Tooltip for collapsed sidebar */}\r\n                  {sidebarCollapsed && (\r\n                    <span style={{\r\n                      position: 'absolute',\r\n                      left: 60,\r\n                      background: '#263159',\r\n                      color: '#fff',\r\n                      padding: '4px 12px',\r\n                      borderRadius: 6,\r\n                      fontSize: 14,\r\n                      whiteSpace: 'nowrap',\r\n                      opacity: 0,\r\n                      pointerEvents: 'none',\r\n                      transition: 'opacity 0.2s',\r\n                      zIndex: 100,\r\n                    }}\r\n                      className=\"sidebar-tooltip\"\r\n                    >{item.label}</span>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </nav>\r\n            {/* Sidebar Footer (optional) */}\r\n            <div style={{padding: sidebarCollapsed ? '0.5rem' : '1.5rem', borderTop: '1px solid #2d3652', textAlign: 'center', fontSize: 13, color: '#bbb'}}>\r\n              {!sidebarCollapsed && <span> {new Date().getFullYear()} Shop Manager</span>}\r\n            </div>\r\n          </div>\r\n          {/* --- Main Content --- */}\r\n          <div style={{flex: 1, padding: '2.5rem 3rem', minHeight: '100vh', boxSizing: 'border-box', overflowY: 'auto'}}>\r\n            {/* --- HEADER --- */}\r\n            <div className=\"subadmin-dashboard-header\" style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 32}}>\r\n              <div className=\"subadmin-header-left\" style={{display: 'flex', alignItems: 'center', gap: 12}}>\r\n                <span className=\"subadmin-dashboard-logo\" style={{fontWeight: 700, fontSize: 22, color: '#00b894'}}>AutoPartsPro</span>\r\n                <span className=\"subadmin-dashboard-title\" style={{fontWeight: 600, fontSize: 18, color: '#222'}}>Subadmin Dashboard</span>\r\n              </div>\r\n              <div className=\"subadmin-header-actions\" style={{display: 'flex', alignItems: 'center', gap: 16}}>\r\n                {/* --- Notification Bell UI and Dropdown --- */}\r\n                <div style={{display: 'flex', justifyContent: 'flex-end', alignItems: 'center', marginBottom: 18}}>\r\n                  <div style={{position: 'relative'}}>\r\n                    <button\r\n                      onClick={handleNotifClick}\r\n                      style={{background: 'none', border: 'none', cursor: 'pointer', position: 'relative', padding: 0}}\r\n                      aria-label=\"Notifications\"\r\n                    >\r\n                      <FaBell size={22} color={showNotifDropdown ? '#0984e3' : '#888'} />\r\n                      {notifications.some(n => !n.read) && (\r\n                        <span style={{position: 'absolute', top: -4, right: -4, background: '#e74c3c', color: '#fff', borderRadius: '50%', fontSize: 11, padding: '2px 6px', fontWeight: 700}}>\r\n                          {notifications.filter(n => !n.read).length}\r\n                        </span>\r\n                      )}\r\n                    </button>\r\n                    {showNotifDropdown && (\r\n                      <div style={{position: 'absolute', right: 0, top: 28, background: '#fff', border: '1px solid #eee', borderRadius: 8, boxShadow: '0 2px 12px #0984e322', minWidth: 260, zIndex: 100}}>\r\n                        <div style={{fontWeight: 700, fontSize: 15, padding: '10px 16px', borderBottom: '1px solid #eee', background: '#f8faff'}}>Notifications</div>\r\n                        {notifLoading ? (\r\n                          <div style={{padding: 16, color: '#888'}}>Loading...</div>\r\n                        ) : notifError ? (\r\n                          <div style={{padding: 16, color: '#e74c3c'}}>{notifError}</div>\r\n                        ) : notifications.length === 0 ? (\r\n                          <div style={{padding: 16, color: '#888'}}>No notifications.</div>\r\n                        ) : (\r\n                          notifications.map(n => (\r\n                            <div\r\n                              key={n.id}\r\n                              style={{\r\n                                padding: '10px 16px',\r\n                                background: n.read ? '#fff' : '#eaf6ff',\r\n                                borderBottom: '1px solid #f2f2f2',\r\n                                fontWeight: n.read ? 400 : 700,\r\n                                color: n.read ? '#444' : '#0984e3',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: 8\r\n                              }}\r\n                              onClick={() => markNotificationRead(n.id)}\r\n                            >\r\n                              {!n.read && <span style={{width: 8, height: 8, background: '#0984e3', borderRadius: '50%', display: 'inline-block', marginRight: 6}} />}\r\n                              <span>{n.message}</span>\r\n                              <span style={{marginLeft: 'auto', fontSize: 11, color: '#aaa'}}>{n.createdAt ? new Date(n.createdAt).toLocaleString() : ''}</span>\r\n                            </div>\r\n                          ))\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <button className=\"subadmin-export-btn\" onClick={exportProductsCSV} style={{background: '#00b894', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600}}>Export Products</button>\r\n                <button className=\"subadmin-export-btn\" onClick={exportSellersCSV} style={{background: '#0984e3', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600}}>Export Sellers</button>\r\n                <button className=\"subadmin-logout-btn\" onClick={handleLogout} style={{background: 'none', color: '#e74c3c', border: 'none', borderRadius: 6, padding: '8px 18px', fontWeight: 600}}>Logout</button>\r\n                <span className=\"subadmin-header-avatar\" title=\"Profile\" onClick={handleProfileClick} style={{width: 36, height: 36, borderRadius: '50%', background: '#00b894', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff', fontWeight: 700, fontSize: 18}}>\r\n                  {user?.username?.[0]?.toUpperCase() || 'S'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            {/* Profile Modal */}\r\n            {showProfileModal && (\r\n              <div className=\"modal-overlay\" onClick={() => setShowProfileModal(false)}>\r\n                <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 400, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                  <button className=\"modal-close\" onClick={() => setShowProfileModal(false)} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                  <div style={{marginBottom: '1rem', fontWeight: 600}}>Profile</div>\r\n                  <div><b>Username:</b> {user?.username}</div>\r\n                  <div><b>Email:</b> {user?.email}</div>\r\n                  <div><b>Role:</b> {user?.role}</div>\r\n                </div>\r\n                           </div>\r\n            )}\r\n            {/* Password Change Modal */}\r\n            {showPasswordModal && (\r\n              <div className=\"modal-overlay\" onClick={() => setShowPasswordModal(false)}>\r\n                <div className=\"modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: 400, width: '95vw', borderRadius: 16, boxShadow: '0 8px 32px rgba(44,62,80,0.18)', padding: '2rem', position: 'relative' }}>\r\n                  <button className=\"modal-close\" onClick={() => setShowPasswordModal(false)} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700, zIndex: 10 }}>&times;</button>\r\n                  <div style={{marginBottom: '1rem', fontWeight: 600}}>Change Password</div>\r\n                  <form onSubmit={handlePasswordChangeSubmit}>\r\n                    <input name=\"current\" type=\"password\" value={passwordForm.current} onChange={handlePasswordChangeInput} placeholder=\"Current Password\" required style={{marginBottom: 12, width: '100%'}} />\r\n                    <input name=\"new\" type=\"password\" value={passwordForm.new} onChange={handlePasswordChangeInput} placeholder=\"New Password\" required style={{marginBottom: 12, width: '100%'}} />\r\n                    <input name=\"confirm\" type=\"password\" value={passwordForm.confirm} onChange={handlePasswordChangeInput} placeholder=\"Confirm New Password\" required style={{marginBottom: 12, width: '100%'}} />\r\n                    <button type=\"submit\" className=\"button\" style={{width: '100%'}}>Change Password</button>\r\n                  </form>\r\n                  {passwordMsg && <div style={{color: passwordMsg.includes('success') ? '#00b894' : '#e74c3c', marginTop: 10}}>{passwordMsg}</div>}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"dashboard-root\">\r\n              {renderSection()}\r\n              {/* Activity Log Section */}\r\n              {section === 'dashboard' && (\r\n                <div style={{background: '#fff', borderRadius: 12, padding: '1.5rem', marginBottom: 32, boxShadow: '0 2px 8px rgba(44,62,80,0.06)'}}>\r\n                  <div style={{ fontWeight: 700, fontSize: 18, marginBottom: 10 }}>Recent Activity</div>\r\n                  <ul>\r\n                    {activityLog.length === 0 ? (\r\n                      <li style={{ color: '#888' }}>No recent activity.</li>\r\n                    ) : activityLog.map((log, idx) => (\r\n                      <li key={idx}>\r\n                        <span style={{ fontWeight: 600 }}>{log.time}:</span> {log.action}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {toast.show && (\r\n          <div style={{position: 'fixed', top: 24, right: 24, zIndex: 9999, background: toast.type === 'success' ? '#00b894' : '#e74c3c', color: '#fff', padding: '14px 28px', borderRadius: 8, fontWeight: 700, fontSize: 16, boxShadow: '0 2px 12px #23252633', transition: 'all 0.2s'}}>\r\n            {toast.message}\r\n          </div>\r\n        )}\r\n        {/* Spinner CSS */}\r\n        <style>{`\r\n          @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\r\n        `}</style>\r\n      </div>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\n// ErrorBoundary component to catch errors in dashboard\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null };\r\n  }\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true, error };\r\n  }\r\n  componentDidCatch(error, errorInfo) {\r\n    // You can log errorInfo to an error reporting service here\r\n    // console.error(error, errorInfo);\r\n  }\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div style={{ padding: 32, color: 'red', background: '#fff', borderRadius: 12, margin: 32 }}>\r\n          <h2>Something went wrong in the dashboard.</h2>\r\n          <pre>{this.state.error && this.state.error.toString()}</pre>\r\n        </div>\r\n      );\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\n// At the very end of the file, ensure the export uses ErrorBoundary\r\nexport default function DashboardWithBoundary(props) {\r\n  return (\r\n    <ErrorBoundary>\r\n      <SubAdminDashboard {...props} />\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Profile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setError('You must be logged in to view your profile.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    axios.get('/api/auth/me', {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(res => {\r\n        setUser(res.data);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        setError(\r\n          err.response?.data?.message ||\r\n          err.response?.data?.error ||\r\n          err.message ||\r\n          'Failed to load profile.'\r\n        );\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  if (loading) return <div style={{textAlign:'center',marginTop:40}}>Loading profile...</div>;\r\n  if (error) return <div style={{color:'#e74c3c',textAlign:'center',marginTop:40}}>{error}</div>;\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      maxWidth: 600,\r\n      margin: '3rem auto',\r\n      background: '#fff',\r\n      borderRadius: 18,\r\n      boxShadow: '0 4px 24px rgba(44,62,80,0.10)',\r\n      padding: '2.5rem 2rem',\r\n      fontFamily: 'Poppins, Arial, sans-serif',\r\n      position: 'relative',\r\n    }}>\r\n      <h2 style={{ fontWeight: 700, fontSize: '2rem', marginBottom: 32, color: '#222' }}>My Profile</h2>\r\n      <div style={{ fontSize: '1.2rem', marginBottom: 18 }}><b>Name:</b> {user.username || user.name}</div>\r\n      <div style={{ fontSize: '1.2rem', marginBottom: 18 }}><b>Email:</b> {user.email}</div>\r\n      {user.phone && <div style={{ fontSize: '1.2rem', marginBottom: 18 }}><b>Phone:</b> {user.phone}</div>}\r\n      {user.city && <div style={{ fontSize: '1.2rem', marginBottom: 18 }}><b>City:</b> {user.city}</div>}\r\n      <div style={{ fontSize: '1.2rem', marginBottom: 18 }}><b>Role:</b> {user.role || 'User'}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React, { useState } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE = '/api'; // Use static fallback, do not use process.env in frontend\r\n\r\nconst ResetPassword = () => {\r\n  const { token } = useParams();\r\n  const history = useHistory(); // useHistory for navigation\r\n  const [password, setPassword] = useState('');\r\n  const [confirm, setConfirm] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [msg, setMsg] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setMsg('');\r\n    if (!password || !confirm) {\r\n      setMsg('Please enter and confirm your new password.');\r\n      return;\r\n    }\r\n    if (password !== confirm) {\r\n      setMsg('Passwords do not match.');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      const res = await axios.post(`${API_BASE}/auth/reset-password`, { token, password });\r\n      setMsg('Password reset successful! You can now log in.');\r\n      setTimeout(() => history.push('/subadmin'), 1800); // useHistory push\r\n    } catch (err) {\r\n      setMsg(err.response?.data?.message || 'Error resetting password.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"future-login-bg\" style={{\r\n      minHeight: '100vh',\r\n      background: 'radial-gradient(ellipse at 60% 40%, #232526 0%, #414345 100%)',\r\n      display: 'flex', alignItems: 'center', justifyContent: 'center', position: 'relative', overflow: 'hidden'\r\n    }}>\r\n      {/* Animated background shapes */}\r\n      <div style={{ position: 'absolute', top: '-10%', left: '-10%', width: 300, height: 300, background: 'linear-gradient(135deg, #00b89499 0%, #0984e399 100%)', filter: 'blur(60px)', borderRadius: '50%', zIndex: 0, opacity: 0.7, animation: 'float1 8s ease-in-out infinite alternate' }} />\r\n      <div style={{ position: 'absolute', bottom: '-10%', right: '-10%', width: 320, height: 320, background: 'linear-gradient(135deg, #3a6cf699 0%, #23252699 100%)', filter: 'blur(70px)', borderRadius: '50%', zIndex: 0, opacity: 0.6, animation: 'float2 10s ease-in-out infinite alternate' }} />\r\n      <style>{`\r\n        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Roboto:wght@400;500;700&display=swap');\r\n        .future-login-card { box-sizing: border-box; font-family: 'Montserrat', 'Roboto', Arial, sans-serif; }\r\n        .future-login-card input { box-sizing: border-box; width: 100%; background: none; border: 1.5px solid #bbb; border-radius: 8px; padding: 18px 40px 18px 12px; font-size: 17px; color: #232526; outline: none; transition: border 0.2s; margin: 0; display: block; font-family: 'Roboto', 'Montserrat', Arial, sans-serif; font-weight: 500; letter-spacing: 0.02em; }\r\n        .future-login-card form { width: 100%; box-sizing: border-box; }\r\n        .future-login-card label { position: absolute; left: 18px; top: 18px; color: #888; font-size: 16px; pointer-events: none; transition: all 0.18s; background: none; font-family: 'Montserrat', Arial, sans-serif; font-weight: 700; letter-spacing: 0.03em; }\r\n        .future-login-card input:focus ~ label, .future-login-card input:not(:placeholder-shown) ~ label { top: 2px; left: 12px; font-size: 13px; color: #00b894; background: #fff8; padding: 0 4px; font-family: 'Montserrat', Arial, sans-serif; font-weight: 900; }\r\n        .future-login-card .eye-btn { position: absolute; right: 12px; top: 16px; background: none; border: none; cursor: pointer; color: #888; font-size: 20px; }\r\n        .future-login-card .login-btn { width: 100%; background: linear-gradient(90deg, #00b894 0%, #0984e3 100%); color: #fff; border: none; border-radius: 8px; padding: 14px 0; font-size: 19px; font-family: 'Montserrat', 'Roboto', Arial, sans-serif; font-weight: 900; margin-top: 18px; box-shadow: 0 2px 12px #00b89433; transition: transform 0.12s, box-shadow 0.12s; letter-spacing: 0.04em; }\r\n        .future-login-card .login-btn:hover { transform: translateY(-2px) scale(1.03); box-shadow: 0 4px 18px #0984e344; }\r\n        .future-login-card .login-btn:active { transform: scale(0.98); }\r\n        .future-login-card .error-msg { color: #e74c3c; margin-top: 16px; display: flex; align-items: center; font-size: 15px; font-weight: 700; font-family: 'Roboto', Arial, sans-serif; letter-spacing: 0.02em; }\r\n        .future-login-card .success-msg { color: #00b894; margin-top: 16px; font-size: 15px; font-weight: 700; font-family: 'Roboto', Arial, sans-serif; letter-spacing: 0.02em; }\r\n      `}</style>\r\n      <div className=\"future-login-card\" style={{ maxWidth: 340, width: '100%', margin: '0 auto', background: 'rgba(255,255,255,0.18)', borderRadius: 18, boxShadow: '0 8px 32px 0 rgba(44,62,80,0.18)', padding: '2rem 1.2rem 1.2rem 1.2rem', backdropFilter: 'blur(16px)', border: '1.5px solid rgba(255,255,255,0.22)', position: 'relative', zIndex: 1, display: 'flex', flexDirection: 'column', justifyContent: 'center', boxSizing: 'border-box', fontFamily: 'Montserrat, Roboto, Arial, sans-serif' }}>\r\n        <div style={{fontWeight: 900, fontSize: 28, color: '#232526', letterSpacing: 0.04, marginBottom: 8, textAlign: 'center', fontFamily: 'Montserrat, Arial, sans-serif'}}>Reset Password</div>\r\n        <div style={{fontWeight: 500, fontSize: 16, color: '#888', marginBottom: 24, textAlign: 'center', fontFamily: 'Roboto, Arial, sans-serif'}}>Enter your new password below.</div>\r\n        <form onSubmit={handleSubmit} autoComplete=\"off\">\r\n          <div style={{position: 'relative', marginBottom: 24}}>\r\n            <input\r\n              name=\"password\"\r\n              id=\"reset-password\"\r\n              type={showPassword ? 'text' : 'password'}\r\n              value={password}\r\n              onChange={e => setPassword(e.target.value)}\r\n              required\r\n              placeholder=\" \"\r\n              autoComplete=\"new-password\"\r\n              disabled={loading}\r\n            />\r\n            <label htmlFor=\"reset-password\">New Password</label>\r\n            <button type=\"button\" className=\"eye-btn\" tabIndex={-1} aria-label=\"Show password\" onClick={() => setShowPassword(v => !v)} style={{outline: 'none'}}>\r\n              {showPassword ? (\r\n                <svg width=\"22\" height=\"22\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" viewBox=\"0 0 24 24\"><path d=\"M1 1l22 22\" /><path d=\"M17.94 17.94A10.94 10.94 0 0 1 12 19c-5 0-9.27-3.11-11-7 1.21-2.71 3.19-4.96 5.66-6.32\" /><path d=\"M9.53 9.53A3.5 3.5 0 0 0 12 15.5c1.38 0 2.63-.7 3.35-1.77\" /><path d=\"M14.47 14.47A3.5 3.5 0 0 1 9.53 9.53\" /></svg>\r\n              ) : (\r\n                <svg width=\"22\" height=\"22\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" viewBox=\"0 0 24 24\"><ellipse cx=\"12\" cy=\"12\" rx=\"10\" ry=\"7\" /><circle cx=\"12\" cy=\"12\" r=\"3.5\" /></svg>\r\n              )}\r\n            </button>\r\n          </div>\r\n          <div style={{position: 'relative', marginBottom: 24}}>\r\n            <input\r\n              name=\"confirm\"\r\n              id=\"reset-confirm\"\r\n              type={showPassword ? 'text' : 'password'}\r\n              value={confirm}\r\n              onChange={e => setConfirm(e.target.value)}\r\n              required\r\n              placeholder=\" \"\r\n              autoComplete=\"new-password\"\r\n              disabled={loading}\r\n            />\r\n            <label htmlFor=\"reset-confirm\">Confirm Password</label>\r\n          </div>\r\n          <button type=\"submit\" className=\"login-btn\" disabled={loading}>{loading ? 'Resetting...' : 'Reset Password'}</button>\r\n        </form>\r\n        {msg && <div className={msg.includes('success') ? 'success-msg' : 'error-msg'}>{msg}</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Wishlist = () => {\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    axios.get('/api/wishlist')\r\n      .then(res => setWishlist(res.data))\r\n      .catch(() => setError('Failed to load wishlist.'))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  if (loading) return <div style={{padding: '2rem'}}><h2>Loading wishlist...</h2></div>;\r\n  if (error) return <div style={{padding: '2rem'}}><h2>{error}</h2></div>;\r\n  if (wishlist.length === 0) return <div style={{padding: '2rem'}}><h2>Your wishlist is empty.</h2></div>;\r\n\r\n  return (\r\n    <div style={{maxWidth: 800, margin: '2rem auto', background: '#fff', borderRadius: 8, boxShadow: '0 2px 8px #eee', padding: 24}}>\r\n      <h2>Your Wishlist</h2>\r\n      <ul style={{listStyle: 'none', padding: 0}}>\r\n        {wishlist.map(item => (\r\n          <li key={item._id} style={{marginBottom: 16, borderBottom: '1px solid #eee', paddingBottom: 8}}>\r\n            <div style={{display: 'flex', alignItems: 'center'}}>\r\n              {item.image && <img src={item.image} alt={item.name} style={{width: 60, height: 60, objectFit: 'cover', borderRadius: 4, marginRight: 16}} />}\r\n              <div style={{flex: 1}}>\r\n                <strong>{item.name}</strong><br/>\r\n                <span>Price: ${item.price}</span>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Wishlist;\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    axios.get('http://localhost:5000/api/orders/my', {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(res => setOrders(res.data))\r\n      .catch(err => setError('Failed to load orders.'))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  if (loading) return <div style={{padding: '2rem'}}>Loading orders...</div>;\r\n  if (error) return <div style={{padding: '2rem', color: 'red'}}>{error}</div>;\r\n  if (orders.length === 0) return <div style={{padding: '2rem'}}><h2>No orders found.</h2></div>;\r\n\r\n  return (\r\n    <div style={{maxWidth: 900, margin: '2rem auto', background: '#fff', borderRadius: 8, boxShadow: '0 2px 8px #eee', padding: 24}}>\r\n      <h2>Your Orders</h2>\r\n      <ul style={{listStyle: 'none', padding: 0}}>\r\n        {orders.map(order => (\r\n          <li key={order._id} style={{marginBottom: 16, borderBottom: '1px solid #eee', paddingBottom: 8}}>\r\n            <div><strong>Order ID:</strong> {order._id}</div>\r\n            <div><strong>Status:</strong> {order.status}</div>\r\n            <div><strong>Total:</strong> ${order.total}</div>\r\n            <div><strong>Date:</strong> {order.createdAt ? new Date(order.createdAt).toLocaleString() : ''}</div>\r\n            <div><strong>Products:</strong>\r\n              <ul>\r\n                {order.products.map((item, idx) => (\r\n                  <li key={idx}>{item.product?.name || 'Product'} x {item.quantity} @ {item.price}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Footer from '../components/Footer';\r\nimport '../pages/styles/main.css';\r\n\r\nconst UserDashboard = () => {\r\n  const [user, setUser] = useState({});\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Fetch user info from localStorage or backend\r\n    const userInfo = JSON.parse(localStorage.getItem('user')) || {};\r\n    setUser(userInfo);\r\n    // Fetch orders from backend (demo)\r\n    fetch('/api/orders?userId=' + userInfo._id)\r\n      .then(res => res.json())\r\n      .then(data => setOrders(data))\r\n      .catch(() => setOrders([]));\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <h2>User Dashboard</h2>\r\n      <div className=\"profile-section\">\r\n        <h3>Profile Info</h3>\r\n        <p><strong>Name:</strong> {user.name}</p>\r\n        <p><strong>Email:</strong> {user.email}</p>\r\n      </div>\r\n      <div className=\"orders-section\">\r\n        <h3>Order Summary</h3>\r\n        {orders.length === 0 ? (\r\n          <p>No orders found.</p>\r\n        ) : (\r\n          <ul>\r\n            {orders.map(order => (\r\n              <li key={order._id}>\r\n                <strong>Order #{order._id}</strong> - {order.status} - {order.total} USD\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDashboard;\r\n","import React, { useState, useRef } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Home from './pages/Home';\nimport Auth from './components/Auth';\nimport Register from './components/Register';\nimport CartPage from './pages/CartPage';\nimport Header from './components/Header';\nimport About from './pages/About';\nimport Contact from './pages/Contact';\nimport Post from './pages/Post';\nimport Cart from './components/Cart';\nimport AdminPage from './pages/AdminPage';\nimport SubAdminDashboard from './pages/SubAdminDashboard';\nimport Profile from './pages/Profile';\nimport ResetPassword from './pages/ResetPassword';\nimport PrivateRoute from './components/PrivateRoute'; // Import PrivateRoute\nimport Checkout from './components/Checkout';\nimport Wishlist from './pages/Wishlist'; // Import Wishlist page\nimport Orders from './pages/Orders'; // Import Orders page\nimport UserDashboard from './pages/UserDashboard';\nimport './styles/main.css';\n\n// SlideBarModal component (no drag logic, just a visible bar)\nfunction SlideBarModal({ children, onClose }) {\n  const contentRef = useRef(null);\n  const [dragging, setDragging] = useState(false);\n  const [startY, setStartY] = useState(0);\n  const [startScroll, setStartScroll] = useState(0);\n\n  const handleDragStart = (e) => {\n    setDragging(true);\n    setStartY(e.clientY);\n    setStartScroll(contentRef.current.scrollTop);\n    document.body.style.userSelect = 'none';\n  };\n\n  const handleDrag = (e) => {\n    if (!dragging) return;\n    const deltaY = e.clientY - startY;\n    contentRef.current.scrollTop = startScroll + deltaY * 2;\n  };\n\n  const handleDragEnd = () => {\n    setDragging(false);\n    document.body.style.userSelect = '';\n  };\n\n  React.useEffect(() => {\n    if (dragging) {\n      window.addEventListener('mousemove', handleDrag);\n      window.addEventListener('mouseup', handleDragEnd);\n    } else {\n      window.removeEventListener('mousemove', handleDrag);\n      window.removeEventListener('mouseup', handleDragEnd);\n    }\n    return () => {\n      window.removeEventListener('mousemove', handleDrag);\n      window.removeEventListener('mouseup', handleDragEnd);\n    };\n  }, [dragging]);\n\n  return (\n    <div\n      style={{\n        background: '#fff', padding: '2.5rem 2rem 2rem', borderRadius: 12, minWidth: 370, maxWidth: '95vw', position: 'fixed', boxShadow: '0 8px 32px rgba(44,62,80,0.18)',\n        animation: 'modalSlideIn .35s cubic-bezier(.4,2,.6,1)', left: '50%', top: '15%', transform: 'translate(-50%, 0)', zIndex: 2100\n      }}\n    >\n      <div\n        className=\"modal-vertical-bar\"\n        style={{ position: 'absolute', top: 18, right: 0, width: 8, height: 'calc(100% - 36px)', background: 'linear-gradient(180deg, #e74c3c 0%, #2980ef 100%)', borderRadius: 4, cursor: 'ns-resize', zIndex: 2200 }}\n        title=\"Slide bar\"\n        onMouseDown={handleDragStart}\n      />\n      <button onClick={onClose} style={{ position: 'absolute', top: 18, right: 18, background: 'none', border: 'none', fontSize: 28, color: '#888', cursor: 'pointer', fontWeight: 700 }}>&times;</button>\n      <div ref={contentRef} style={{ maxHeight: '60vh', overflowY: 'auto', paddingRight: 12 }}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  const [showCart, setShowCart] = useState(false);\n  const [showAuth, setShowAuth] = useState(false);\n  const [authMode, setAuthMode] = useState('login');\n  const [cartCount, setCartCount] = useState(() => {\n    const cart = JSON.parse(localStorage.getItem('cart')) || [];\n    return cart.reduce((sum, item) => sum + (item.quantity || 1), 0);\n  });\n  const [showChat, setShowChat] = useState(false);\n  const [filters, setFilters] = useState({ make: '', model: '', year: '', search: '' });\n  const [searchTrigger, setSearchTrigger] = useState(0);\n\n  const handleAuthClick = (mode) => {\n    setAuthMode(mode);\n    setShowAuth(true);\n  };\n\n  // Show cart only when add to cart is clicked\n  const handleAddToCart = () => {\n    setShowCart(true);\n  };\n\n  const handleChatClick = () => {\n    setShowChat(true);\n  };\n\n  const handleSearch = () => {\n    setSearchTrigger(prev => prev + 1);\n  };\n\n  return (\n    <Router>\n      {/* Only show Header on non-admin and non-subadmin routes */}\n      <Route\n        path={[\"/admin\", \"/subadmin\"]}\n        render={() => null}\n      />\n      <Route\n        path={[\"/\", \"/about\", \"/contact\", \"/post\", \"/profile\", \"/cart\", \"/wishlist\", \"/orders\", \"/dashboard\"]}\n        render={() => (\n          <Header \n            onLoginClick={() => handleAuthClick('login')}\n            onRegisterClick={() => handleAuthClick('register')}\n            onCartClick={() => setShowCart(true)} \n            onCartCount={cartCount} \n            onChatClick={handleChatClick}\n            filters={filters}\n            setFilters={setFilters}\n            onSearch={handleSearch}\n          />\n        )}\n      />\n      <Switch>\n        <Route exact path=\"/\">\n          <Home onAddToCart={handleAddToCart} cartCount={cartCount} setCartCount={setCartCount} />\n        </Route>\n        <Route path=\"/about\">\n          <About />\n        </Route>\n        <Route path=\"/contact\">\n          <Contact />\n        </Route>\n        <Route path=\"/post\">\n          <Post />\n        </Route>\n        <Route path=\"/profile\">\n          <Profile />\n        </Route>\n        <Route path=\"/admin\">\n          <AdminPage />\n        </Route>\n        <Route path=\"/cart\">\n          <CartPage />\n        </Route>\n        <Route path=\"/reset-password/:token\">\n          <ResetPassword />\n        </Route>\n        <Route path=\"/subadmin\">\n          <SubAdminDashboard />\n        </Route>\n        <Route path=\"/checkout\">\n          <Checkout />\n        </Route>\n        <Route path=\"/wishlist\">\n          <Wishlist />\n        </Route>\n        <Route path=\"/orders\">\n          <Orders />\n        </Route>\n        <Route path=\"/dashboard\">\n          <UserDashboard />\n        </Route>\n      </Switch>\n      {showCart && (\n        <div className=\"cart-sidebar-overlay\" onClick={() => setShowCart(false)}>\n          <Cart onClose={() => setShowCart(false)} onCartCountChange={setCartCount} />\n        </div>\n      )}\n      {showAuth && (\n        <div style={{\n          position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.5)',\n          display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 2000\n        }}>\n          <SlideBarModal onClose={() => { setShowAuth(false); window.location.href = '/'; }}>\n            {authMode === 'login' ? (\n              <Auth \n                onSuccess={() => setShowAuth(false)}\n                onSwitchToRegister={() => setAuthMode('register')}\n              />\n            ) : (\n              <Register \n                onSuccess={() => setShowAuth(false)}\n                onSwitchToLogin={() => setAuthMode('login')}\n              />\n            )}\n          </SlideBarModal>\n          <style>{`\n            @keyframes modalSlideIn {\n              from { transform: translateY(100vh); opacity: 0; }\n              to { transform: translateY(0); opacity: 1; }\n            }\n          `}</style>\n        </div>\n      )}\n      {showChat && (\n        <div style={{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',background:'rgba(44,62,80,0.18)',zIndex:2200,display:'flex',alignItems:'center',justifyContent:'center'}}>\n          <SlideBarModal onClose={() => setShowChat(false)}>\n            <h2 style={{marginBottom:12}}>Chat</h2>\n            {/* Simple info for demo: you can connect this to your chat logic or ProductList chat modal */}\n            <div style={{color:'#888'}}>To chat with a seller, please open a product detail and use the chat button for user-to-user products.</div>\n          </SlideBarModal>\n        </div>\n      )}\n    </Router>\n  );\n}\n\nexport default App;","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/main.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}